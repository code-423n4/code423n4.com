{
  "circa": {
    "title": "Nouns DAO contest",
    "sponsor": "Nouns DAO",
    "slug": "2022-08-nounsdao",
    "date": "2022-09-30",
    "findings": "https://github.com/code-423n4/2022-08-nounsdao-findings/issues",
    "contest": 155
  },
  "html": "<h1 id=\"overview\" style=\"position:relative;\"><a href=\"#overview\" aria-label=\"overview permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Overview</h1>\n<h2 id=\"about-c4\" style=\"position:relative;\"><a href=\"#about-c4\" aria-label=\"about c4 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>About C4</h2>\n<p>Code4rena (C4) is an open organization consisting of security researchers, auditors, developers, and individuals with domain expertise in smart contracts.</p>\n<p>A C4 audit contest is an event in which community participants, referred to as Wardens, review, audit, or analyze smart contract logic in exchange for a bounty provided by sponsoring projects.</p>\n<p>During the audit contest outlined in this document, C4 conducted an analysis of the Nouns DAO smart contract system written in Solidity. The audit contest took place between August 22â€”August 27 2022.</p>\n<h2 id=\"wardens\" style=\"position:relative;\"><a href=\"#wardens\" aria-label=\"wardens permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Wardens</h2>\n<p>168 Wardens contributed reports to the Nouns DAO contest:</p>\n<ol>\n<li>rbserver</li>\n<li><a href=\"https://twitter.com/RespxR\">Respx</a></li>\n<li>Lambda</li>\n<li>KIntern_NA (TrungOre and duc)</li>\n<li><a href=\"https://twitter.com/berndartmueller\">berndartmueller</a></li>\n<li><a href=\"https://twitter.com/csanuragjain\">csanuragjain</a></li>\n<li>cccz</li>\n<li>zzzitron</li>\n<li><a href=\"https://twitter.com/bin2chen\">bin2chen</a></li>\n<li>IEatBabyCarrots</li>\n<li>jayphbee</li>\n<li><a href=\"https://twitter.com/Deivitto\">Deivitto</a></li>\n<li><a href=\"https://twitter.com/0xSmartContract\">0xSmartContract</a></li>\n<li>0xDjango</li>\n<li><a href=\"https://github.com/Aymen1001\">Aymen0909</a></li>\n<li><a href=\"https://twitter.com/0xch301\">Ch_301</a></li>\n<li><a href=\"https://mobile.twitter.com/tomj_bb\">TomJ</a></li>\n<li>IllIllI</li>\n<li><a href=\"https://twitter.com/0xNazgul\">0xNazgul</a></li>\n<li>JohnSmith</li>\n<li>mics</li>\n<li>CodingNameKiki</li>\n<li><a href=\"https://twitter.com/BowTiedDravee\">Dravee</a></li>\n<li><a href=\"https://twitter.com/sm4rtcontr4ct\">JC</a></li>\n<li>0x1f8b</li>\n<li>Rolezn</li>\n<li><a href=\"https://t.me/Road220\">m_Rassska</a></li>\n<li>cRat1st0s</li>\n<li>Bnke0x0</li>\n<li>_141345_</li>\n<li><a href=\"https://twitter.com/gallodasballo\">GalloDaSballo</a></li>\n<li><a href=\"https://www.linkedin.com/in/georgi-nikolaev-georgiev-978253219\">gogo</a></li>\n<li>0xNineDec</li>\n<li><a href=\"https://instagram.com/vanensurya\">Funen</a></li>\n<li><a href=\"https://twitter.com/andyfeili\">oyc_109</a></li>\n<li>robee</li>\n<li>ReyAdmirado</li>\n<li><a href=\"https://t.me/pfahard\">pfapostol</a></li>\n<li>ElKu</li>\n<li><a href=\"https://twitter.com/c3ph_\">c3phas</a></li>\n<li>ajtra</li>\n<li><a href=\"https://twitter.com/Sm4rty_\">Sm4rty</a></li>\n<li>erictee</li>\n<li>0xkatana</li>\n<li>sikorico</li>\n<li>Olivierdem</li>\n<li><a href=\"https://twitter.com/CAA1994\">carlitox477</a></li>\n<li>saian</li>\n<li><a href=\"https://twitter.com/0xhyh\">hyh</a></li>\n<li>brgltd</li>\n<li>bobirichman</li>\n<li><a href=\"https://twitter.com/seynixyz\">seyni</a></li>\n<li>ladboy233</li>\n<li><a href=\"https://twitter.com/father0fBl0cks\">fatherOfBlocks</a></li>\n<li><a href=\"https://twitter.com/prasantgupta52\">prasantgupta52</a></li>\n<li><a href=\"https://twitter.com/ret2basic\">ret2basic</a></li>\n<li><a href=\"https://tom-sol.notion.site/Who-am-I-3b4dc28e77b647eb90794735a94dd38e\">Tomo</a></li>\n<li><a href=\"https://github.com/lyciumlee\">durianSausage</a></li>\n<li>LeoS</li>\n<li>sryysryy</li>\n<li>simon135</li>\n<li>GimelSec (<a href=\"https://twitter.com/rayn731\">rayn</a> and sces60107)</li>\n<li><a href=\"https://twitter.com/catchup22\">catchup</a></li>\n<li>Waze</li>\n<li>delfin454000</li>\n<li><a href=\"https://twitter.com/GuardianAudits\">Guardian</a></li>\n<li>d3e4</li>\n<li>lukris02</li>\n<li>0xbepresent</li>\n<li><a href=\"https://twitter.com/CertoraInc\">CertoraInc</a> (egjlmn1, <a href=\"https://twitter.com/ori_dabush\">OriDabush</a>, ItayG, shakedwinder, and RoiEvenHaim)</li>\n<li><a href=\"https://twitter.com/SolidityDev\">pauliax</a></li>\n<li><a href=\"https://twitter.com/ROHANJH56009256\">Rohan16</a></li>\n<li>rvierdiiev</li>\n<li>0x040</li>\n<li><a href=\"https://www.instagram.com/riyan_rfa/\">rfa</a></li>\n<li>DimitarDimitrov</li>\n<li><a href=\"https://twitter.com/0xruhum\">Ruhum</a></li>\n<li>sach1r0</li>\n<li>djxploit</li>\n<li>RaymondFam</li>\n<li>_Adam</li>\n<li><a href=\"https://chom.dev\">Chom</a></li>\n<li>SooYa</li>\n<li>Bjorn_bug</li>\n<li>R2</li>\n<li>tnevler</li>\n<li><a href=\"https://veranos.io\">mrpathfindr</a></li>\n<li><a href=\"https://twitter.com/natzuu33\">natzuu</a></li>\n<li>DevABDee</li>\n<li>Saintcode_</li>\n<li><a href=\"twitter.com/rokinot\">rokinot</a></li>\n<li>Noah3o6</li>\n<li>wagmi</li>\n<li>auditor0517</li>\n<li><a href=\"https://jeiwan.net\">Jeiwan</a></li>\n<li>xiaoming90</li>\n<li>0bi</li>\n<li>0x1337</li>\n<li><a href=\"https://twitter.com/rajat_beladiya\">rajatbeladiya</a></li>\n<li><a href=\"http://seanseefried.org/blog\">sseefried</a></li>\n<li><a href=\"https://github.com/exd0tpy\">exd0tpy</a></li>\n<li><a href=\"https://twitter.com/0xRajeev\">0xRajeev</a></li>\n<li>dipp</li>\n<li>0xSky</li>\n<li>asutorufos</li>\n<li>Soosh</li>\n<li>yixxas</li>\n<li>tonisives</li>\n<li><a href=\"https://twitter.com/shenwilly_\">shenwilly</a></li>\n<li>p_crypt0</li>\n<li>zkhorse (<a href=\"twitter.com/0xkarmacoma\">karmacoma</a> and horsefacts)</li>\n<li><a href=\"https://www.linkedin.com/in/jansen-moreira/?locale=en_US\">JansenC</a></li>\n<li>0xmatt</li>\n<li>pashov</li>\n<li><a href=\"twitter.com/haruxeETH\">Haruxe</a></li>\n<li>android69</li>\n<li><a href=\"https://twitter.com/8olidity\">8olidity</a></li>\n<li>Trabajo_de_mates (Saintcode_ and tay054)</li>\n<li><a href=\"https://github.com/z3s/\">z3s</a></li>\n<li><a href=\"https://twitter.com/Throt7le\">throttle</a></li>\n<li><a href=\"https://twitter.com/JoeStakey\">joestakey</a></li>\n<li><a href=\"https://github.com/martin-petrov03\">martin</a></li>\n<li>Junnon</li>\n<li>ch0bu</li>\n<li>samruna</li>\n<li>jag</li>\n<li>Shishigami</li>\n<li>Ben</li>\n<li><a href=\"https://twitter.com/0xheynacho\">ignacio</a></li>\n<li><a href=\"https://twitter.com/SAPanahloo\">SaharAP</a></li>\n<li><a href=\"https://twitter.com/BipinSah745\">BipinSah</a></li>\n<li>bulej93</li>\n<li>lucacez</li>\n<li>exolorkistis</li>\n<li><a href=\"https://zishansami102.github.io/\">zishansami</a></li>\n<li><a href=\"https://twitter.com/meidhiwirara\">Tomio</a></li>\n<li><a href=\"https://twitter.com/fitraldys\">Fitraldys</a></li>\n<li><a href=\"https://twitter.com/mehmeddukov\">medikko</a></li>\n<li>EthLedger</li>\n<li><a href=\"https://github.com/Shr1ftyy\">shr1ftyy</a></li>\n<li>rotcivegaf</li>\n<li>ak1</li>\n<li>karanctf</li>\n<li>shark</li>\n<li>0xc0ffEE</li>\n<li>Amithuddar</li>\n<li>SerMyVillage</li>\n<li>2997ms</li>\n<li>newfork01</li>\n<li>RoiEvenHaim</li>\n<li>Polandia94</li>\n<li>tay054</li>\n<li>Yiko</li>\n<li>ACai</li>\n<li>francoHacker</li>\n<li><a href=\"https://twitter.com/randyyramadhan\">Randyyy</a></li>\n<li>Diraco</li>\n<li><a href=\"https://twitter.com/AdonaiR6\">IgnacioB</a></li>\n<li>peritoflores</li>\n<li><a href=\"https://twitter.com/a12jmx\">a12jmx</a></li>\n</ol>\n<p>This contest was judged by <a href=\"https://twitter.com/gzeon\">gzeon</a>.</p>\n<p>Final report assembled by <a href=\"https://twitter.com/itsmetechjay\">itsmetechjay</a>.</p>\n<h1 id=\"summary\" style=\"position:relative;\"><a href=\"#summary\" aria-label=\"summary permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Summary</h1>\n<p>The C4 analysis yielded an aggregated total of 4 unique vulnerabilities. Of these vulnerabilities, 1 received a risk rating in the category of HIGH severity and 3 received a risk rating in the category of MEDIUM severity.</p>\n<p>Additionally, C4 analysis included 116 reports detailing issues with a risk rating of LOW severity or non-critical. There were also 126 reports recommending gas optimizations.</p>\n<p>All of the issues presented here are linked back to their original finding.</p>\n<h1 id=\"scope\" style=\"position:relative;\"><a href=\"#scope\" aria-label=\"scope permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scope</h1>\n<p>The code under review can be found within the <a href=\"https://github.com/code-423n4/2022-08-nounsdao\">C4 Nouns DAO contest repository</a>, and is composed of 6 smart contracts written in the Solidity programming language and includes 2,412 lines of Solidity code.</p>\n<h1 id=\"severity-criteria\" style=\"position:relative;\"><a href=\"#severity-criteria\" aria-label=\"severity criteria permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Severity Criteria</h1>\n<p>C4 assesses the severity of disclosed vulnerabilities according to a methodology based on <a href=\"https://owasp.org/www-community/OWASP_Risk_Rating_Methodology\">OWASP standards</a>.</p>\n<p>Vulnerabilities are divided into three primary risk categories: high, medium, and low/non-critical.</p>\n<p>High-level considerations for vulnerabilities span the following key areas when conducting assessments:</p>\n<ul>\n<li>Malicious Input Handling</li>\n<li>Escalation of privileges</li>\n<li>Arithmetic</li>\n<li>Gas use</li>\n</ul>\n<p>Further information regarding the severity criteria referenced throughout the submission review process, please refer to the documentation provided on <a href=\"https://code4rena.com\">the C4 website</a>.</p>\n<h1 id=\"high-risk-findings-1\" style=\"position:relative;\"><a href=\"#high-risk-findings-1\" aria-label=\"high risk findings 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>High Risk Findings (1)</h1>\n<h2 id=\"h-01-erc721checkpointable-delegatebysig-allows-the-user-to-vote-to-address-0-which-causes-the-user-to-permanently-lose-his-vote-and-cannot-transfer-his-nft\" style=\"position:relative;\"><a href=\"#h-01-erc721checkpointable-delegatebysig-allows-the-user-to-vote-to-address-0-which-causes-the-user-to-permanently-lose-his-vote-and-cannot-transfer-his-nft\" aria-label=\"h 01 erc721checkpointable delegatebysig allows the user to vote to address 0 which causes the user to permanently lose his vote and cannot transfer his nft permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/157\">[H-01] ERC721Checkpointable: delegateBySig allows the user to vote to address 0, which causes the user to permanently lose his vote and cannot transfer his NFT.</a></h2>\n<p><em>Submitted by cccz, also found by berndartmueller, bin2chen, csanuragjain, IEatBabyCarrots, jayphbee, KIntern_NA, Lambda, and zzzitron</em></p>\n<p>In the ERC721Checkpointable contract, when the user votes with the delegate function, the delegatee will not be address 0.</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">    function delegate(address delegatee) public {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        if (delegatee == address(0)) delegatee = msg.sender;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        return _delegate(msg.sender, delegatee);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    }</span></span></code></pre>\n<p>However, there is no such restriction in the delegateBySig function, which allows the user to vote to address 0.</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">    function delegateBySig(</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        address delegatee,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        uint256 nonce,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        uint256 expiry,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        uint8 v,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        bytes32 r,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        bytes32 s</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    ) public {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        bytes32 domainSeparator = keccak256(</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">            abi.encode(DOMAIN_TYPEHASH, keccak256(bytes(name())), getChainId(), address(this))</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        );</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        bytes32 structHash = keccak256(abi.encode(DELEGATION_TYPEHASH, delegatee, nonce, expiry));</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        bytes32 digest = keccak256(abi.encodePacked(&#39;\\x19\\x01&#39;, domainSeparator, structHash));</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        address signatory = ecrecover(digest, v, r, s);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        require(signatory != address(0), &#39;ERC721Checkpointable::delegateBySig: invalid signature&#39;);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        require(nonce == nonces[signatory]++, &#39;ERC721Checkpointable::delegateBySig: invalid nonce&#39;);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        require(block.timestamp &lt;= expiry, &#39;ERC721Checkpointable::delegateBySig: signature expired&#39;);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        return _delegate(signatory, delegatee);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    }</span></span></code></pre>\n<p>If user A votes to address 0 in the delegateBySig function, _delegates[A] will be address 0, but the delegates function will return the address of user A and getCurrentVotes(A) will return 0.</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">    function _delegate(address delegator, address delegatee) internal {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        /// @notice differs from `_delegate()` in `Comp.sol` to use `delegates` override method to simulate auto-delegation</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        address currentDelegate = delegates(delegator);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        _delegates[delegator] = delegatee;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    function delegates(address delegator) public view returns (address) {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        address current = _delegates[delegator];</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        return current == address(0) ? delegator : current;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    }</span></span></code></pre>\n<p>Later, if user A votes to another address or transfers NFT, the _moveDelegates function will fail due to overflow, which makes user A lose votes forever and cannot transfer NFT.</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">    function _moveDelegates(</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        address srcRep,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        address dstRep,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        uint96 amount</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    ) internal {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        if (srcRep != dstRep &amp;&amp; amount &gt; 0) {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">            if (srcRep != address(0)) {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">                uint32 srcRepNum = numCheckpoints[srcRep];</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">                uint96 srcRepOld = srcRepNum &gt; 0 ? checkpoints[srcRep][srcRepNum - 1].votes : 0;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">                uint96 srcRepNew = sub96(srcRepOld, amount, &#39;ERC721Checkpointable::_moveDelegates: amount underflows&#39;); // auditor : overflow here</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">                _writeCheckpoint(srcRep, srcRepNum, srcRepOld, srcRepNew);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">            }</span></span></code></pre>\n<p>On the other hand, since the burn function also fails, this can also be used to prevent the NFT from being burned by the minter</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">    function burn(uint256 nounId) public override onlyMinter {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        _burn(nounId);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        emit NounBurned(nounId);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    }</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    function _burn(uint256 tokenId) internal virtual {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        address owner = ERC721.ownerOf(tokenId);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        _beforeTokenTransfer(owner, address(0), tokenId);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    function _beforeTokenTransfer(</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        address from,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        address to,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        uint256 tokenId</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    ) internal override {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        super._beforeTokenTransfer(from, to, tokenId);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        /// @notice Differs from `_transferTokens()` to use `delegates` override method to simulate auto-delegation</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        _moveDelegates(delegates(from), delegates(to), 1);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    }</span></span></code></pre>\n<h3 id=\"proof-of-concept\" style=\"position:relative;\"><a href=\"#proof-of-concept\" aria-label=\"proof of concept permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Proof of Concept</h3>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L126-L144\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L126-L144</a></p>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L88-L91\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L88-L91</a></p>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L97-L106\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L97-L106</a></p>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L197-L208\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L197-L208</a></p>\n<h3 id=\"recommended-mitigation-steps\" style=\"position:relative;\"><a href=\"#recommended-mitigation-steps\" aria-label=\"recommended mitigation steps permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recommended Mitigation Steps</h3>\n<p>Consider requiring in the <code>delegateBySig</code> function that delegatee cannot be address 0.</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"diff\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    function delegateBySig(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        address delegatee,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        uint256 nonce,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        uint256 expiry,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        uint8 v,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        bytes32 r,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        bytes32 s</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    ) public {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+ require(delegatee != address(0));</span></span></span></code></pre>\n<p><strong><a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/157#issuecomment-1232007061\">eladmallel (Nouns DAO) confirmed and commented</a>:</strong></p>\n<blockquote>\n<p>We agree this is a bug that has existed since Nouns launched, and plan to fix the bug with the suggested requirement that delegatee should not be address(0).</p>\n<p>Worth noting that this fix will not have a positive effect on Nouns, as the token is already deployed and not upgradable. </p>\n</blockquote>\n<hr>\n<h1 id=\"medium-risk-findings-3\" style=\"position:relative;\"><a href=\"#medium-risk-findings-3\" aria-label=\"medium risk findings 3 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Medium Risk Findings (3)</h1>\n<h2 id=\"m-01-voters-can-burn-large-amounts-of-ether-by-submitting-votes-with-long-reason-strings\" style=\"position:relative;\"><a href=\"#m-01-voters-can-burn-large-amounts-of-ether-by-submitting-votes-with-long-reason-strings\" aria-label=\"m 01 voters can burn large amounts of ether by submitting votes with long reason strings permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/174\">[M-01] Voters can burn large amounts of Ether by submitting votes with long reason strings</a></h2>\n<p><em>Submitted by Respx</em></p>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L518-L524\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L518-L524</a></p>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L533-L544\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L533-L544</a></p>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L98\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L98</a></p>\n<h3 id=\"vulnerability-details\" style=\"position:relative;\"><a href=\"#vulnerability-details\" aria-label=\"vulnerability details permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Vulnerability Details</h3>\n<p>Voters can burn large amounts of Ether by submitting votes with long reason strings</p>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L518-L524\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L518-L524</a></p>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L533-L544\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L533-L544</a></p>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L98\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L98</a></p>\n<p>The only limits to how long a string argument to a function call can be is the block gas limit of the EVM, currently 30 million. It is therefore possible for a user to call <code>NounsDAOLogicV2.castRefundableVoteWithReason()</code> with a very, very long <code>reason</code> string. <code>castRefundableVoteInternal()</code> emits an event that includes <code>reason</code> on line 540, which is within the region of code covered by gas refunds (gas refunds are measured from <code>startGas</code> on line 538). Because of this, gas refunds will include the gas price of emitting this event, which could potentially be very large.</p>\n<h3 id=\"impact\" style=\"position:relative;\"><a href=\"#impact\" aria-label=\"impact permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Impact</h3>\n<p>This issue is partially mitigated by the fact that the voter will still bear the cost of the massive calldata usage. <code>NounsDAOLogicV2</code> covers this with a fixed value of <code>REFUND_BASE_GAS</code> (36000), but the real transaction overhead is far larger when submitting a <code>reason</code> string that is many thousands of characters in length. Therefore, the voter ends up losing roughly as much as is drained from the <code>NounsDAOLogicV2</code> contract by the refund.\nNonetheless, I still think this is a valid high funding as the protocol will not want to rely purely on this economic protection. Some risk scenarios:</p>\n<ol>\n<li>It is quite possible that calldata prices could decrease in future, perhaps as part of catering for rollups. This could make the attack suddenly far more viable.</li>\n<li>A voter might have some motive to want to emit some arbitrary text as an Ethereum event, and simply exploit this system to do so.</li>\n<li>A voter might want to maliciously drain the Ether, perhaps to damage the protocolâ€™s reputation.</li>\n<li>As in 3, this could be achieved by emptying out the last funds in ``NounsDAOLogicV2` and so denying many other voters their voting refunds.</li>\n</ol>\n<h3 id=\"tools-used\" style=\"position:relative;\"><a href=\"#tools-used\" aria-label=\"tools used permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tools Used</h3>\n<p>Hardhat testing</p>\n<h3 id=\"recommended-mitigation-steps-1\" style=\"position:relative;\"><a href=\"#recommended-mitigation-steps-1\" aria-label=\"recommended mitigation steps 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recommended Mitigation Steps</h3>\n<p>2 alternative ideas:</p>\n<ol>\n<li>Move the <code>emit VoteCast</code> outside of the gas calculation region of the code and increase <code>REFUND_BASE_GAS</code> to cover an event with a reasonable length of string.</li>\n<li>Change the type of <code>reason</code> to <code>bytes</code> and add a check to its length in <code>castRefundableVoteWithReason()</code>, reverting if it is too long.</li>\n</ol>\n<h3 id=\"proof-of-concept-1\" style=\"position:relative;\"><a href=\"#proof-of-concept-1\" aria-label=\"proof of concept 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Proof of Concept</h3>\n<p>The single vote in this test burns around 0.25 Ether from the <code>NounsDAOLogicV2</code> contract.\nThis test runs slowly and is assuming a base fee of 500 gwei. Obviously if the base fee were higher, the gas burnt would also be higher.\nThe numbers are printed out with a rather messy <code>console.log()</code> in the middle of the test output. Apologies for the bad presentation, but on the bright side you can adjust the numbers and see different results.</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"diff\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">diff --git a/hardhat.config.ts b/hardhat.config.ts</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">index 6d469b0..dc51148 100644</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">--- a/hardhat.config.ts</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">+++ b/hardhat.config.ts</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@@ -34,7 +34,7 @@ const config: HardhatUserConfig = {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">         : [process.env.WALLET_PRIVATE_KEY!].filter(Boolean),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">     },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">     hardhat: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">-      initialBaseFeePerGas: 0,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+      initialBaseFeePerGas: 500_000_000_000,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">     },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">   },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">   etherscan: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@@ -50,12 +50,12 @@ const config: HardhatUserConfig = {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">   gasReporter: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">     enabled: !process.env.CI,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">     currency: &#39;USD&#39;,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">-    gasPrice: 50,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+    gasPrice: 500,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">     src: &#39;contracts&#39;,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">     coinmarketcap: &#39;7643dfc7-a58f-46af-8314-2db32bdd18ba&#39;,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">   },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">   mocha: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">-    timeout: 60_000,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+    timeout: 600_000,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">   },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> };</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> export default config;</span></span></span></code></pre>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"diff\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">diff --git a/test/governance/NounsDAO/V2/voteRefund.test.ts b/test/governance/NounsDAO/V2/voteRefundPOC.test.ts</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">index d34ff4b..4c268a3 100644</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">--- a/test/governance/NounsDAO/V2/voteRefund.test.ts</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">+++ b/test/governance/NounsDAO/V2/voteRefundPOC.test.ts</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@@ -162,6 +162,30 @@ describe(&#39;Vote Refund&#39;, () =&gt; {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">   });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">   describe(&#39;castRefundableVoteWithReason&#39;, () =&gt; {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+    it(&quot;accepts excessively long reason strings&quot;, async () =&gt; {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+      await fundGov();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+      const balanceBefore = await user.getBalance();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+      const govBalanceBefore = await ethers.provider.getBalance(gov.address);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+      const tx = await gov</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+        .connect(user)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+        .castRefundableVoteWithReason(1, 1, junkString(50_000), {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+          maxPriorityFeePerGas: MAX_PRIORITY_FEE_CAP,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+          gasLimit: 24000000,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+        });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+      const r = await tx.wait();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+      const balanceDiff = balanceBefore.sub(await user.getBalance());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+      const govBalanceDiff = govBalanceBefore.sub(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+        await ethers.provider.getBalance(gov.address)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+      );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+      const govBalanceAfter = await ethers.provider.getBalance(gov.address);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+      console.log(&quot;USER BALANCE DIFF:&quot;, ethers.utils.formatEther(balanceDiff));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+      console.log(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+        &quot;GOV BALANCE DIFF:&quot;,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+        ethers.utils.formatEther(govBalanceDiff)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+      );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+      console.log(&quot;TX COST:&quot;, ethers.utils.formatEther(await txCostInEth(r)));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+    });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">     it(&#39;refunds users with votes&#39;, async () =&gt; {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">       await fundGov();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">       const balanceBefore = await user.getBalance();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@@ -284,6 +308,15 @@ describe(&#39;Vote Refund&#39;, () =&gt; {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">     expect(refundEvent!.args!.refundAmount).to.be.closeTo(expectedCost, REFUND_ERROR_MARGIN);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">   }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+  function junkString(iterations: number = 100) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+    var x = &quot;Ab Cd Ef Gh Ij &quot;;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+    const y = &quot;Ab Cd Ef Gh Ij&quot;;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+    for (var i = 0; i &lt; iterations; i++) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+      x += y;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+    return x;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">+</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">   async function submitProposal(u: SignerWithAddress) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">     await gov</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">       .connect(u)</span></span></span></code></pre>\n<p><strong><a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/174#issuecomment-1232002119\">eladmallel (Nouns DAO) disagreed with severity and commented</a>:</strong></p>\n<blockquote>\n<p>We acknowledge that a Noun holder can push the refund amount up with a long reason string. We think this is low risk since again this is capped by the number of proposals one can vote on, furthermore buying an expensive Noun just to perform this no-profit attack seems unlikely at the moment.</p>\n<p>Having said that, we do plan to mitigate this concern by adding a cap on the <code>gasUsed</code> variable used in the refund calculation.</p>\n</blockquote>\n<p><strong><a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/174\">gzeoneth (judge) decreased severity to Medium</a></strong></p>\n<hr>\n<h2 id=\"m-02-user-a-cannot-cancel-user-bs-proposal-when-user-bs-prior-number-of-votes-at-relevant-block-is-same-as-proposal-threshold-which-contradicts-the-fact-that-user-b-actually-cannot-create-the-proposal-when-the-prior-number-of-votes-is-same-as-proposal-threshold\" style=\"position:relative;\"><a href=\"#m-02-user-a-cannot-cancel-user-bs-proposal-when-user-bs-prior-number-of-votes-at-relevant-block-is-same-as-proposal-threshold-which-contradicts-the-fact-that-user-b-actually-cannot-create-the-proposal-when-the-prior-number-of-votes-is-same-as-proposal-threshold\" aria-label=\"m 02 user a cannot cancel user bs proposal when user bs prior number of votes at relevant block is same as proposal threshold which contradicts the fact that user b actually cannot create the proposal when the prior number of votes is same as proposal threshold permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/255\">[M-02] User A cannot cancel User Bâ€™s proposal when User Bâ€™s prior number of votes at relevant block is same as proposal threshold, which contradicts the fact that User B actually cannot create the proposal when the prior number of votes is same as proposal threshold</a></h2>\n<p><em>Submitted by rbserver</em></p>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/main/contracts/governance/NounsDAOLogicV2.sol#L184-L279\">https://github.com/code-423n4/2022-08-nounsdao/blob/main/contracts/governance/NounsDAOLogicV2.sol#L184-L279</a></p>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/main/contracts/governance/NounsDAOLogicV2.sol#L346-L368\">https://github.com/code-423n4/2022-08-nounsdao/blob/main/contracts/governance/NounsDAOLogicV2.sol#L346-L368</a></p>\n<h3 id=\"impact-1\" style=\"position:relative;\"><a href=\"#impact-1\" aria-label=\"impact 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Impact</h3>\n<p>When User B calls the following <code>propose</code> function for creating a proposal, it checks that User Bâ€™s prior number of votes at the relevant block is larger than the proposal threshold through executing <code>nouns.getPriorVotes(msg.sender, block.number - 1) > temp.proposalThreshold</code>. This means that User B cannot create the proposal when the prior number of votes and the proposal threshold are the same.</p>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/main/contracts/governance/NounsDAOLogicV2.sol#L184-L279\">https://github.com/code-423n4/2022-08-nounsdao/blob/main/contracts/governance/NounsDAOLogicV2.sol#L184-L279</a></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">propose</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">address</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk12\">targets</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk12\">values</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">string</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk12\">signatures</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">bytes</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk12\">calldatas</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">string</span><span class=\"mtk1\"> </span><span class=\"mtk12\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk12\">description</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    ) </span><span class=\"mtk11\">public</span><span class=\"mtk1\"> </span><span class=\"mtk11\">returns</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">ProposalTemp</span><span class=\"mtk1\"> </span><span class=\"mtk12\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk12\">temp</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">temp</span><span class=\"mtk1\">.</span><span class=\"mtk12\">totalSupply</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">nouns</span><span class=\"mtk1\">.</span><span class=\"mtk11\">totalSupply</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">temp</span><span class=\"mtk1\">.</span><span class=\"mtk12\">proposalThreshold</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">bps2Uint</span><span class=\"mtk1\">(</span><span class=\"mtk12\">proposalThresholdBPS</span><span class=\"mtk1\">, </span><span class=\"mtk12\">temp</span><span class=\"mtk1\">.</span><span class=\"mtk12\">totalSupply</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">nouns</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getPriorVotes</span><span class=\"mtk1\">(</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">, </span><span class=\"mtk12\">block</span><span class=\"mtk1\">.</span><span class=\"mtk12\">number</span><span class=\"mtk1\"> - </span><span class=\"mtk7\">1</span><span class=\"mtk1\">) &gt; </span><span class=\"mtk12\">temp</span><span class=\"mtk1\">.</span><span class=\"mtk12\">proposalThreshold</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk8\">&#39;NounsDAO::propose: proposer votes below proposal threshold&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">targets</span><span class=\"mtk1\">.</span><span class=\"mtk12\">length</span><span class=\"mtk1\"> == </span><span class=\"mtk12\">values</span><span class=\"mtk1\">.</span><span class=\"mtk12\">length</span><span class=\"mtk1\"> &amp;&amp;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk12\">targets</span><span class=\"mtk1\">.</span><span class=\"mtk12\">length</span><span class=\"mtk1\"> == </span><span class=\"mtk12\">signatures</span><span class=\"mtk1\">.</span><span class=\"mtk12\">length</span><span class=\"mtk1\"> &amp;&amp;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk12\">targets</span><span class=\"mtk1\">.</span><span class=\"mtk12\">length</span><span class=\"mtk1\"> == </span><span class=\"mtk12\">calldatas</span><span class=\"mtk1\">.</span><span class=\"mtk12\">length</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk8\">&#39;NounsDAO::propose: proposal function information arity mismatch&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">targets</span><span class=\"mtk1\">.</span><span class=\"mtk12\">length</span><span class=\"mtk1\"> != </span><span class=\"mtk7\">0</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;NounsDAO::propose: must provide actions&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">targets</span><span class=\"mtk1\">.</span><span class=\"mtk12\">length</span><span class=\"mtk1\"> &lt;= </span><span class=\"mtk12\">proposalMaxOperations</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;NounsDAO::propose: too many actions&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">temp</span><span class=\"mtk1\">.</span><span class=\"mtk12\">latestProposalId</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">latestProposalIds</span><span class=\"mtk1\">[</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">temp</span><span class=\"mtk1\">.</span><span class=\"mtk12\">latestProposalId</span><span class=\"mtk1\"> != </span><span class=\"mtk7\">0</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">ProposalState</span><span class=\"mtk1\"> </span><span class=\"mtk12\">proposersLatestProposalState</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">state</span><span class=\"mtk1\">(</span><span class=\"mtk12\">temp</span><span class=\"mtk1\">.</span><span class=\"mtk12\">latestProposalId</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk12\">proposersLatestProposalState</span><span class=\"mtk1\"> != </span><span class=\"mtk12\">ProposalState</span><span class=\"mtk1\">.</span><span class=\"mtk12\">Active</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk8\">&#39;NounsDAO::propose: one live proposal per proposer, found an already active proposal&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk12\">proposersLatestProposalState</span><span class=\"mtk1\"> != </span><span class=\"mtk12\">ProposalState</span><span class=\"mtk1\">.</span><span class=\"mtk12\">Pending</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk8\">&#39;NounsDAO::propose: one live proposal per proposer, found an already pending proposal&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">temp</span><span class=\"mtk1\">.</span><span class=\"mtk12\">startBlock</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">block</span><span class=\"mtk1\">.</span><span class=\"mtk12\">number</span><span class=\"mtk1\"> + </span><span class=\"mtk12\">votingDelay</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">temp</span><span class=\"mtk1\">.</span><span class=\"mtk12\">endBlock</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">temp</span><span class=\"mtk1\">.</span><span class=\"mtk12\">startBlock</span><span class=\"mtk1\"> + </span><span class=\"mtk12\">votingPeriod</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">proposalCount</span><span class=\"mtk1\">++;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">Proposal</span><span class=\"mtk1\"> </span><span class=\"mtk12\">storage</span><span class=\"mtk1\"> </span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">_proposals</span><span class=\"mtk1\">[</span><span class=\"mtk12\">proposalCount</span><span class=\"mtk1\">];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">id</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">proposalCount</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">proposer</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">proposalThreshold</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">temp</span><span class=\"mtk1\">.</span><span class=\"mtk12\">proposalThreshold</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">eta</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">0</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">targets</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">targets</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">values</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">values</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">signatures</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">signatures</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">calldatas</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">calldatas</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">startBlock</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">temp</span><span class=\"mtk1\">.</span><span class=\"mtk12\">startBlock</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">endBlock</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">temp</span><span class=\"mtk1\">.</span><span class=\"mtk12\">endBlock</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">forVotes</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">0</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">againstVotes</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">0</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">abstainVotes</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">0</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">canceled</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">false</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">executed</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">false</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">vetoed</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">false</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">totalSupply</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">temp</span><span class=\"mtk1\">.</span><span class=\"mtk12\">totalSupply</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">creationBlock</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">block</span><span class=\"mtk1\">.</span><span class=\"mtk12\">number</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">latestProposalIds</span><span class=\"mtk1\">[</span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">proposer</span><span class=\"mtk1\">] = </span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">id</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">/// @notice Maintains backwards compatibility with GovernorBravo events</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">emit</span><span class=\"mtk1\"> </span><span class=\"mtk11\">ProposalCreated</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">id</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">targets</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">values</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">signatures</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">calldatas</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">startBlock</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">endBlock</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">description</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">/// @notice Updated event with `proposalThreshold` and `minQuorumVotes`</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">/// @notice `minQuorumVotes` is always zero since V2 introduces dynamic quorum with checkpoints</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">emit</span><span class=\"mtk1\"> </span><span class=\"mtk11\">ProposalCreatedWithRequirements</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">id</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">targets</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">values</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">signatures</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">calldatas</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">startBlock</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">endBlock</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">proposalThreshold</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk11\">minQuorumVotes</span><span class=\"mtk1\">(),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">description</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk12\">newProposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">id</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span></code></pre>\n<p>After User Bâ€™s proposal is created, User A can call the following <code>cancel</code> function to cancel it. When calling <code>cancel</code>, it checks that User Bâ€™s prior number of votes at the relevant block is less than the proposal threshold through executing <code>nouns.getPriorVotes(proposal.proposer, block.number - 1) &#x3C; proposal.proposalThreshold</code>. When User Bâ€™s prior number of votes and the proposal threshold are the same, User A cannot cancel this proposal of User B. However, this contradicts the fact User B actually cannot create this proposal when the same condition holds true. In other words, if User B cannot create this proposal when the prior number of votes and the proposal threshold are the same, User A should be able to cancel User Bâ€™s proposal under the same condition but it is not true. The functionality for canceling User Bâ€™s proposal in this situation becomes unavailable for User A.</p>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/main/contracts/governance/NounsDAOLogicV2.sol#L346-L368\">https://github.com/code-423n4/2022-08-nounsdao/blob/main/contracts/governance/NounsDAOLogicV2.sol#L346-L368</a></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">cancel</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">proposalId</span><span class=\"mtk1\">) </span><span class=\"mtk11\">external</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk11\">state</span><span class=\"mtk1\">(</span><span class=\"mtk12\">proposalId</span><span class=\"mtk1\">) != </span><span class=\"mtk12\">ProposalState</span><span class=\"mtk1\">.</span><span class=\"mtk12\">Executed</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;NounsDAO::cancel: cannot cancel executed proposal&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">Proposal</span><span class=\"mtk1\"> </span><span class=\"mtk12\">storage</span><span class=\"mtk1\"> </span><span class=\"mtk12\">proposal</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">_proposals</span><span class=\"mtk1\">[</span><span class=\"mtk12\">proposalId</span><span class=\"mtk1\">];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\"> == </span><span class=\"mtk12\">proposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">proposer</span><span class=\"mtk1\"> ||</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk12\">nouns</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getPriorVotes</span><span class=\"mtk1\">(</span><span class=\"mtk12\">proposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">proposer</span><span class=\"mtk1\">, </span><span class=\"mtk12\">block</span><span class=\"mtk1\">.</span><span class=\"mtk12\">number</span><span class=\"mtk1\"> - </span><span class=\"mtk7\">1</span><span class=\"mtk1\">) &lt; </span><span class=\"mtk12\">proposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">proposalThreshold</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk8\">&#39;NounsDAO::cancel: proposer above threshold&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">proposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">canceled</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">true</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">i</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">0</span><span class=\"mtk1\">; </span><span class=\"mtk12\">i</span><span class=\"mtk1\"> &lt; </span><span class=\"mtk12\">proposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">targets</span><span class=\"mtk1\">.</span><span class=\"mtk12\">length</span><span class=\"mtk1\">; </span><span class=\"mtk12\">i</span><span class=\"mtk1\">++) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">timelock</span><span class=\"mtk1\">.</span><span class=\"mtk11\">cancelTransaction</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk12\">proposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">targets</span><span class=\"mtk1\">[</span><span class=\"mtk12\">i</span><span class=\"mtk1\">],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk12\">proposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">values</span><span class=\"mtk1\">[</span><span class=\"mtk12\">i</span><span class=\"mtk1\">],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk12\">proposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">signatures</span><span class=\"mtk1\">[</span><span class=\"mtk12\">i</span><span class=\"mtk1\">],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk12\">proposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">calldatas</span><span class=\"mtk1\">[</span><span class=\"mtk12\">i</span><span class=\"mtk1\">],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk12\">proposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">eta</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">emit</span><span class=\"mtk1\"> </span><span class=\"mtk11\">ProposalCanceled</span><span class=\"mtk1\">(</span><span class=\"mtk12\">proposalId</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span></code></pre>\n<h3 id=\"proof-of-concept-2\" style=\"position:relative;\"><a href=\"#proof-of-concept-2\" aria-label=\"proof of concept 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Proof of Concept</h3>\n<p>Please append the following test in the <code>NounsDAOV2#inflationHandling</code> <code>describe</code> block in <code>test\\governance\\NounsDAO\\V2\\inflationHandling.test.ts</code>. This test should pass to demonstrate the described scenario.</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"typescript\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">it</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;User A cannot cancel User B&#39;s proposal when User B&#39;s prior number of votes at relevant block is same as proposal threshold, which contradicts the fact that User B actually cannot create the proposal when the prior number of votes is same as proposal threshold&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">async</span><span class=\"mtk1\"> () </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// account1 has 3 tokens at the beginning</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// account1 gains 2 more to own 5 tokens in total</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk12\">token</span><span class=\"mtk1\">.</span><span class=\"mtk11\">transferFrom</span><span class=\"mtk1\">(</span><span class=\"mtk12\">deployer</span><span class=\"mtk1\">.</span><span class=\"mtk12\">address</span><span class=\"mtk1\">, </span><span class=\"mtk12\">account1</span><span class=\"mtk1\">.</span><span class=\"mtk12\">address</span><span class=\"mtk1\">, </span><span class=\"mtk7\">11</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk12\">token</span><span class=\"mtk1\">.</span><span class=\"mtk11\">transferFrom</span><span class=\"mtk1\">(</span><span class=\"mtk12\">deployer</span><span class=\"mtk1\">.</span><span class=\"mtk12\">address</span><span class=\"mtk1\">, </span><span class=\"mtk12\">account1</span><span class=\"mtk1\">.</span><span class=\"mtk12\">address</span><span class=\"mtk1\">, </span><span class=\"mtk7\">12</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk11\">mineBlock</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// account1 cannot create a proposal when owning 5 tokens in total</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk11\">expect</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">gov</span><span class=\"mtk1\">.</span><span class=\"mtk11\">connect</span><span class=\"mtk1\">(</span><span class=\"mtk12\">account1</span><span class=\"mtk1\">).</span><span class=\"mtk11\">propose</span><span class=\"mtk1\">(</span><span class=\"mtk12\">targets</span><span class=\"mtk1\">, </span><span class=\"mtk12\">values</span><span class=\"mtk1\">, </span><span class=\"mtk12\">signatures</span><span class=\"mtk1\">, </span><span class=\"mtk12\">callDatas</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;do nothing&#39;</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    ).</span><span class=\"mtk12\">to</span><span class=\"mtk1\">.</span><span class=\"mtk12\">be</span><span class=\"mtk1\">.</span><span class=\"mtk11\">revertedWith</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;NounsDAO::propose: proposer votes below proposal threshold&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// account1 gains 1 more to own 6 tokens in total</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk12\">token</span><span class=\"mtk1\">.</span><span class=\"mtk11\">transferFrom</span><span class=\"mtk1\">(</span><span class=\"mtk12\">deployer</span><span class=\"mtk1\">.</span><span class=\"mtk12\">address</span><span class=\"mtk1\">, </span><span class=\"mtk12\">account1</span><span class=\"mtk1\">.</span><span class=\"mtk12\">address</span><span class=\"mtk1\">, </span><span class=\"mtk7\">13</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk11\">mineBlock</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// account1 can create a proposal when owning 6 tokens in total</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk12\">gov</span><span class=\"mtk1\">.</span><span class=\"mtk11\">connect</span><span class=\"mtk1\">(</span><span class=\"mtk12\">account1</span><span class=\"mtk1\">).</span><span class=\"mtk11\">propose</span><span class=\"mtk1\">(</span><span class=\"mtk12\">targets</span><span class=\"mtk1\">, </span><span class=\"mtk12\">values</span><span class=\"mtk1\">, </span><span class=\"mtk12\">signatures</span><span class=\"mtk1\">, </span><span class=\"mtk12\">callDatas</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;do nothing&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">proposalId</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk12\">gov</span><span class=\"mtk1\">.</span><span class=\"mtk11\">latestProposalIds</span><span class=\"mtk1\">(</span><span class=\"mtk12\">account1</span><span class=\"mtk1\">.</span><span class=\"mtk12\">address</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">expect</span><span class=\"mtk1\">(</span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk12\">gov</span><span class=\"mtk1\">.</span><span class=\"mtk11\">state</span><span class=\"mtk1\">(</span><span class=\"mtk12\">proposalId</span><span class=\"mtk1\">)).</span><span class=\"mtk12\">to</span><span class=\"mtk1\">.</span><span class=\"mtk11\">equal</span><span class=\"mtk1\">(</span><span class=\"mtk7\">0</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// other user cannot cancel account1&#39;s proposal at this moment</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk11\">expect</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">gov</span><span class=\"mtk1\">.</span><span class=\"mtk11\">cancel</span><span class=\"mtk1\">(</span><span class=\"mtk12\">proposalId</span><span class=\"mtk1\">, {</span><span class=\"mtk12\">gasLimit:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">1e6</span><span class=\"mtk1\">})</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    ).</span><span class=\"mtk12\">to</span><span class=\"mtk1\">.</span><span class=\"mtk12\">be</span><span class=\"mtk1\">.</span><span class=\"mtk11\">revertedWith</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;NounsDAO::cancel: proposer above threshold&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// account1 removes 1 token to own 5 tokens in total</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk12\">token</span><span class=\"mtk1\">.</span><span class=\"mtk11\">connect</span><span class=\"mtk1\">(</span><span class=\"mtk12\">account1</span><span class=\"mtk1\">).</span><span class=\"mtk11\">transferFrom</span><span class=\"mtk1\">(</span><span class=\"mtk12\">account1</span><span class=\"mtk1\">.</span><span class=\"mtk12\">address</span><span class=\"mtk1\">, </span><span class=\"mtk12\">deployer</span><span class=\"mtk1\">.</span><span class=\"mtk12\">address</span><span class=\"mtk1\">, </span><span class=\"mtk7\">13</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk11\">mineBlock</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// other user still cannot cancel account1&#39;s proposal when account1 owns 5 tokens in total</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// this contradicts the fact that account1 cannot create a proposal when owning 5 tokens in total</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk11\">expect</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">gov</span><span class=\"mtk1\">.</span><span class=\"mtk11\">cancel</span><span class=\"mtk1\">(</span><span class=\"mtk12\">proposalId</span><span class=\"mtk1\">, {</span><span class=\"mtk12\">gasLimit:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">1e6</span><span class=\"mtk1\">})</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    ).</span><span class=\"mtk12\">to</span><span class=\"mtk1\">.</span><span class=\"mtk12\">be</span><span class=\"mtk1\">.</span><span class=\"mtk11\">revertedWith</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;NounsDAO::cancel: proposer above threshold&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// account1 removes another token to own 4 tokens in total</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk12\">token</span><span class=\"mtk1\">.</span><span class=\"mtk11\">connect</span><span class=\"mtk1\">(</span><span class=\"mtk12\">account1</span><span class=\"mtk1\">).</span><span class=\"mtk11\">transferFrom</span><span class=\"mtk1\">(</span><span class=\"mtk12\">account1</span><span class=\"mtk1\">.</span><span class=\"mtk12\">address</span><span class=\"mtk1\">, </span><span class=\"mtk12\">deployer</span><span class=\"mtk1\">.</span><span class=\"mtk12\">address</span><span class=\"mtk1\">, </span><span class=\"mtk7\">12</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk11\">mineBlock</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// other user can now cancel account1&#39;s proposal when account1 owns 4 tokens in total</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk12\">gov</span><span class=\"mtk1\">.</span><span class=\"mtk11\">cancel</span><span class=\"mtk1\">(</span><span class=\"mtk12\">proposalId</span><span class=\"mtk1\">, {</span><span class=\"mtk12\">gasLimit:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">1e6</span><span class=\"mtk1\">})</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">expect</span><span class=\"mtk1\">(</span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk12\">gov</span><span class=\"mtk1\">.</span><span class=\"mtk11\">state</span><span class=\"mtk1\">(</span><span class=\"mtk12\">proposalId</span><span class=\"mtk1\">)).</span><span class=\"mtk12\">to</span><span class=\"mtk1\">.</span><span class=\"mtk11\">equal</span><span class=\"mtk1\">(</span><span class=\"mtk7\">2</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  });</span></span></span></code></pre>\n<h3 id=\"tools-used-1\" style=\"position:relative;\"><a href=\"#tools-used-1\" aria-label=\"tools used 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tools Used</h3>\n<p>VSCode</p>\n<h3 id=\"recommended-mitigation-steps-2\" style=\"position:relative;\"><a href=\"#recommended-mitigation-steps-2\" aria-label=\"recommended mitigation steps 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recommended Mitigation Steps</h3>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/main/contracts/governance/NounsDAOLogicV2.sol#L197-L200\">https://github.com/code-423n4/2022-08-nounsdao/blob/main/contracts/governance/NounsDAOLogicV2.sol#L197-L200</a> can be changed to the following code.</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">nouns</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getPriorVotes</span><span class=\"mtk1\">(</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">, </span><span class=\"mtk12\">block</span><span class=\"mtk1\">.</span><span class=\"mtk12\">number</span><span class=\"mtk1\"> - </span><span class=\"mtk7\">1</span><span class=\"mtk1\">) &gt;= </span><span class=\"mtk12\">temp</span><span class=\"mtk1\">.</span><span class=\"mtk12\">proposalThreshold</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk8\">&#39;NounsDAO::propose: proposer votes below proposal threshold&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        );</span></span></span></code></pre>\n<p>or</p>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/main/contracts/governance/NounsDAOLogicV2.sol#L350-L354\">https://github.com/code-423n4/2022-08-nounsdao/blob/main/contracts/governance/NounsDAOLogicV2.sol#L350-L354</a> can be changed to the following code.</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"12\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\"> == </span><span class=\"mtk12\">proposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">proposer</span><span class=\"mtk1\"> ||</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk12\">nouns</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getPriorVotes</span><span class=\"mtk1\">(</span><span class=\"mtk12\">proposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">proposer</span><span class=\"mtk1\">, </span><span class=\"mtk12\">block</span><span class=\"mtk1\">.</span><span class=\"mtk12\">number</span><span class=\"mtk1\"> - </span><span class=\"mtk7\">1</span><span class=\"mtk1\">) &lt;= </span><span class=\"mtk12\">proposal</span><span class=\"mtk1\">.</span><span class=\"mtk12\">proposalThreshold</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk8\">&#39;NounsDAO::cancel: proposer above threshold&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        );</span></span></span></code></pre>\n<p>but not both.</p>\n<p><strong><a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/255#issuecomment-1232013574\">eladmallel (Nouns DAO) confirmed and commented</a>:</strong></p>\n<blockquote>\n<p>We agree that the case of prior votes equal to <code>proposalThreshold</code> is missed, and plan to include that state in what is cancelable.</p>\n</blockquote>\n<hr>\n<h2 id=\"m-03-loss-of-veto-power-can-lead-to-51-attack\" style=\"position:relative;\"><a href=\"#m-03-loss-of-veto-power-can-lead-to-51-attack\" aria-label=\"m 03 loss of veto power can lead to 51 attack permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/315\">[M-03] Loss of Veto Power can Lead to 51% Attack</a></h2>\n<p><em>Submitted by TomJ, also found by 0xDjango, 0xSmartContract, Aymen0909, Ch_301, and Deivitto</em></p>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L156\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L156</a></p>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L150\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L150</a></p>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L839-L845\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L839-L845</a></p>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L637-L643\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L637-L643</a></p>\n<h3 id=\"impact-2\" style=\"position:relative;\"><a href=\"#impact-2\" aria-label=\"impact 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Impact</h3>\n<p>The veto power is import functionality for current NounsDAO in order to protect their treasury from malicious proposals.\nHowever there is lack of zero address check and lack of 2 step address changing process for vetoer address.\nThis might lead to Nounders losing their veto power unintentionally and open to 51% attack which can drain their entire treasury.</p>\n<p>Refrence from Nouns DAO contest documents:\n<a href=\"https://dialectic.ch/editorial/nouns-governance-attack\">https://dialectic.ch/editorial/nouns-governance-attack</a>\n<a href=\"https://dialectic.ch/editorial/nouns-governance-attack-2\">https://dialectic.ch/editorial/nouns-governance-attack-2</a></p>\n<h3 id=\"proof-of-concept-3\" style=\"position:relative;\"><a href=\"#proof-of-concept-3\" aria-label=\"proof of concept 3 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Proof of Concept</h3>\n<p>Lack of 0-address check for vetoer address at <code>initialize()</code> and <code>\\_setVetoer()</code> of NounsDAOLogicV2.sol and NounsDAOLogicV1.sol.\nAlso it is better to make changing address process of vetoer at <code>\\_setVetoer()</code> into 2-step process to avoid accidently setting\nvetoer to zero address or any other arbitrary addresses and end up burning/losing veto power unintentionally.</p>\n<ol>\n<li>Vetoer address of <code>initialize()</code> of NounsDAOLogicV2.sol, NounsDAOLogicV1.sol</li>\n</ol>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L156\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L156</a></p>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L150\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L150</a></p>\n<ol start=\"2\">\n<li>Vetoer address of <code>\\_setVetoer()</code> of NounsDAOLogicV2.sol, NounsDAOLogicV1.sol</li>\n</ol>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L839-L845\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L839-L845</a></p>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L637-L643\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L637-L643</a></p>\n<h3 id=\"recommended-mitigation-steps-3\" style=\"position:relative;\"><a href=\"#recommended-mitigation-steps-3\" aria-label=\"recommended mitigation steps 3 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recommended Mitigation Steps</h3>\n<p>Add zero address check for vetoer address at <code>initialize()</code>.\nAlso change <code>\\_setVetoer()</code> vetoer address changing process to 2-step process like explained below.</p>\n<p>First make the <code>\\_setVetoer()</code> function approve a new vetoer address as a pending vetoer.\nNext that pending vetoer has to claim the ownership in a separate transaction to be a new vetoer.</p>\n<p><strong><a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/315#issuecomment-1232091787\">eladmallel (Nouns DAO) confirmed and commented</a>:</strong></p>\n<blockquote>\n<p>We agree itâ€™s worth being extra safe here, planning to change it to a 2-step process.</p>\n</blockquote>\n<hr>\n<h1 id=\"low-risk-and-non-critical-issues\" style=\"position:relative;\"><a href=\"#low-risk-and-non-critical-issues\" aria-label=\"low risk and non critical issues permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Low Risk and Non-Critical Issues</h1>\n<p>For this contest, 116 reports were submitted by wardens detailing low risk and non-critical issues. The <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/166\">report highlighted below</a> by <strong>IllIllI</strong> received the top score from the judge.</p>\n<p><em>The following wardens also submitted reports: <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/154\">0xNazgul</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/301\">Deivitto</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/95\">mics</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/38\">CodingNameKiki</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/400\">JC</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/312\">0xSmartContract</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/53\">Lambda</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/107\">Rolezn</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/384\">rbserver</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/35\">Dravee</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/88\">Bnke0x0</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/100\">0x1f8b</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/234\">_141345_</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/258\">0xNineDec</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/264\">0xDjango</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/286\">Ch_301</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/330\">auditor0517</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/343\">Funen</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/361\">GalloDaSballo</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/398\">gogo</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/16\">oyc_109</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/77\">carlitox477</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/92\">bobirichman</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/97\">sikorico</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/127\">ElKu</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/213\">seyni</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/221\">robee</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/270\">saian</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/309\">Aymen0909</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/375\">c3phas</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/386\">Olivierdem</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/404\">hyh</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/406\">brgltd</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/43\">durianSausage</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/50\">LeoS</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/51\">Jeiwan</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/85\">ladboy233</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/134\">xiaoming90</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/186\">simon135</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/192\">sryysryy</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/208\">GimelSec</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/219\">catchup</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/225\">cccz</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/240\">Waze</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/243\">berndartmueller</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/250\">ajtra</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/273\">delfin454000</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/305\">Guardian</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/362\">d3e4</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/369\">lukris02</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/288\">csanuragjain</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/8\">0bi</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/15\">ReyAdmirado</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/28\">fatherOfBlocks</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/32\">0x1337</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/71\">djxploit</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/90\">Bjorn_bug</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/99\">pfapostol</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/111\">0xbepresent</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/119\">RaymondFam</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/149\">rajatbeladiya</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/151\">zzzitron</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/176\">cRat1st0s</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/181\">CertoraInc</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/193\">_Adam</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/196\">sseefried</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/201\">Sm4rty</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/231\">exd0tpy</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/268\">KIntern_NA</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/7\">0xRajeev</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/290\">Chom</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/293\">JohnSmith</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/316\">dipp</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/326\">pauliax</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/328\">R2</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/333\">Rohan16</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/336\">0xSky</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/337\">TomJ</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/340\">SooYa</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/377\">tnevler</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/385\">asutorufos</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/206\">mrpathfindr</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/210\">Soosh</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/211\">yixxas</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/215\">rvierdiiev</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/238\">tonisives</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/253\">0x040</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/269\">prasantgupta52</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/274\">ret2basic</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/297\">shenwilly</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/298\">p_crypt0</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/307\">natzuu</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/310\">zkhorse</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/347\">JansenC</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/352\">0xmatt</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/354\">rfa</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/357\">wagmi</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/366\">pashov</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/6\">erictee</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/12\">DimitarDimitrov</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/19\">DevABDee</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/26\">Haruxe</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/33\">Saintcode_</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/52\">android69</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/73\">rokinot</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/78\">8olidity</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/84\">Trabajo_de_mates</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/125\">Ruhum</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/135\">z3s</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/137\">0xkatana</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/143\">throttle</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/146\">sach1r0</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/162\">Noah3o6</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/172\">Respx</a>, and <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/202\">Tomo</a>.</em></p>\n<h2 id=\"low-risk-issues\" style=\"position:relative;\"><a href=\"#low-risk-issues\" aria-label=\"low risk issues permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Low Risk Issues</h2>\n<table>\n<thead>\n<tr>\n<th></th>\n<th align=\"left\">Issue</th>\n<th align=\"center\">Instances</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>[Lâ€‘01]</td>\n<td align=\"left\">Nouns will not be able to be transferred once the <code>block.number</code> passes <code>type(uint32).max</code></td>\n<td align=\"center\">2</td>\n</tr>\n<tr>\n<td>[Lâ€‘02]</td>\n<td align=\"left\">Unused/empty <code>receive()</code>/<code>fallback()</code> function</td>\n<td align=\"center\">1</td>\n</tr>\n<tr>\n<td>[Lâ€‘03]</td>\n<td align=\"left\">Missing checks for <code>address(0x0)</code> when assigning values to <code>address</code> state variables</td>\n<td align=\"center\">5</td>\n</tr>\n</tbody>\n</table>\n<p>Total: 8 instances over 3 issues</p>\n<h2 id=\"l01--nouns-will-not-be-able-to-be-transferred-once-the-blocknumber-passes-typeuint32max\" style=\"position:relative;\"><a href=\"#l01--nouns-will-not-be-able-to-be-transferred-once-the-blocknumber-passes-typeuint32max\" aria-label=\"l01  nouns will not be able to be transferred once the blocknumber passes typeuint32max permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Lâ€‘01]  Nouns will not be able to be transferred once the <code>block.number</code> passes <code>type(uint32).max</code></h2>\n<p>While this currently equates to ~1260 years, if thereâ€™s a hard fork which makes block times much more frequent (e.g. to compete with Solana), then this limit may be reached much faster than expected, and transfers and delegations will remain stuck at their existing settings</p>\n<p><em>There are 2 instances of this issue:</em></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"13\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: /</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">base</span><span class=\"mtk1\">/</span><span class=\"mtk12\">ERC721Checkpointable</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">238</span><span class=\"mtk1\">          </span><span class=\"mtk12\">uint32</span><span class=\"mtk1\"> </span><span class=\"mtk12\">blockNumber</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">safe32</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">239</span><span class=\"mtk1\">              </span><span class=\"mtk12\">block</span><span class=\"mtk1\">.</span><span class=\"mtk12\">number</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">240</span><span class=\"mtk1\">              </span><span class=\"mtk8\">&#39;ERC721Checkpointable::_writeCheckpoint: block number exceeds 32 bits&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">241</span><span class=\"mtk1\">:         );</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L238-L241\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L238-L241</a></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"14\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: /</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOLogicV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">923</span><span class=\"mtk1\">:         </span><span class=\"mtk12\">uint32</span><span class=\"mtk1\"> </span><span class=\"mtk12\">blockNumber</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">safe32</span><span class=\"mtk1\">(</span><span class=\"mtk12\">blockNumber_</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;NounsDAO::getDynamicQuorumParamsAt: block number exceeds 32 bits&#39;</span><span class=\"mtk1\">);</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L923\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L923</a></p>\n<h2 id=\"l02--unusedempty-receivefallback-function\" style=\"position:relative;\"><a href=\"#l02--unusedempty-receivefallback-function\" aria-label=\"l02  unusedempty receivefallback function permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Lâ€‘02]  Unused/empty <code>receive()</code>/<code>fallback()</code> function</h2>\n<p>If the intention is for the Ether to be used, the function should call another function, otherwise it should revert (e.g. <code>require(msg.sender == address(weth))</code>). Having no access control on the function means that someone may send Ether to the contract, and have no way to get anything back out, which is a loss of funds</p>\n<p><em>There is 1 instance of this issue:</em></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"15\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOLogicV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">1030</span><span class=\"mtk1\">:     </span><span class=\"mtk11\">receive</span><span class=\"mtk1\">() </span><span class=\"mtk12\">external</span><span class=\"mtk1\"> </span><span class=\"mtk12\">payable</span><span class=\"mtk1\"> {}</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L1030\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L1030</a></p>\n<h2 id=\"l03--missing-checks-for-address0x0-when-assigning-values-to-address-state-variables\" style=\"position:relative;\"><a href=\"#l03--missing-checks-for-address0x0-when-assigning-values-to-address-state-variables\" aria-label=\"l03  missing checks for address0x0 when assigning values to address state variables permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Lâ€‘03]  Missing checks for <code>address(0x0)</code> when assigning values to <code>address</code> state variables</h2>\n<p><em>There are 5 instances of this issue:</em></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"16\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOLogicV1</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">605</span><span class=\"mtk1\">:          </span><span class=\"mtk12\">pendingAdmin</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">newPendingAdmin</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">642</span><span class=\"mtk1\">:          </span><span class=\"mtk12\">vetoer</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">newVetoer</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L605\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L605</a></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"17\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOLogicV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">807</span><span class=\"mtk1\">:          </span><span class=\"mtk12\">pendingAdmin</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">newPendingAdmin</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">844</span><span class=\"mtk1\">:          </span><span class=\"mtk12\">vetoer</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">newVetoer</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L807\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L807</a></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"18\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOProxy</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">71</span><span class=\"mtk1\">:           </span><span class=\"mtk12\">admin</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">admin_</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOProxy.sol#L71\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOProxy.sol#L71</a></p>\n<h2 id=\"non-critical-issues\" style=\"position:relative;\"><a href=\"#non-critical-issues\" aria-label=\"non critical issues permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Non-Critical Issues</h2>\n<table>\n<thead>\n<tr>\n<th></th>\n<th align=\"left\">Issue</th>\n<th align=\"center\">Instances</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>[Nâ€‘01]</td>\n<td align=\"left\"><code>public</code> functions not called by the contract should be declared <code>external</code> instead</td>\n<td align=\"center\">8</td>\n</tr>\n<tr>\n<td>[Nâ€‘02]</td>\n<td align=\"left\">Non-assembly method available</td>\n<td align=\"center\">3</td>\n</tr>\n<tr>\n<td>[Nâ€‘03]</td>\n<td align=\"left\"><code>2**&#x3C;n> - 1</code> should be re-written as <code>type(uint&#x3C;n>).max</code></td>\n<td align=\"center\">2</td>\n</tr>\n<tr>\n<td>[Nâ€‘04]</td>\n<td align=\"left\"><code>constant</code>s should be defined rather than using magic numbers</td>\n<td align=\"center\">8</td>\n</tr>\n<tr>\n<td>[Nâ€‘05]</td>\n<td align=\"left\">Use a more recent version of solidity</td>\n<td align=\"center\">3</td>\n</tr>\n<tr>\n<td>[Nâ€‘06]</td>\n<td align=\"left\">Expressions for constant values such as a call to <code>keccak256()</code>, should use <code>immutable</code> rather than <code>constant</code></td>\n<td align=\"center\">6</td>\n</tr>\n<tr>\n<td>[Nâ€‘07]</td>\n<td align=\"left\">Constant redefined elsewhere</td>\n<td align=\"center\">11</td>\n</tr>\n<tr>\n<td>[Nâ€‘08]</td>\n<td align=\"left\">Lines are too long</td>\n<td align=\"center\">7</td>\n</tr>\n<tr>\n<td>[Nâ€‘09]</td>\n<td align=\"left\">Non-library/interface files should use fixed compiler versions, not floating ones</td>\n<td align=\"center\">4</td>\n</tr>\n<tr>\n<td>[Nâ€‘10]</td>\n<td align=\"left\">Event is missing <code>indexed</code> fields</td>\n<td align=\"center\">21</td>\n</tr>\n<tr>\n<td>[Nâ€‘11]</td>\n<td align=\"left\">Not using the named return variables anywhere in the function is confusing</td>\n<td align=\"center\">8</td>\n</tr>\n<tr>\n<td>[Nâ€‘12]</td>\n<td align=\"left\">Typos</td>\n<td align=\"center\">4</td>\n</tr>\n</tbody>\n</table>\n<p>Total: 85 instances over 12 issues</p>\n<h2 id=\"n01--public-functions-not-called-by-the-contract-should-be-declared-external-instead\" style=\"position:relative;\"><a href=\"#n01--public-functions-not-called-by-the-contract-should-be-declared-external-instead\" aria-label=\"n01  public functions not called by the contract should be declared external instead permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Nâ€‘01]  <code>public</code> functions not called by the contract should be declared <code>external</code> instead</h2>\n<p>Contracts <a href=\"https://docs.soliditylang.org/en/latest/contracts.html#function-overriding\">are allowed</a> to override their parentsâ€™ functions and change the visibility from <code>external</code> to <code>public</code>.</p>\n<p><em>There are 8 instances of this issue:</em></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"19\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOLogicV1</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">174</span><span class=\"mtk1\">       </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">propose</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">175           </span><span class=\"mtk12\">address</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk12\">targets</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">176           </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk12\">values</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">177           </span><span class=\"mtk12\">string</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk12\">signatures</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">178           </span><span class=\"mtk12\">bytes</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk12\">calldatas</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">179           </span><span class=\"mtk12\">string</span><span class=\"mtk1\"> </span><span class=\"mtk12\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk12\">description</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">180:      ) </span><span class=\"mtk11\">public</span><span class=\"mtk1\"> </span><span class=\"mtk11\">returns</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">649</span><span class=\"mtk1\">       </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">_burnVetoPower</span><span class=\"mtk1\">() </span><span class=\"mtk11\">public</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">650</span><span class=\"mtk1\">           </span><span class=\"mtk3\">// Check caller is pendingAdmin and pendingAdmin â‰  address(0)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">651</span><span class=\"mtk1\">:          </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\"> == </span><span class=\"mtk12\">vetoer</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;NounsDAO::_burnVetoPower: vetoer only&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">660</span><span class=\"mtk1\">:      </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">proposalThreshold</span><span class=\"mtk1\">() </span><span class=\"mtk11\">public</span><span class=\"mtk1\"> </span><span class=\"mtk11\">view</span><span class=\"mtk1\"> </span><span class=\"mtk11\">returns</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">668</span><span class=\"mtk1\">:      </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">quorumVotes</span><span class=\"mtk1\">() </span><span class=\"mtk11\">public</span><span class=\"mtk1\"> </span><span class=\"mtk11\">view</span><span class=\"mtk1\"> </span><span class=\"mtk11\">returns</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">) {</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L174-L180\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L174-L180</a></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"20\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOLogicV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">184</span><span class=\"mtk1\">       </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">propose</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">185           </span><span class=\"mtk12\">address</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk12\">targets</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">186           </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk12\">values</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">187           </span><span class=\"mtk12\">string</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk12\">signatures</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">188           </span><span class=\"mtk12\">bytes</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk12\">calldatas</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">189           </span><span class=\"mtk12\">string</span><span class=\"mtk1\"> </span><span class=\"mtk12\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk12\">description</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">190:      ) </span><span class=\"mtk11\">public</span><span class=\"mtk1\"> </span><span class=\"mtk11\">returns</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">851</span><span class=\"mtk1\">       </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">_burnVetoPower</span><span class=\"mtk1\">() </span><span class=\"mtk11\">public</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">852</span><span class=\"mtk1\">           </span><span class=\"mtk3\">// Check caller is pendingAdmin and pendingAdmin â‰  address(0)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">853</span><span class=\"mtk1\">:          </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\"> == </span><span class=\"mtk12\">vetoer</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;NounsDAO::_burnVetoPower: vetoer only&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">862</span><span class=\"mtk1\">:      </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">proposalThreshold</span><span class=\"mtk1\">() </span><span class=\"mtk11\">public</span><span class=\"mtk1\"> </span><span class=\"mtk11\">view</span><span class=\"mtk1\"> </span><span class=\"mtk11\">returns</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">1002</span><span class=\"mtk1\">:     </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">maxQuorumVotes</span><span class=\"mtk1\">() </span><span class=\"mtk11\">public</span><span class=\"mtk1\"> </span><span class=\"mtk11\">view</span><span class=\"mtk1\"> </span><span class=\"mtk11\">returns</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">) {</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L184-L190\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L184-L190</a></p>\n<h2 id=\"n02--non-assembly-method-available\" style=\"position:relative;\"><a href=\"#n02--non-assembly-method-available\" aria-label=\"n02  non assembly method available permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Nâ€‘02]  Non-assembly method available</h2>\n<p><code>assembly{ id := chainid() }</code> => <code>uint256 id = block.chainid</code>, <code>assembly { size := extcodesize() }</code> => <code>uint256 size = address().code.length</code>\nThere are some automated tools that will flag a project as having higher complexity if there is inline-assembly, so itâ€™s best to avoid using it where itâ€™s not necessary</p>\n<p><em>There are 3 instances of this issue:</em></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"21\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">base</span><span class=\"mtk1\">/</span><span class=\"mtk12\">ERC721Checkpointable</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">285</span><span class=\"mtk1\">:              chainId := </span><span class=\"mtk11\">chainid</span><span class=\"mtk1\">()</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L285\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L285</a></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"22\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOLogicV1</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">679</span><span class=\"mtk1\">:              chainId := </span><span class=\"mtk11\">chainid</span><span class=\"mtk1\">()</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L679\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L679</a></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"23\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOLogicV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">1013</span><span class=\"mtk1\">:             chainId := </span><span class=\"mtk11\">chainid</span><span class=\"mtk1\">()</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L1013\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L1013</a></p>\n<h2 id=\"n03--2n---1-should-be-re-written-as-typeuintnmax\" style=\"position:relative;\"><a href=\"#n03--2n---1-should-be-re-written-as-typeuintnmax\" aria-label=\"n03  2n   1 should be re written as typeuintnmax permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Nâ€‘03]  <code>2**&#x3C;n> - 1</code> should be re-written as <code>type(uint&#x3C;n>).max</code></h2>\n<p>Earlier versions of solidity can use <code>uint&#x3C;n>(-1)</code> instead. Expressions not including the <code>- 1</code> can often be re-written to accomodate the change (e.g. by using a <code>></code> rather than a <code>>=</code>, which will also save some gas)</p>\n<p><em>There are 2 instances of this issue:</em></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"24\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">base</span><span class=\"mtk1\">/</span><span class=\"mtk12\">ERC721Checkpointable</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">254</span><span class=\"mtk1\">:          </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">n</span><span class=\"mtk1\"> &lt; </span><span class=\"mtk7\">2</span><span class=\"mtk1\">**</span><span class=\"mtk7\">32</span><span class=\"mtk1\">, </span><span class=\"mtk12\">errorMessage</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">259</span><span class=\"mtk1\">:          </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">n</span><span class=\"mtk1\"> &lt; </span><span class=\"mtk7\">2</span><span class=\"mtk1\">**</span><span class=\"mtk7\">96</span><span class=\"mtk1\">, </span><span class=\"mtk12\">errorMessage</span><span class=\"mtk1\">);</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L254\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L254</a></p>\n<h2 id=\"n04--constants-should-be-defined-rather-than-using-magic-numbers\" style=\"position:relative;\"><a href=\"#n04--constants-should-be-defined-rather-than-using-magic-numbers\" aria-label=\"n04  constants should be defined rather than using magic numbers permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Nâ€‘04]  <code>constant</code>s should be defined rather than using magic numbers</h2>\n<p>Even <a href=\"https://github.com/code-423n4/2022-05-opensea-seaport/blob/9d7ce4d08bf3c3010304a0476a785c70c0e90ae7/contracts/lib/TokenTransferrer.sol#L35-L39\">assembly</a> can benefit from using readable constants instead of hex/numeric literals</p>\n<p><em>There are 8 instances of this issue:</em></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"25\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">base</span><span class=\"mtk1\">/</span><span class=\"mtk12\">ERC721Checkpointable</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit 32</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">254</span><span class=\"mtk1\">:          </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">n</span><span class=\"mtk1\"> &lt; </span><span class=\"mtk7\">2</span><span class=\"mtk1\">**</span><span class=\"mtk7\">32</span><span class=\"mtk1\">, </span><span class=\"mtk12\">errorMessage</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit 96</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">259</span><span class=\"mtk1\">:          </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">n</span><span class=\"mtk1\"> &lt; </span><span class=\"mtk7\">2</span><span class=\"mtk1\">**</span><span class=\"mtk7\">96</span><span class=\"mtk1\">, </span><span class=\"mtk12\">errorMessage</span><span class=\"mtk1\">);</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L254\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L254</a></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"26\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOLogicV1</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit 10000</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">673</span><span class=\"mtk1\">:          </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">number</span><span class=\"mtk1\"> * </span><span class=\"mtk12\">bps</span><span class=\"mtk1\">) / </span><span class=\"mtk7\">10000</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L673\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L673</a></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"27\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOLogicV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit 10000</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">908</span><span class=\"mtk1\">:          </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">againstVotesBPS</span><span class=\"mtk1\"> = (</span><span class=\"mtk7\">10000</span><span class=\"mtk1\"> * </span><span class=\"mtk12\">againstVotes</span><span class=\"mtk1\">) / </span><span class=\"mtk12\">totalSupply</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit 1e6</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">909</span><span class=\"mtk1\">:          </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">quorumAdjustmentBPS</span><span class=\"mtk1\"> = (</span><span class=\"mtk12\">params</span><span class=\"mtk1\">.</span><span class=\"mtk12\">quorumCoefficient</span><span class=\"mtk1\"> * </span><span class=\"mtk12\">againstVotesBPS</span><span class=\"mtk1\">) / </span><span class=\"mtk7\">1e6</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit 10000</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">1007</span><span class=\"mtk1\">:         </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">number</span><span class=\"mtk1\"> * </span><span class=\"mtk12\">bps</span><span class=\"mtk1\">) / </span><span class=\"mtk7\">10000</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L908\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L908</a></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"28\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOProxy</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit 0x20</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">98</span><span class=\"mtk1\">:                   </span><span class=\"mtk11\">revert</span><span class=\"mtk1\">(</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(</span><span class=\"mtk12\">returnData</span><span class=\"mtk1\">, </span><span class=\"mtk7\">0x20</span><span class=\"mtk1\">), </span><span class=\"mtk11\">returndatasize</span><span class=\"mtk1\">())</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit 0x40</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">113</span><span class=\"mtk1\">:              </span><span class=\"mtk4\">let</span><span class=\"mtk1\"> </span><span class=\"mtk12\">free_mem_ptr</span><span class=\"mtk1\"> := </span><span class=\"mtk10\">mload</span><span class=\"mtk1\">(</span><span class=\"mtk7\">0x40</span><span class=\"mtk1\">)</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOProxy.sol#L98\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOProxy.sol#L98</a></p>\n<h2 id=\"n05--use-a-more-recent-version-of-solidity\" style=\"position:relative;\"><a href=\"#n05--use-a-more-recent-version-of-solidity\" aria-label=\"n05  use a more recent version of solidity permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Nâ€‘05]  Use a more recent version of solidity</h2>\n<p>Use a solidity version of at least 0.8.12 to get <code>string.concat()</code> to be used instead of <code>abi.encodePacked(&#x3C;str>,&#x3C;str>)</code></p>\n<p><em>There are 3 instances of this issue:</em></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"29\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">base</span><span class=\"mtk1\">/</span><span class=\"mtk12\">ERC721Checkpointable</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">35</span><span class=\"mtk1\">:   </span><span class=\"mtk12\">pragma</span><span class=\"mtk1\"> </span><span class=\"mtk12\">solidity</span><span class=\"mtk1\"> ^</span><span class=\"mtk7\">0.8</span><span class=\"mtk1\">.</span><span class=\"mtk7\">6</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L35\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L35</a></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"30\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOLogicV1</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">61</span><span class=\"mtk1\">:   </span><span class=\"mtk12\">pragma</span><span class=\"mtk1\"> </span><span class=\"mtk12\">solidity</span><span class=\"mtk1\"> ^</span><span class=\"mtk7\">0.8</span><span class=\"mtk1\">.</span><span class=\"mtk7\">6</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L61\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L61</a></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"31\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOLogicV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">53</span><span class=\"mtk1\">:   </span><span class=\"mtk12\">pragma</span><span class=\"mtk1\"> </span><span class=\"mtk12\">solidity</span><span class=\"mtk1\"> ^</span><span class=\"mtk7\">0.8</span><span class=\"mtk1\">.</span><span class=\"mtk7\">6</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L53\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L53</a></p>\n<h2 id=\"n06--expressions-for-constant-values-such-as-a-call-to-keccak256-should-use-immutable-rather-than-constant\" style=\"position:relative;\"><a href=\"#n06--expressions-for-constant-values-such-as-a-call-to-keccak256-should-use-immutable-rather-than-constant\" aria-label=\"n06  expressions for constant values such as a call to keccak256 should use immutable rather than constant permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Nâ€‘06]  Expressions for constant values such as a call to <code>keccak256()</code>, should use <code>immutable</code> rather than <code>constant</code></h2>\n<p>While it doesnâ€™t save any gas because the compiler knows that developers often make this mistake, itâ€™s still best to use the right tool for the task at hand. There is a difference between <code>constant</code> variables and <code>immutable</code> variables, and they should each be used in their appropriate contexts. <code>constants</code> should be used for literal values written into the code, and <code>immutable</code> variables should be used for expressions, or values calculated in, or passed into the constructor.</p>\n<p><em>There are 6 instances of this issue:</em></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"32\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">base</span><span class=\"mtk1\">/</span><span class=\"mtk12\">ERC721Checkpointable</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">59</span><span class=\"mtk1\">        </span><span class=\"mtk12\">bytes32</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">constant</span><span class=\"mtk1\"> </span><span class=\"mtk12\">DOMAIN_TYPEHASH</span><span class=\"mtk1\"> =</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">60</span><span class=\"mtk1\">:           </span><span class=\"mtk11\">keccak256</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;EIP712Domain(string name,uint256 chainId,address verifyingContract)&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">63</span><span class=\"mtk1\">        </span><span class=\"mtk12\">bytes32</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">constant</span><span class=\"mtk1\"> </span><span class=\"mtk12\">DELEGATION_TYPEHASH</span><span class=\"mtk1\"> =</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">64</span><span class=\"mtk1\">:           </span><span class=\"mtk11\">keccak256</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;Delegation(address delegatee,uint256 nonce,uint256 expiry)&#39;</span><span class=\"mtk1\">);</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L59-L60\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L59-L60</a></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"33\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOLogicV1</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">97</span><span class=\"mtk1\">        </span><span class=\"mtk12\">bytes32</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">constant</span><span class=\"mtk1\"> </span><span class=\"mtk12\">DOMAIN_TYPEHASH</span><span class=\"mtk1\"> =</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">98</span><span class=\"mtk1\">:           </span><span class=\"mtk11\">keccak256</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;EIP712Domain(string name,uint256 chainId,address verifyingContract)&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">101</span><span class=\"mtk1\">:      </span><span class=\"mtk12\">bytes32</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">constant</span><span class=\"mtk1\"> </span><span class=\"mtk12\">BALLOT_TYPEHASH</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">keccak256</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;Ballot(uint256 proposalId,uint8 support)&#39;</span><span class=\"mtk1\">);</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L97-L98\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L97-L98</a></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"34\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOLogicV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">101</span><span class=\"mtk1\">       </span><span class=\"mtk12\">bytes32</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">constant</span><span class=\"mtk1\"> </span><span class=\"mtk12\">DOMAIN_TYPEHASH</span><span class=\"mtk1\"> =</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">102</span><span class=\"mtk1\">:          </span><span class=\"mtk11\">keccak256</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;EIP712Domain(string name,uint256 chainId,address verifyingContract)&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">105</span><span class=\"mtk1\">:      </span><span class=\"mtk12\">bytes32</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">constant</span><span class=\"mtk1\"> </span><span class=\"mtk12\">BALLOT_TYPEHASH</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">keccak256</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;Ballot(uint256 proposalId,uint8 support)&#39;</span><span class=\"mtk1\">);</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L101-L102\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L101-L102</a></p>\n<h2 id=\"n07--constant-redefined-elsewhere\" style=\"position:relative;\"><a href=\"#n07--constant-redefined-elsewhere\" aria-label=\"n07  constant redefined elsewhere permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Nâ€‘07]  Constant redefined elsewhere</h2>\n<p>Consider defining in only one contract so that values cannot become out of sync when only one location is updated. A <a href=\"https://medium.com/coinmonks/gas-cost-of-solidity-library-functions-dbe0cedd4678\">cheap way</a> to store constants in a single location is to create an <code>internal constant</code> in a <code>library</code>. If the variable is a local cache of another contractâ€™s value, consider making the cache variable internal or private, which will require external users to query the contract with the source of truth, so that callers donâ€™t get out of sync.</p>\n<p><em>There are 11 instances of this issue:</em></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"35\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOLogicV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit seen in contracts/governance/NounsDAOLogicV1.sol </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">59</span><span class=\"mtk1\">:       </span><span class=\"mtk12\">string</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">constant</span><span class=\"mtk1\"> </span><span class=\"mtk12\">name</span><span class=\"mtk1\"> = </span><span class=\"mtk8\">&#39;Nouns DAO&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit seen in contracts/governance/NounsDAOLogicV1.sol </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">62</span><span class=\"mtk1\">:       </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">constant</span><span class=\"mtk1\"> </span><span class=\"mtk12\">MIN_PROPOSAL_THRESHOLD_BPS</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">1</span><span class=\"mtk1\">; </span><span class=\"mtk3\">// 1 basis point or 0.01%</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit seen in contracts/governance/NounsDAOLogicV1.sol </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">65</span><span class=\"mtk1\">:       </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">constant</span><span class=\"mtk1\"> </span><span class=\"mtk12\">MAX_PROPOSAL_THRESHOLD_BPS</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">1_000</span><span class=\"mtk1\">; </span><span class=\"mtk3\">// 1,000 basis points or 10%</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit seen in contracts/governance/NounsDAOLogicV1.sol </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">68</span><span class=\"mtk1\">:       </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">constant</span><span class=\"mtk1\"> </span><span class=\"mtk12\">MIN_VOTING_PERIOD</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">5_760</span><span class=\"mtk1\">; </span><span class=\"mtk3\">// About 24 hours</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit seen in contracts/governance/NounsDAOLogicV1.sol </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">71</span><span class=\"mtk1\">:       </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">constant</span><span class=\"mtk1\"> </span><span class=\"mtk12\">MAX_VOTING_PERIOD</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">80_640</span><span class=\"mtk1\">; </span><span class=\"mtk3\">// About 2 weeks</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit seen in contracts/governance/NounsDAOLogicV1.sol </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">74</span><span class=\"mtk1\">:       </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">constant</span><span class=\"mtk1\"> </span><span class=\"mtk12\">MIN_VOTING_DELAY</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">1</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit seen in contracts/governance/NounsDAOLogicV1.sol </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">77</span><span class=\"mtk1\">:       </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">constant</span><span class=\"mtk1\"> </span><span class=\"mtk12\">MAX_VOTING_DELAY</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">40_320</span><span class=\"mtk1\">; </span><span class=\"mtk3\">// About 1 week</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit seen in contracts/governance/NounsDAOLogicV1.sol </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">89</span><span class=\"mtk1\">:       </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">constant</span><span class=\"mtk1\"> </span><span class=\"mtk12\">MAX_QUORUM_VOTES_BPS</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">2_000</span><span class=\"mtk1\">; </span><span class=\"mtk3\">// 2,000 basis points or 20%</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit seen in contracts/governance/NounsDAOLogicV1.sol </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">92</span><span class=\"mtk1\">:       </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">constant</span><span class=\"mtk1\"> </span><span class=\"mtk12\">proposalMaxOperations</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">10</span><span class=\"mtk1\">; </span><span class=\"mtk3\">// 10 actions</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit seen in contracts/governance/NounsDAOLogicV1.sol </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">101</span><span class=\"mtk1\">       </span><span class=\"mtk12\">bytes32</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">constant</span><span class=\"mtk1\"> </span><span class=\"mtk12\">DOMAIN_TYPEHASH</span><span class=\"mtk1\"> =</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">102</span><span class=\"mtk1\">:          </span><span class=\"mtk11\">keccak256</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;EIP712Domain(string name,uint256 chainId,address verifyingContract)&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit seen in contracts/governance/NounsDAOLogicV1.sol </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">105</span><span class=\"mtk1\">:      </span><span class=\"mtk12\">bytes32</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">constant</span><span class=\"mtk1\"> </span><span class=\"mtk12\">BALLOT_TYPEHASH</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">keccak256</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;Ballot(uint256 proposalId,uint8 support)&#39;</span><span class=\"mtk1\">);</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L59\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L59</a></p>\n<h2 id=\"n08--lines-are-too-long\" style=\"position:relative;\"><a href=\"#n08--lines-are-too-long\" aria-label=\"n08  lines are too long permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Nâ€‘08]  Lines are too long</h2>\n<p>Usually lines in source code are limited to <a href=\"https://softwareengineering.stackexchange.com/questions/148677/why-is-80-characters-the-standard-limit-for-code-width\">80</a> characters. Todayâ€™s screens are much larger so itâ€™s reasonable to stretch this in some cases. Since the files will most likely reside in GitHub, and GitHub starts using a scroll bar in all cases when the length is over <a href=\"https://github.com/aizatto/character-length\">164</a> characters, the lines below should be split when they reach that length</p>\n<p><em>There are 7 instances of this issue:</em></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"36\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOInterfaces</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">156</span><span class=\"mtk1\">:      </span><span class=\"mtk3\">/// @notice The basis point number of votes in support of a proposal required in order for a quorum to be reached and for a vote to succeed. *DIFFERS from GovernerBravo</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">181</span><span class=\"mtk1\">:          </span><span class=\"mtk3\">/// @notice The number of votes in support of a proposal required in order for a quorum to be reached and for a vote to succeed at the time of proposal creation. *DIFFERS from GovernerBravo</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">256</span><span class=\"mtk1\">:      </span><span class=\"mtk3\">/// @notice The basis point number of votes in support of a proposal required in order for a quorum to be reached and for a vote to succeed. *DIFFERS from GovernerBravo</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">281</span><span class=\"mtk1\">:          </span><span class=\"mtk3\">/// @notice The number of votes in support of a proposal required in order for a quorum to be reached and for a vote to succeed at the time of proposal creation. *DIFFERS from GovernerBravo</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">375</span><span class=\"mtk1\">:          </span><span class=\"mtk3\">/// @notice The minimum number of votes in support of a proposal required in order for a quorum to be reached and for a vote to succeed at the time of proposal creation. *DIFFERS from GovernerBravo</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOInterfaces.sol#L156\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOInterfaces.sol#L156</a></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"37\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOLogicV1</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">507</span><span class=\"mtk1\">:          </span><span class=\"mtk3\">/// @notice: Unlike GovernerBravo, votes are considered from the block the proposal was created in order to normalize quorumVotes and proposalThreshold metrics</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L507\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L507</a></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"38\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOLogicV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">599</span><span class=\"mtk1\">:          </span><span class=\"mtk3\">/// @notice: Unlike GovernerBravo, votes are considered from the block the proposal was created in order to normalize quorumVotes and proposalThreshold metrics</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L599\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L599</a></p>\n<h2 id=\"n09--non-libraryinterface-files-should-use-fixed-compiler-versions-not-floating-ones\" style=\"position:relative;\"><a href=\"#n09--non-libraryinterface-files-should-use-fixed-compiler-versions-not-floating-ones\" aria-label=\"n09  non libraryinterface files should use fixed compiler versions not floating ones permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Nâ€‘09]  Non-library/interface files should use fixed compiler versions, not floating ones</h2>\n<p><em>There are 4 instances of this issue:</em></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"39\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOInterfaces</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">33</span><span class=\"mtk1\">:   </span><span class=\"mtk12\">pragma</span><span class=\"mtk1\"> </span><span class=\"mtk12\">solidity</span><span class=\"mtk1\"> ^</span><span class=\"mtk7\">0.8</span><span class=\"mtk1\">.</span><span class=\"mtk7\">6</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOInterfaces.sol#L33\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOInterfaces.sol#L33</a></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"40\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOLogicV1</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">61</span><span class=\"mtk1\">:   </span><span class=\"mtk12\">pragma</span><span class=\"mtk1\"> </span><span class=\"mtk12\">solidity</span><span class=\"mtk1\"> ^</span><span class=\"mtk7\">0.8</span><span class=\"mtk1\">.</span><span class=\"mtk7\">6</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L61\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L61</a></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"41\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOLogicV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">53</span><span class=\"mtk1\">:   </span><span class=\"mtk12\">pragma</span><span class=\"mtk1\"> </span><span class=\"mtk12\">solidity</span><span class=\"mtk1\"> ^</span><span class=\"mtk7\">0.8</span><span class=\"mtk1\">.</span><span class=\"mtk7\">6</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L53\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L53</a></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"42\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOProxy</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">36</span><span class=\"mtk1\">:   </span><span class=\"mtk12\">pragma</span><span class=\"mtk1\"> </span><span class=\"mtk12\">solidity</span><span class=\"mtk1\"> ^</span><span class=\"mtk7\">0.8</span><span class=\"mtk1\">.</span><span class=\"mtk7\">6</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOProxy.sol#L36\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOProxy.sol#L36</a></p>\n<h2 id=\"n10--event-is-missing-indexed-fields\" style=\"position:relative;\"><a href=\"#n10--event-is-missing-indexed-fields\" aria-label=\"n10  event is missing indexed fields permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Nâ€‘10]  Event is missing <code>indexed</code> fields</h2>\n<p>Index event fields make the field more quickly accessible to off-chain tools that parse events. However, note that each index field costs extra gas during emission, so itâ€™s not necessarily best to index the maximum allowed per event (three fields). Each <code>event</code> should use three <code>indexed</code> fields if there are three or more fields, and gas usage is not particularly of concern for the events in question. If there are fewer than three fields, all of the fields should be indexed.</p>\n<p><em>There are 21 instances of this issue:</em></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"43\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">base</span><span class=\"mtk1\">/</span><span class=\"mtk12\">ERC721Checkpointable</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">73</span><span class=\"mtk1\">:       </span><span class=\"mtk12\">event</span><span class=\"mtk1\"> </span><span class=\"mtk11\">DelegateVotesChanged</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\"> </span><span class=\"mtk12\">indexed</span><span class=\"mtk1\"> </span><span class=\"mtk12\">delegate</span><span class=\"mtk1\">, </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">previousBalance</span><span class=\"mtk1\">, </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">newBalance</span><span class=\"mtk1\">);</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L73\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L73</a></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"44\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOInterfaces</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">37</span><span class=\"mtk1\">        </span><span class=\"mtk12\">event</span><span class=\"mtk1\"> </span><span class=\"mtk11\">ProposalCreated</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">38</span><span class=\"mtk1\">            </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">id</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">39</span><span class=\"mtk1\">            </span><span class=\"mtk12\">address</span><span class=\"mtk1\"> </span><span class=\"mtk12\">proposer</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">40</span><span class=\"mtk1\">            </span><span class=\"mtk12\">address</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">targets</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">41</span><span class=\"mtk1\">            </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">values</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">42</span><span class=\"mtk1\">            </span><span class=\"mtk12\">string</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">signatures</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">43</span><span class=\"mtk1\">            </span><span class=\"mtk12\">bytes</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">calldatas</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">44</span><span class=\"mtk1\">            </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">startBlock</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">45</span><span class=\"mtk1\">            </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">endBlock</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">46</span><span class=\"mtk1\">            </span><span class=\"mtk12\">string</span><span class=\"mtk1\"> </span><span class=\"mtk12\">description</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">47</span><span class=\"mtk1\">:       );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">50</span><span class=\"mtk1\">        </span><span class=\"mtk12\">event</span><span class=\"mtk1\"> </span><span class=\"mtk11\">ProposalCreatedWithRequirements</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">51</span><span class=\"mtk1\">            </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">id</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">52</span><span class=\"mtk1\">            </span><span class=\"mtk12\">address</span><span class=\"mtk1\"> </span><span class=\"mtk12\">proposer</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">53</span><span class=\"mtk1\">            </span><span class=\"mtk12\">address</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">targets</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">54</span><span class=\"mtk1\">            </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">values</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">55</span><span class=\"mtk1\">            </span><span class=\"mtk12\">string</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">signatures</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">56</span><span class=\"mtk1\">            </span><span class=\"mtk12\">bytes</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">calldatas</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">57</span><span class=\"mtk1\">            </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">startBlock</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">58</span><span class=\"mtk1\">            </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">endBlock</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">59</span><span class=\"mtk1\">            </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">proposalThreshold</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">60</span><span class=\"mtk1\">            </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">quorumVotes</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">61</span><span class=\"mtk1\">            </span><span class=\"mtk12\">string</span><span class=\"mtk1\"> </span><span class=\"mtk12\">description</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">62</span><span class=\"mtk1\">:       );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">70</span><span class=\"mtk1\">:       </span><span class=\"mtk12\">event</span><span class=\"mtk1\"> </span><span class=\"mtk11\">VoteCast</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\"> </span><span class=\"mtk12\">indexed</span><span class=\"mtk1\"> </span><span class=\"mtk12\">voter</span><span class=\"mtk1\">, </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">proposalId</span><span class=\"mtk1\">, </span><span class=\"mtk12\">uint8</span><span class=\"mtk1\"> </span><span class=\"mtk12\">support</span><span class=\"mtk1\">, </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">votes</span><span class=\"mtk1\">, </span><span class=\"mtk12\">string</span><span class=\"mtk1\"> </span><span class=\"mtk12\">reason</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">73</span><span class=\"mtk1\">:       </span><span class=\"mtk12\">event</span><span class=\"mtk1\"> </span><span class=\"mtk11\">ProposalCanceled</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">id</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">76</span><span class=\"mtk1\">:       </span><span class=\"mtk12\">event</span><span class=\"mtk1\"> </span><span class=\"mtk11\">ProposalQueued</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">id</span><span class=\"mtk1\">, </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">eta</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">79</span><span class=\"mtk1\">:       </span><span class=\"mtk12\">event</span><span class=\"mtk1\"> </span><span class=\"mtk11\">ProposalExecuted</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">id</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">82</span><span class=\"mtk1\">:       </span><span class=\"mtk12\">event</span><span class=\"mtk1\"> </span><span class=\"mtk11\">ProposalVetoed</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">id</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">85</span><span class=\"mtk1\">:       </span><span class=\"mtk12\">event</span><span class=\"mtk1\"> </span><span class=\"mtk11\">VotingDelaySet</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">oldVotingDelay</span><span class=\"mtk1\">, </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">newVotingDelay</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">88</span><span class=\"mtk1\">:       </span><span class=\"mtk12\">event</span><span class=\"mtk1\"> </span><span class=\"mtk11\">VotingPeriodSet</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">oldVotingPeriod</span><span class=\"mtk1\">, </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">newVotingPeriod</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">91</span><span class=\"mtk1\">:       </span><span class=\"mtk12\">event</span><span class=\"mtk1\"> </span><span class=\"mtk11\">NewImplementation</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\"> </span><span class=\"mtk12\">oldImplementation</span><span class=\"mtk1\">, </span><span class=\"mtk12\">address</span><span class=\"mtk1\"> </span><span class=\"mtk12\">newImplementation</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">94</span><span class=\"mtk1\">:       </span><span class=\"mtk12\">event</span><span class=\"mtk1\"> </span><span class=\"mtk11\">ProposalThresholdBPSSet</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">oldProposalThresholdBPS</span><span class=\"mtk1\">, </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">newProposalThresholdBPS</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">97</span><span class=\"mtk1\">:       </span><span class=\"mtk12\">event</span><span class=\"mtk1\"> </span><span class=\"mtk11\">QuorumVotesBPSSet</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">oldQuorumVotesBPS</span><span class=\"mtk1\">, </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">newQuorumVotesBPS</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">100</span><span class=\"mtk1\">:      </span><span class=\"mtk12\">event</span><span class=\"mtk1\"> </span><span class=\"mtk11\">NewPendingAdmin</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\"> </span><span class=\"mtk12\">oldPendingAdmin</span><span class=\"mtk1\">, </span><span class=\"mtk12\">address</span><span class=\"mtk1\"> </span><span class=\"mtk12\">newPendingAdmin</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">103</span><span class=\"mtk1\">:      </span><span class=\"mtk12\">event</span><span class=\"mtk1\"> </span><span class=\"mtk11\">NewAdmin</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\"> </span><span class=\"mtk12\">oldAdmin</span><span class=\"mtk1\">, </span><span class=\"mtk12\">address</span><span class=\"mtk1\"> </span><span class=\"mtk12\">newAdmin</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">106</span><span class=\"mtk1\">:      </span><span class=\"mtk12\">event</span><span class=\"mtk1\"> </span><span class=\"mtk11\">NewVetoer</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\"> </span><span class=\"mtk12\">oldVetoer</span><span class=\"mtk1\">, </span><span class=\"mtk12\">address</span><span class=\"mtk1\"> </span><span class=\"mtk12\">newVetoer</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">111</span><span class=\"mtk1\">:      </span><span class=\"mtk12\">event</span><span class=\"mtk1\"> </span><span class=\"mtk11\">MinQuorumVotesBPSSet</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint16</span><span class=\"mtk1\"> </span><span class=\"mtk12\">oldMinQuorumVotesBPS</span><span class=\"mtk1\">, </span><span class=\"mtk12\">uint16</span><span class=\"mtk1\"> </span><span class=\"mtk12\">newMinQuorumVotesBPS</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">114</span><span class=\"mtk1\">:      </span><span class=\"mtk12\">event</span><span class=\"mtk1\"> </span><span class=\"mtk11\">MaxQuorumVotesBPSSet</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint16</span><span class=\"mtk1\"> </span><span class=\"mtk12\">oldMaxQuorumVotesBPS</span><span class=\"mtk1\">, </span><span class=\"mtk12\">uint16</span><span class=\"mtk1\"> </span><span class=\"mtk12\">newMaxQuorumVotesBPS</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">117</span><span class=\"mtk1\">:      </span><span class=\"mtk12\">event</span><span class=\"mtk1\"> </span><span class=\"mtk11\">QuorumCoefficientSet</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint32</span><span class=\"mtk1\"> </span><span class=\"mtk12\">oldQuorumCoefficient</span><span class=\"mtk1\">, </span><span class=\"mtk12\">uint32</span><span class=\"mtk1\"> </span><span class=\"mtk12\">newQuorumCoefficient</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">120</span><span class=\"mtk1\">:      </span><span class=\"mtk12\">event</span><span class=\"mtk1\"> </span><span class=\"mtk11\">RefundableVote</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\"> </span><span class=\"mtk12\">indexed</span><span class=\"mtk1\"> </span><span class=\"mtk12\">voter</span><span class=\"mtk1\">, </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">refundAmount</span><span class=\"mtk1\">, </span><span class=\"mtk12\">bool</span><span class=\"mtk1\"> </span><span class=\"mtk12\">refundSent</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">123</span><span class=\"mtk1\">:      </span><span class=\"mtk12\">event</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Withdraw</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">amount</span><span class=\"mtk1\">, </span><span class=\"mtk12\">bool</span><span class=\"mtk1\"> </span><span class=\"mtk12\">sent</span><span class=\"mtk1\">);</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOInterfaces.sol#L37-L47\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOInterfaces.sol#L37-L47</a></p>\n<h2 id=\"n11--not-using-the-named-return-variables-anywhere-in-the-function-is-confusing\" style=\"position:relative;\"><a href=\"#n11--not-using-the-named-return-variables-anywhere-in-the-function-is-confusing\" aria-label=\"n11  not using the named return variables anywhere in the function is confusing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Nâ€‘11]  Not using the named return variables anywhere in the function is confusing</h2>\n<p>Consider changing the variable to be an unnamed one</p>\n<p><em>There are 8 instances of this issue:</em></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"45\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOLogicV1</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit targets</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit values</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit signatures</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit calldatas</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">392</span><span class=\"mtk1\">       </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">getActions</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">proposalId</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">393           </span><span class=\"mtk11\">external</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">394           </span><span class=\"mtk11\">view</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">395           </span><span class=\"mtk11\">returns</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">396               </span><span class=\"mtk12\">address</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk12\">targets</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">397               </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk12\">values</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">398               </span><span class=\"mtk12\">string</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk12\">signatures</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">399:              </span><span class=\"mtk10\">bytes</span><span class=\"mtk1\">[] </span><span class=\"mtk10\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk10\">calldatas</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L392-L399\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L392-L399</a></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"46\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOLogicV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit targets</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit values</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit signatures</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit calldatas</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">403</span><span class=\"mtk1\">       </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">getActions</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">proposalId</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">404           </span><span class=\"mtk11\">external</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">405           </span><span class=\"mtk11\">view</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">406           </span><span class=\"mtk11\">returns</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">407               </span><span class=\"mtk12\">address</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk12\">targets</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">408               </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk12\">values</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">409               </span><span class=\"mtk12\">string</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk12\">signatures</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">410:              </span><span class=\"mtk10\">bytes</span><span class=\"mtk1\">[] </span><span class=\"mtk10\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk10\">calldatas</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L403-L410\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L403-L410</a></p>\n<h2 id=\"n12--typos\" style=\"position:relative;\"><a href=\"#n12--typos\" aria-label=\"n12  typos permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Nâ€‘12]  Typos</h2>\n<p><em>There are 4 instances of this issue:</em></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"47\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: /</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOLogicV1</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit contructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">104</span><span class=\"mtk1\">:      * @</span><span class=\"mtk12\">notice</span><span class=\"mtk1\"> </span><span class=\"mtk12\">Used</span><span class=\"mtk1\"> </span><span class=\"mtk12\">to</span><span class=\"mtk1\"> </span><span class=\"mtk12\">initialize</span><span class=\"mtk1\"> </span><span class=\"mtk12\">the</span><span class=\"mtk1\"> </span><span class=\"mtk12\">contract</span><span class=\"mtk1\"> </span><span class=\"mtk12\">during</span><span class=\"mtk1\"> </span><span class=\"mtk12\">delegator</span><span class=\"mtk1\"> </span><span class=\"mtk12\">contructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit priviledges</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">646</span><span class=\"mtk1\">:      * @</span><span class=\"mtk12\">notice</span><span class=\"mtk1\"> </span><span class=\"mtk12\">Burns</span><span class=\"mtk1\"> </span><span class=\"mtk12\">veto</span><span class=\"mtk1\"> </span><span class=\"mtk12\">priviledges</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L104\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L104</a></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"48\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: /</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOLogicV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit contructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">115</span><span class=\"mtk1\">:      * @</span><span class=\"mtk12\">notice</span><span class=\"mtk1\"> </span><span class=\"mtk12\">Used</span><span class=\"mtk1\"> </span><span class=\"mtk12\">to</span><span class=\"mtk1\"> </span><span class=\"mtk12\">initialize</span><span class=\"mtk1\"> </span><span class=\"mtk12\">the</span><span class=\"mtk1\"> </span><span class=\"mtk12\">contract</span><span class=\"mtk1\"> </span><span class=\"mtk12\">during</span><span class=\"mtk1\"> </span><span class=\"mtk12\">delegator</span><span class=\"mtk1\"> </span><span class=\"mtk12\">contructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit priviledges</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">848</span><span class=\"mtk1\">:      * @</span><span class=\"mtk12\">notice</span><span class=\"mtk1\"> </span><span class=\"mtk12\">Burns</span><span class=\"mtk1\"> </span><span class=\"mtk12\">veto</span><span class=\"mtk1\"> </span><span class=\"mtk12\">priviledges</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L115\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L115</a></p>\n<hr>\n<h1 id=\"gas-optimizations\" style=\"position:relative;\"><a href=\"#gas-optimizations\" aria-label=\"gas optimizations permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gas Optimizations</h1>\n<p>For this contest, 126 reports were submitted by wardens detailing gas optimizations. The <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/164\">report highlighted below</a> by <strong>IllIllI</strong> received the top score from the judge.</p>\n<p><em>The following wardens also submitted reports: <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/294\">JohnSmith</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/271\">m_Rassska</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/34\">Dravee</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/263\">0xDjango</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/81\">0x1f8b</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/177\">cRat1st0s</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/295\">0xSmartContract</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/304\">Aymen0909</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/13\">oyc_109</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/14\">ReyAdmirado</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/24\">Bnke0x0</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/94\">pfapostol</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/108\">Rolezn</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/222\">robee</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/248\">joestakey</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/292\">TomJ</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/5\">erictee</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/96\">mics</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/103\">ajtra</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/136\">0xkatana</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/139\">ElKu</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/159\">martin</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/200\">Sm4rty</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/218\">Junnon</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/296\">Deivitto</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/308\">ch0bu</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/373\">c3phas</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/27\">fatherOfBlocks</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/83\">ladboy233</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/98\">sikorico</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/113\">Olivierdem</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/124\">Tomo</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/153\">0xNazgul</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/197\">ret2basic</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/233\">_141345_</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/267\">prasantgupta52</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/335\">gogo</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/359\">GalloDaSballo</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/399\">JC</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/411\">rbserver</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/42\">durianSausage</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/10\">DimitarDimitrov</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/22\">samruna</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/47\">LeoS</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/62\">jag</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/76\">carlitox477</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/86\">Ruhum</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/87\">Shishigami</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/109\">0xbepresent</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/112\">Ben</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/115\">ignacio</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/120\">SaharAP</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/126\">0x040</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/145\">sach1r0</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/165\">BipinSah</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/175\">bulej93</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/179\">lucacez</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/180\">CertoraInc</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/191\">sryysryy</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/217\">rvierdiiev</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/228\">exolorkistis</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/237\">zishansami</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/260\">saian</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/317\">Tomio</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/331\">Rohan16</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/355\">rfa</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/370\">Fitraldys</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/383\">hyh</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/392\">pauliax</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/407\">brgltd</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/306\">natzuu</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/311\">Chom</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/358\">medikko</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/372\">lukris02</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/374\">delfin454000</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/388\">d3e4</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/18\">EthLedger</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/21\">DevABDee</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/31\">Saintcode_</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/54\">Lambda</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/70\">djxploit</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/72\">rokinot</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/79\">shr1ftyy</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/82\">CodingNameKiki</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/152\">mrpathfindr</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/161\">Noah3o6</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/167\">rotcivegaf</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/168\">ak1</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/169\">Respx</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/185\">simon135</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/187\">RaymondFam</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/190\">karanctf</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/194\">_Adam</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/204\">shark</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/209\">GimelSec</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/220\">catchup</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/227\">0xc0ffEE</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/239\">Waze</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/256\">0xNineDec</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/261\">KIntern_NA</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/272\">SooYa</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/285\">Guardian</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/287\">Ch_301</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/300\">Amithuddar</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/2\">SerMyVillage</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/11\">2997ms</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/20\">newfork01</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/46\">RoiEvenHaim</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/48\">Polandia94</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/49\">tay054</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/89\">Yiko</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/91\">Bjorn_bug</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/93\">bobirichman</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/158\">ACai</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/216\">seyni</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/319\">francoHacker</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/332\">Randyyy</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/339\">R2</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/342\">Diraco</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/344\">Funen</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/345\">IgnacioB</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/379\">tnevler</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/381\">wagmi</a>, <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/387\">peritoflores</a>, and <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/405\">a12jmx</a>.</em></p>\n<h2 id=\"summary-1\" style=\"position:relative;\"><a href=\"#summary-1\" aria-label=\"summary 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Summary</h2>\n<table>\n<thead>\n<tr>\n<th></th>\n<th align=\"left\">Issue</th>\n<th align=\"center\">Instances</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>[Gâ€‘01]</td>\n<td align=\"left\">State checks unnecessarily re-fetch <code>Proposal</code>s</td>\n<td align=\"center\">5</td>\n</tr>\n<tr>\n<td>[Gâ€‘02]</td>\n<td align=\"left\">Multiple <code>address</code>/ID mappings can be combined into a single <code>mapping</code> of an <code>address</code>/ID to a <code>struct</code>, where appropriate</td>\n<td align=\"center\">1</td>\n</tr>\n<tr>\n<td>[Gâ€‘03]</td>\n<td align=\"left\">Structs can be packed into fewer storage slots</td>\n<td align=\"center\">3</td>\n</tr>\n<tr>\n<td>[Gâ€‘04]</td>\n<td align=\"left\">Using <code>calldata</code> instead of <code>memory</code> for read-only arguments in <code>external</code> functions saves gas</td>\n<td align=\"center\">10</td>\n</tr>\n<tr>\n<td>[Gâ€‘05]</td>\n<td align=\"left\">Using <code>storage</code> instead of <code>memory</code> for structs/arrays saves gas</td>\n<td align=\"center\">1</td>\n</tr>\n<tr>\n<td>[Gâ€‘06]</td>\n<td align=\"left\">State variables should be cached in stack variables rather than re-reading them from storage</td>\n<td align=\"center\">11</td>\n</tr>\n<tr>\n<td>[Gâ€‘07]</td>\n<td align=\"left\">Multiple accesses of a mapping/array should use a local variable cache</td>\n<td align=\"center\">2</td>\n</tr>\n<tr>\n<td>[Gâ€‘08]</td>\n<td align=\"left\"><code>internal</code> functions only called once can be inlined to save gas</td>\n<td align=\"center\">7</td>\n</tr>\n<tr>\n<td>[Gâ€‘09]</td>\n<td align=\"left\">Add <code>unchecked {}</code> for subtractions where the operands cannot underflow because of a previous <code>require()</code> or <code>if</code>-statement</td>\n<td align=\"center\">1</td>\n</tr>\n<tr>\n<td>[Gâ€‘10]</td>\n<td align=\"left\"><code>&#x3C;array>.length</code> should not be looked up in every loop of a <code>for</code>-loop</td>\n<td align=\"center\">8</td>\n</tr>\n<tr>\n<td>[Gâ€‘11]</td>\n<td align=\"left\"><code>++i</code>/<code>i++</code> should be <code>unchecked{++i}</code>/<code>unchecked{i++}</code> when it is not possible for them to overflow, as is the case when used in <code>for</code>- and <code>while</code>-loops</td>\n<td align=\"center\">8</td>\n</tr>\n<tr>\n<td>[Gâ€‘12]</td>\n<td align=\"left\"><code>require()</code>/<code>revert()</code> strings longer than 32 bytes cost extra gas</td>\n<td align=\"center\">86</td>\n</tr>\n<tr>\n<td>[Gâ€‘13]</td>\n<td align=\"left\">Optimize names to save gas</td>\n<td align=\"center\">5</td>\n</tr>\n<tr>\n<td>[Gâ€‘14]</td>\n<td align=\"left\">Use a more recent version of solidity</td>\n<td align=\"center\">1</td>\n</tr>\n<tr>\n<td>[Gâ€‘15]</td>\n<td align=\"left\"><code>++i</code> costs less gas than <code>i++</code>, especially when itâ€™s used in <code>for</code>-loops (<code>--i</code>/<code>i--</code> too)</td>\n<td align=\"center\">10</td>\n</tr>\n<tr>\n<td>[Gâ€‘16]</td>\n<td align=\"left\">Splitting <code>require()</code> statements that use <code>&#x26;&#x26;</code> saves gas</td>\n<td align=\"center\">19</td>\n</tr>\n<tr>\n<td>[Gâ€‘17]</td>\n<td align=\"left\">Usage of <code>uints</code>/<code>ints</code> smaller than 32 bytes (256 bits) incurs overhead</td>\n<td align=\"center\">1</td>\n</tr>\n<tr>\n<td>[Gâ€‘18]</td>\n<td align=\"left\">Using <code>private</code> rather than <code>public</code> for constants, saves gas</td>\n<td align=\"center\">31</td>\n</tr>\n<tr>\n<td>[Gâ€‘19]</td>\n<td align=\"left\">Donâ€™t compare boolean expressions to boolean literals</td>\n<td align=\"center\">2</td>\n</tr>\n<tr>\n<td>[Gâ€‘20]</td>\n<td align=\"left\">Division by two should use bit shifting</td>\n<td align=\"center\">2</td>\n</tr>\n<tr>\n<td>[Gâ€‘21]</td>\n<td align=\"left\"><code>require()</code> or <code>revert()</code> statements that check input arguments should be at the top of the function</td>\n<td align=\"center\">3</td>\n</tr>\n<tr>\n<td>[Gâ€‘22]</td>\n<td align=\"left\">Empty blocks should be removed or emit something</td>\n<td align=\"center\">1</td>\n</tr>\n<tr>\n<td>[Gâ€‘23]</td>\n<td align=\"left\">Use custom errors rather than <code>revert()</code>/<code>require()</code> strings to save gas</td>\n<td align=\"center\">95</td>\n</tr>\n</tbody>\n</table>\n<p>Total: 313 instances over 23 issues</p>\n<h2 id=\"g01--state-checks-unnecessarily-re-fetch-proposals\" style=\"position:relative;\"><a href=\"#g01--state-checks-unnecessarily-re-fetch-proposals\" aria-label=\"g01  state checks unnecessarily re fetch proposals permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Gâ€‘01]  State checks unnecessarily re-fetch <code>Proposal</code>s</h2>\n<p>Every call to <code>state()</code> fetches the <code>Proposal</code> storage variable, which is fetched again immediately afterwards by the caller. If instead there were a version of <code>state()</code> that took in a <code>Proposal storage</code> variable, the proposal could be fetched only once, saving the gas of the mapping lookup</p>\n<p><em>There are 5 instances of this issue. (For in-depth details on this and all further gas optimizations with multiple instances, please see the wardenâ€™s <a href=\"https://github.com/code-423n4/2022-08-nounsdao-findings/issues/164\">full report</a>.)</em></p>\n<h2 id=\"g02--multiple-addressid-mappings-can-be-combined-into-a-single-mapping-of-an-addressid-to-a-struct-where-appropriate\" style=\"position:relative;\"><a href=\"#g02--multiple-addressid-mappings-can-be-combined-into-a-single-mapping-of-an-addressid-to-a-struct-where-appropriate\" aria-label=\"g02  multiple addressid mappings can be combined into a single mapping of an addressid to a struct where appropriate permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Gâ€‘02]  Multiple <code>address</code>/ID mappings can be combined into a single <code>mapping</code> of an <code>address</code>/ID to a <code>struct</code>, where appropriate</h2>\n<p>Saves a storage slot for the mapping. Depending on the circumstances and sizes of types, can avoid a Gsset (<strong>20000 gas</strong>) per mapping combined. Reads and subsequent writes can also be cheaper when a function requires both values and they both fit in the same storage slot. Finally, if both fields are accessed in the same function, can save <strong>~42 gas per access</strong> due to <a href=\"https://gist.github.com/IllIllI000/ec23a57daa30a8f8ca8b9681c8ccefb0\">not having to recalculate the keyâ€™s keccak256 hash</a> (Gkeccak256 - 30 gas) and that calculationâ€™s associated stack operations.</p>\n<p><em>There is 1 instance of this issue:</em></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"49\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">base</span><span class=\"mtk1\">/</span><span class=\"mtk12\">ERC721Checkpointable</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">53</span><span class=\"mtk1\">        </span><span class=\"mtk11\">mapping</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\"> </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk11\">mapping</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint32</span><span class=\"mtk1\"> </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">Checkpoint</span><span class=\"mtk1\">)) </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">checkpoints</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">54</span><span class=\"mtk1\">    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">55</span><span class=\"mtk1\">        </span><span class=\"mtk3\">/// @notice The number of checkpoints for each account</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">56</span><span class=\"mtk1\">:       </span><span class=\"mtk11\">mapping</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\"> </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">uint32</span><span class=\"mtk1\">) </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">numCheckpoints</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L53-L56\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L53-L56</a></p>\n<h2 id=\"g03--structs-can-be-packed-into-fewer-storage-slots\" style=\"position:relative;\"><a href=\"#g03--structs-can-be-packed-into-fewer-storage-slots\" aria-label=\"g03  structs can be packed into fewer storage slots permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Gâ€‘03]  Structs can be packed into fewer storage slots</h2>\n<p>Each slot saved can avoid an extra Gsset (<strong>20000 gas</strong>) for the first setting of the struct. Subsequent reads as well as writes have smaller gas savings</p>\n<p><em>There are 3 instances of this issue.</em></p>\n<h2 id=\"g04--using-calldata-instead-of-memory-for-read-only-arguments-in-external-functions-saves-gas\" style=\"position:relative;\"><a href=\"#g04--using-calldata-instead-of-memory-for-read-only-arguments-in-external-functions-saves-gas\" aria-label=\"g04  using calldata instead of memory for read only arguments in external functions saves gas permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Gâ€‘04]  Using <code>calldata</code> instead of <code>memory</code> for read-only arguments in <code>external</code> functions saves gas</h2>\n<p>When a function with a <code>memory</code> array is called externally, the <code>abi.decode()</code> step has to use a for-loop to copy each index of the <code>calldata</code> to the <code>memory</code> index. <strong>Each iteration of this for-loop costs at least 60 gas</strong> (i.e. <code>60 * &#x3C;mem_array>.length</code>). Using <code>calldata</code> directly, obliviates the need for such a loop in the contract code and runtime execution. Note that even if an interface defines a function as having <code>memory</code> arguments, itâ€™s still valid for implementation contracs to use <code>calldata</code> arguments instead. </p>\n<p>If the array is passed to an <code>internal</code> function which passes the array to another internal function where the array is modified and therefore <code>memory</code> is used in the <code>external</code> call, itâ€™s still more gass-efficient to use <code>calldata</code> when the <code>external</code> function uses modifiers, since the modifiers may prevent the internal functions from being called. Structs have the same overhead as an array of length one</p>\n<p>Note that Iâ€™ve also flagged instances where the function is <code>public</code> but can be marked as <code>external</code> since itâ€™s not called by the contract, and cases where a constructor is involved</p>\n<p><em>There are 10 instances of this issue.</em></p>\n<h2 id=\"g05--using-storage-instead-of-memory-for-structsarrays-saves-gas\" style=\"position:relative;\"><a href=\"#g05--using-storage-instead-of-memory-for-structsarrays-saves-gas\" aria-label=\"g05  using storage instead of memory for structsarrays saves gas permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Gâ€‘05]  Using <code>storage</code> instead of <code>memory</code> for structs/arrays saves gas</h2>\n<p>When fetching data from a storage location, assigning the data to a <code>memory</code> variable causes all fields of the struct/array to be read from storage, which incurs a Gcoldsload (<strong>2100 gas</strong>) for <em>each</em> field of the struct/array. If the fields are read from the new memory variable, they incur an additional <code>MLOAD</code> rather than a cheap stack read. Instead of declearing the variable with the <code>memory</code> keyword, declaring the variable with the <code>storage</code> keyword and caching any fields that need to be re-read in stack variables, will be much cheaper, only incuring the Gcoldsload for the fields actually read. The only time it makes sense to read the whole struct/array into a <code>memory</code> variable, is if the full struct/array is being returned by the function, is being passed to a function that requires <code>memory</code>, or if the array/struct is being read from another <code>memory</code> array/struct</p>\n<p><em>There is 1 instance of this issue:</em></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"50\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOLogicV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">952</span><span class=\"mtk1\">:              </span><span class=\"mtk12\">DynamicQuorumParamsCheckpoint</span><span class=\"mtk1\"> </span><span class=\"mtk12\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk12\">cp</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">quorumParamsCheckpoints</span><span class=\"mtk1\">[</span><span class=\"mtk12\">center</span><span class=\"mtk1\">];</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L952\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L952</a></p>\n<h2 id=\"g06--state-variables-should-be-cached-in-stack-variables-rather-than-re-reading-them-from-storage\" style=\"position:relative;\"><a href=\"#g06--state-variables-should-be-cached-in-stack-variables-rather-than-re-reading-them-from-storage\" aria-label=\"g06  state variables should be cached in stack variables rather than re reading them from storage permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Gâ€‘06]  State variables should be cached in stack variables rather than re-reading them from storage</h2>\n<p>The instances below point to the second+ access of a state variable within a function. Caching of a state variable replace each Gwarmaccess (<strong>100 gas</strong>) with a much cheaper stack read. Other less obvious fixes/optimizations include having local memory caches of state variable structs, or having local caches of state variable contracts/addresses.</p>\n<p><em>There are 11 instances of this issue.</em></p>\n<h2 id=\"g07--multiple-accesses-of-a-mappingarray-should-use-a-local-variable-cache\" style=\"position:relative;\"><a href=\"#g07--multiple-accesses-of-a-mappingarray-should-use-a-local-variable-cache\" aria-label=\"g07  multiple accesses of a mappingarray should use a local variable cache permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Gâ€‘07]  Multiple accesses of a mapping/array should use a local variable cache</h2>\n<p>The instances below point to the second+ access of a value inside a mapping/array, within a function. Caching a mappingâ€™s value in a local <code>storage</code> or <code>calldata</code> variable when the value is accessed <a href=\"https://gist.github.com/IllIllI000/ec23a57daa30a8f8ca8b9681c8ccefb0\">multiple times</a>, saves <strong>~42 gas per access</strong> due to not having to recalculate the keyâ€™s keccak256 hash (Gkeccak256 - <strong>30 gas</strong>) and that calculationâ€™s associated stack operations. Caching an arrayâ€™s struct avoids recalculating the array offsets into memory/calldata</p>\n<p><em>There are 2 instances of this issue.</em></p>\n<h2 id=\"g08--internal-functions-only-called-once-can-be-inlined-to-save-gas\" style=\"position:relative;\"><a href=\"#g08--internal-functions-only-called-once-can-be-inlined-to-save-gas\" aria-label=\"g08  internal functions only called once can be inlined to save gas permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Gâ€‘08]  <code>internal</code> functions only called once can be inlined to save gas</h2>\n<p>Not inlining costs <strong>20 to 40 gas</strong> because of two extra <code>JUMP</code> instructions and additional stack operations needed for function calls.</p>\n<p><em>There are 7 instances of this issue.</em></p>\n<h2 id=\"g09--add-unchecked--for-subtractions-where-the-operands-cannot-underflow-because-of-a-previous-require-or-if-statement\" style=\"position:relative;\"><a href=\"#g09--add-unchecked--for-subtractions-where-the-operands-cannot-underflow-because-of-a-previous-require-or-if-statement\" aria-label=\"g09  add unchecked  for subtractions where the operands cannot underflow because of a previous require or if statement permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Gâ€‘09]  Add <code>unchecked {}</code> for subtractions where the operands cannot underflow because of a previous <code>require()</code> or <code>if</code>-statement</h2>\n<p><code>require(a &#x3C;= b); x = b - a</code> => <code>require(a &#x3C;= b); unchecked { x = b - a }</code></p>\n<p><em>There is 1 instance of this issue:</em></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"51\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">base</span><span class=\"mtk1\">/</span><span class=\"mtk12\">ERC721Checkpointable</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit require() on line 278</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">279</span><span class=\"mtk1\">:          </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk12\">a</span><span class=\"mtk1\"> - </span><span class=\"mtk12\">b</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L279\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L279</a></p>\n<h2 id=\"g10--arraylength-should-not-be-looked-up-in-every-loop-of-a-for-loop\" style=\"position:relative;\"><a href=\"#g10--arraylength-should-not-be-looked-up-in-every-loop-of-a-for-loop\" aria-label=\"g10  arraylength should not be looked up in every loop of a for loop permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Gâ€‘10]  <code>&#x3C;array>.length</code> should not be looked up in every loop of a <code>for</code>-loop</h2>\n<p>The overheads outlined below are <em>PER LOOP</em>, excluding the first loop</p>\n<ul>\n<li>storage arrays incur a Gwarmaccess (<strong>100 gas</strong>)</li>\n<li>memory arrays use <code>MLOAD</code> (<strong>3 gas</strong>)</li>\n<li>calldata arrays use <code>CALLDATALOAD</code> (<strong>3 gas</strong>)</li>\n</ul>\n<p>Caching the length changes each of these to a <code>DUP&#x3C;N></code> (<strong>3 gas</strong>), and gets rid of the extra <code>DUP&#x3C;N></code> needed to store the stack offset</p>\n<p><em>There are 8 instances of this issue.</em></p>\n<h2 id=\"g11--ii-should-be-uncheckediuncheckedi-when-it-is-not-possible-for-them-to-overflow-as-is-the-case-when-used-in-for--and-while-loops\" style=\"position:relative;\"><a href=\"#g11--ii-should-be-uncheckediuncheckedi-when-it-is-not-possible-for-them-to-overflow-as-is-the-case-when-used-in-for--and-while-loops\" aria-label=\"g11  ii should be uncheckediuncheckedi when it is not possible for them to overflow as is the case when used in for  and while loops permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Gâ€‘11]  <code>++i</code>/<code>i++</code> should be <code>unchecked{++i}</code>/<code>unchecked{i++}</code> when it is not possible for them to overflow, as is the case when used in <code>for</code>- and <code>while</code>-loops</h2>\n<p>The <code>unchecked</code> keyword is new in solidity version 0.8.0, so this only applies to that version or higher, which these instances are. This saves <strong>30-40 gas <a href=\"https://gist.github.com/hrkrshnn/ee8fabd532058307229d65dcd5836ddc#the-increment-in-for-loop-post-condition-can-be-made-unchecked\">per loop</a></strong></p>\n<p><em>There are 8 instances of this issue.</em></p>\n<h2 id=\"g12--requirerevert-strings-longer-than-32-bytes-cost-extra-gas\" style=\"position:relative;\"><a href=\"#g12--requirerevert-strings-longer-than-32-bytes-cost-extra-gas\" aria-label=\"g12  requirerevert strings longer than 32 bytes cost extra gas permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Gâ€‘12]  <code>require()</code>/<code>revert()</code> strings longer than 32 bytes cost extra gas</h2>\n<p>Each extra memory word of bytes past the original 32 <a href=\"https://gist.github.com/hrkrshnn/ee8fabd532058307229d65dcd5836ddc#consider-having-short-revert-strings\">incurs an MSTORE</a> which costs <strong>3 gas</strong></p>\n<p><em>There are 86 instances of this issue.</em></p>\n<h2 id=\"g13--optimize-names-to-save-gas\" style=\"position:relative;\"><a href=\"#g13--optimize-names-to-save-gas\" aria-label=\"g13  optimize names to save gas permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Gâ€‘13]  Optimize names to save gas</h2>\n<p><code>public</code>/<code>external</code> function names and <code>public</code> member variable names can be optimized to save gas. See <a href=\"https://gist.github.com/IllIllI000/a5d8b486a8259f9f77891a919febd1a9\">this</a> link for an example of how it works. Below are the interfaces/abstract contracts that can be optimized so that the most frequently-called functions use the least amount of gas possible during method lookup. Method IDs that have two leading zero bytes can save <strong>128 gas</strong> each during deployment, and renaming functions to have lower method IDs will save <strong>22 gas</strong> per call, <a href=\"https://medium.com/joyso/solidity-how-does-function-name-affect-gas-consumption-in-smart-contract-47d270d8ac92\">per sorted position shifted</a></p>\n<p><em>There are 5 instances of this issue.</em></p>\n<h2 id=\"g14--use-a-more-recent-version-of-solidity\" style=\"position:relative;\"><a href=\"#g14--use-a-more-recent-version-of-solidity\" aria-label=\"g14  use a more recent version of solidity permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Gâ€‘14]  Use a more recent version of solidity</h2>\n<p>Use a solidity version of at least 0.8.2 to get simple compiler automatic inlining\nUse a solidity version of at least 0.8.3 to get better struct packing and cheaper multiple storage reads\nUse a solidity version of at least 0.8.4 to get custom errors, which are cheaper at deployment than <code>revert()/require()</code> strings\nUse a solidity version of at least 0.8.10 to have external calls skip contract existence checks if the external call has a return value</p>\n<p><em>There is 1 instance of this issue:</em></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"52\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">base</span><span class=\"mtk1\">/</span><span class=\"mtk12\">ERC721Enumerable</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">28</span><span class=\"mtk1\">:   </span><span class=\"mtk12\">pragma</span><span class=\"mtk1\"> </span><span class=\"mtk12\">solidity</span><span class=\"mtk1\"> ^</span><span class=\"mtk7\">0.8</span><span class=\"mtk1\">.</span><span class=\"mtk7\">0</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Enumerable.sol#L28\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Enumerable.sol#L28</a></p>\n<h2 id=\"g15--i-costs-less-gas-than-i-especially-when-its-used-in-for-loops---ii---too\" style=\"position:relative;\"><a href=\"#g15--i-costs-less-gas-than-i-especially-when-its-used-in-for-loops---ii---too\" aria-label=\"g15  i costs less gas than i especially when its used in for loops   ii   too permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Gâ€‘15]  <code>++i</code> costs less gas than <code>i++</code>, especially when itâ€™s used in <code>for</code>-loops (<code>--i</code>/<code>i--</code> too)</h2>\n<p>Saves <strong>5 gas per loop</strong></p>\n<p><em>There are 10 instances of this issue.</em></p>\n<h2 id=\"g16--splitting-require-statements-that-use--saves-gas\" style=\"position:relative;\"><a href=\"#g16--splitting-require-statements-that-use--saves-gas\" aria-label=\"g16  splitting require statements that use  saves gas permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Gâ€‘16]  Splitting <code>require()</code> statements that use <code>&#x26;&#x26;</code> saves gas</h2>\n<p>See <a href=\"https://github.com/code-423n4/2022-01-xdefi-findings/issues/128\">this issue</a> which describes the fact that there is a larger deployment gas cost, but with enough runtime calls, the change ends up being cheaper by <strong>3 gas</strong></p>\n<p><em>There are 19 instances of this issue.</em></p>\n<h2 id=\"g17--usage-of-uintsints-smaller-than-32-bytes-256-bits-incurs-overhead\" style=\"position:relative;\"><a href=\"#g17--usage-of-uintsints-smaller-than-32-bytes-256-bits-incurs-overhead\" aria-label=\"g17  usage of uintsints smaller than 32 bytes 256 bits incurs overhead permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Gâ€‘17]  Usage of <code>uints</code>/<code>ints</code> smaller than 32 bytes (256 bits) incurs overhead</h2>\n<blockquote>\n<p>When using elements that are smaller than 32 bytes, your contractâ€™s gas usage may be higher. This is because the EVM operates on 32 bytes at a time. Therefore, if the element is smaller than that, the EVM must use more operations in order to reduce the size of the element from 32 bytes to the desired size.</p>\n</blockquote>\n<p><a href=\"https://docs.soliditylang.org/en/v0.8.11/internals/layout_in_storage.html\">https://docs.soliditylang.org/en/v0.8.11/internals/layout_in_storage.html</a>\nEach operation involving a <code>uint8</code> costs an extra <a href=\"https://gist.github.com/IllIllI000/9388d20c70f9a4632eb3ca7836f54977\"><strong>22-28 gas</strong></a> (depending on whether the other operand is also a variable of type <code>uint8</code>) as compared to ones involving <code>uint256</code>, due to the compiler having to clear the higher bits of the memory word before operating on the <code>uint8</code>, as well as the associated stack operations of doing so. Use a larger size then downcast where needed</p>\n<p><em>There is 1 instance of this issue:</em></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"53\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">base</span><span class=\"mtk1\">/</span><span class=\"mtk12\">ERC721Checkpointable</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">/// @audit uint32 upper</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">191</span><span class=\"mtk1\">:                  </span><span class=\"mtk12\">upper</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">center</span><span class=\"mtk1\"> - </span><span class=\"mtk7\">1</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L191\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L191</a></p>\n<h2 id=\"g18--using-private-rather-than-public-for-constants-saves-gas\" style=\"position:relative;\"><a href=\"#g18--using-private-rather-than-public-for-constants-saves-gas\" aria-label=\"g18  using private rather than public for constants saves gas permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Gâ€‘18]  Using <code>private</code> rather than <code>public</code> for constants, saves gas</h2>\n<p>If needed, the values can be read from the verified contract source code, or if there are multiple values there can be a single getter function that <a href=\"https://github.com/code-423n4/2022-08-frax/blob/90f55a9ce4e25bceed3a74290b854341d8de6afa/src/contracts/FraxlendPair.sol#L156-L178\">returns a tuple</a> of the values of all currently-public constants. Saves <strong>3406-3606 gas</strong> in deployment gas due to the compiler not having to create non-payable getter functions for deployment calldata, not having to store the bytes of the value outside of where itâ€™s used, and not adding another entry to the method ID table</p>\n<p><em>There are 31 instances of this issue.</em></p>\n<h2 id=\"g19--dont-compare-boolean-expressions-to-boolean-literals\" style=\"position:relative;\"><a href=\"#g19--dont-compare-boolean-expressions-to-boolean-literals\" aria-label=\"g19  dont compare boolean expressions to boolean literals permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Gâ€‘19]  Donâ€™t compare boolean expressions to boolean literals</h2>\n<p><code>if (&#x3C;x> == true)</code> => <code>if (&#x3C;x>)</code>, <code>if (&#x3C;x> == false)</code> => <code>if (!&#x3C;x>)</code></p>\n<p><em>There are 2 instances of this issue.</em></p>\n<h2 id=\"g20--division-by-two-should-use-bit-shifting\" style=\"position:relative;\"><a href=\"#g20--division-by-two-should-use-bit-shifting\" aria-label=\"g20  division by two should use bit shifting permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Gâ€‘20]  Division by two should use bit shifting</h2>\n<p><code>&#x3C;x> / 2</code> is the same as <code>&#x3C;x> >> 1</code>. While the compiler uses the <code>SHR</code> opcode to accomplish both, the version that uses division incurs an overhead of <a href=\"https://gist.github.com/IllIllI000/ec0e4e6c4f52a6bca158f137a3afd4ff\"><strong>20 gas</strong></a> due to <code>JUMP</code>s to and from a compiler utility function that introduces checks which can be avoided by using <code>unchecked {}</code> around the division by two</p>\n<p><em>There are 2 instances of this issue.</em></p>\n<h2 id=\"g21--require-or-revert-statements-that-check-input-arguments-should-be-at-the-top-of-the-function\" style=\"position:relative;\"><a href=\"#g21--require-or-revert-statements-that-check-input-arguments-should-be-at-the-top-of-the-function\" aria-label=\"g21  require or revert statements that check input arguments should be at the top of the function permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Gâ€‘21]  <code>require()</code> or <code>revert()</code> statements that check input arguments should be at the top of the function</h2>\n<p>Checks that involve constants should come before checks that involve state variables, function calls, and calculations. By doing these checks first, the function is able to revert before wasting a Gcoldsload (<strong>2100 gas*</strong>) in a function that may ultimately revert in the unhappy case.</p>\n<p><em>There are 3 instances of this issue.</em></p>\n<h2 id=\"g22--empty-blocks-should-be-removed-or-emit-something\" style=\"position:relative;\"><a href=\"#g22--empty-blocks-should-be-removed-or-emit-something\" aria-label=\"g22  empty blocks should be removed or emit something permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Gâ€‘22]  Empty blocks should be removed or emit something</h2>\n<p>The code should be refactored such that they no longer exist, or the block should do something useful, such as emitting an event or reverting. If the contract is meant to be extended, the contract should be <code>abstract</code> and the function signatures be added without any default implementation. If the block is an empty <code>if</code>-statement block to avoid doing subsequent checks in the else-if/else conditions, the else-if/else conditions should be nested under the negation of the if-statement, because they involve different classes of checks, which may lead to the introduction of errors when the code is later modified (<code>if(x){}else if(y){...}else{...}</code> => <code>if(!x){if(y){...}else{...}}</code>). Empty <code>receive()</code>/<code>fallback() payable</code> functions that are not used, can be removed to save deployment gas.</p>\n<p><em>There is 1 instance of this issue:</em></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"54\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">governance</span><span class=\"mtk1\">/</span><span class=\"mtk12\">NounsDAOLogicV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">1030</span><span class=\"mtk1\">:     </span><span class=\"mtk11\">receive</span><span class=\"mtk1\">() </span><span class=\"mtk12\">external</span><span class=\"mtk1\"> </span><span class=\"mtk12\">payable</span><span class=\"mtk1\"> {}</span></span></span></code></pre>\n<p><a href=\"https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L1030\">https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L1030</a></p>\n<h2 id=\"g23--use-custom-errors-rather-than-revertrequire-strings-to-save-gas\" style=\"position:relative;\"><a href=\"#g23--use-custom-errors-rather-than-revertrequire-strings-to-save-gas\" aria-label=\"g23  use custom errors rather than revertrequire strings to save gas permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Gâ€‘23]  Use custom errors rather than <code>revert()</code>/<code>require()</code> strings to save gas</h2>\n<p>Custom errors are available from solidity version 0.8.4. Custom errors save <a href=\"https://gist.github.com/IllIllI000/ad1bd0d29a0101b25e57c293b4b0c746\"><strong>~50 gas</strong></a> each time theyâ€™re hit by <a href=\"https://blog.soliditylang.org/2021/04/21/custom-errors/#errors-in-depth\">avoiding having to allocate and store the revert string</a>. Not defining the strings also save deployment gas</p>\n<p><em>There are 95 instances of this issue.</em></p>\n<hr>\n<h1 id=\"disclosures\" style=\"position:relative;\"><a href=\"#disclosures\" aria-label=\"disclosures permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disclosures</h1>\n<p>C4 is an open organization governed by participants in the community.</p>\n<p>C4 Contests incentivize the discovery of exploits, vulnerabilities, and bugs in smart contracts. Security researchers are rewarded at an increasing rate for finding higher-risk issues. Contest submissions are judged by a knowledgeable security researcher and solidity developer and disclosed to sponsoring developers. C4 does not conduct formal verification regarding the provided code but instead provides final verification.</p>\n<p>C4 does not provide any guarantee or warranty regarding the security of this project. All smart contract software should be used at the sole risk and responsibility of users.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .dark-default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .dark-default-dark .mtk1 { color: #D4D4D4; }\n  .dark-default-dark .mtk7 { color: #B5CEA8; }\n  .dark-default-dark .mtk4 { color: #569CD6; }\n  .dark-default-dark .mtk8 { color: #CE9178; }\n  .dark-default-dark .mtk11 { color: #DCDCAA; }\n  .dark-default-dark .mtk12 { color: #9CDCFE; }\n  .dark-default-dark .mtk15 { color: #C586C0; }\n  .dark-default-dark .mtk3 { color: #6A9955; }\n  .dark-default-dark .mtk10 { color: #4EC9B0; }\n  .dark-default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>",
  "toc": "<ul>\n<li>\n<p><a href=\"#overview\">Overview</a></p>\n<ul>\n<li><a href=\"#about-c4\">About C4</a></li>\n<li><a href=\"#wardens\">Wardens</a></li>\n</ul>\n</li>\n<li><a href=\"#summary\">Summary</a></li>\n<li><a href=\"#scope\">Scope</a></li>\n<li><a href=\"#severity-criteria\">Severity Criteria</a></li>\n<li>\n<p><a href=\"#high-risk-findings-1\">High Risk Findings (1)</a></p>\n<ul>\n<li><a href=\"#h-01-erc721checkpointable-delegatebysig-allows-the-user-to-vote-to-address-0-which-causes-the-user-to-permanently-lose-his-vote-and-cannot-transfer-his-nft\">[H-01] ERC721Checkpointable: delegateBySig allows the user to vote to address 0, which causes the user to permanently lose his vote and cannot transfer his NFT.</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#medium-risk-findings-3\">Medium Risk Findings (3)</a></p>\n<ul>\n<li><a href=\"#m-01-voters-can-burn-large-amounts-of-ether-by-submitting-votes-with-long-reason-strings\">[M-01] Voters can burn large amounts of Ether by submitting votes with long reason strings</a></li>\n<li><a href=\"#m-02-user-a-cannot-cancel-user-bs-proposal-when-user-bs-prior-number-of-votes-at-relevant-block-is-same-as-proposal-threshold-which-contradicts-the-fact-that-user-b-actually-cannot-create-the-proposal-when-the-prior-number-of-votes-is-same-as-proposal-threshold\">[M-02] User A cannot cancel User Bâ€™s proposal when User Bâ€™s prior number of votes at relevant block is same as proposal threshold, which contradicts the fact that User B actually cannot create the proposal when the prior number of votes is same as proposal threshold</a></li>\n<li><a href=\"#m-03-loss-of-veto-power-can-lead-to-51-attack\">[M-03] Loss of Veto Power can Lead to 51% Attack</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#low-risk-and-non-critical-issues\">Low Risk and Non-Critical Issues</a></p>\n<ul>\n<li><a href=\"#low-risk-issues\">Low Risk Issues</a></li>\n<li><a href=\"#l01--nouns-will-not-be-able-to-be-transferred-once-the-blocknumber-passes-typeuint32max\">Lâ€‘01  Nouns will not be able to be transferred once the <code>block.number</code> passes <code>type(uint32).max</code></a></li>\n<li><a href=\"#l02--unusedempty-receivefallback-function\">Lâ€‘02  Unused/empty <code>receive()</code>/<code>fallback()</code> function</a></li>\n<li><a href=\"#l03--missing-checks-for-address0x0-when-assigning-values-to-address-state-variables\">Lâ€‘03  Missing checks for <code>address(0x0)</code> when assigning values to <code>address</code> state variables</a></li>\n<li><a href=\"#non-critical-issues\">Non-Critical Issues</a></li>\n<li><a href=\"#n01--public-functions-not-called-by-the-contract-should-be-declared-external-instead\">Nâ€‘01  <code>public</code> functions not called by the contract should be declared <code>external</code> instead</a></li>\n<li><a href=\"#n02--non-assembly-method-available\">Nâ€‘02  Non-assembly method available</a></li>\n<li><a href=\"#n03--2n---1-should-be-re-written-as-typeuintnmax\">Nâ€‘03  <code>2**&#x3C;n> - 1</code> should be re-written as <code>type(uint&#x3C;n>).max</code></a></li>\n<li><a href=\"#n04--constants-should-be-defined-rather-than-using-magic-numbers\">Nâ€‘04  <code>constant</code>s should be defined rather than using magic numbers</a></li>\n<li><a href=\"#n05--use-a-more-recent-version-of-solidity\">Nâ€‘05  Use a more recent version of solidity</a></li>\n<li><a href=\"#n06--expressions-for-constant-values-such-as-a-call-to-keccak256-should-use-immutable-rather-than-constant\">Nâ€‘06  Expressions for constant values such as a call to <code>keccak256()</code>, should use <code>immutable</code> rather than <code>constant</code></a></li>\n<li><a href=\"#n07--constant-redefined-elsewhere\">Nâ€‘07  Constant redefined elsewhere</a></li>\n<li><a href=\"#n08--lines-are-too-long\">Nâ€‘08  Lines are too long</a></li>\n<li><a href=\"#n09--non-libraryinterface-files-should-use-fixed-compiler-versions-not-floating-ones\">Nâ€‘09  Non-library/interface files should use fixed compiler versions, not floating ones</a></li>\n<li><a href=\"#n10--event-is-missing-indexed-fields\">Nâ€‘10  Event is missing <code>indexed</code> fields</a></li>\n<li><a href=\"#n11--not-using-the-named-return-variables-anywhere-in-the-function-is-confusing\">Nâ€‘11  Not using the named return variables anywhere in the function is confusing</a></li>\n<li><a href=\"#n12--typos\">Nâ€‘12  Typos</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#gas-optimizations\">Gas Optimizations</a></p>\n<ul>\n<li><a href=\"#summary-1\">Summary</a></li>\n<li><a href=\"#g01--state-checks-unnecessarily-re-fetch-proposals\">Gâ€‘01  State checks unnecessarily re-fetch <code>Proposal</code>s</a></li>\n<li><a href=\"#g02--multiple-addressid-mappings-can-be-combined-into-a-single-mapping-of-an-addressid-to-a-struct-where-appropriate\">Gâ€‘02  Multiple <code>address</code>/ID mappings can be combined into a single <code>mapping</code> of an <code>address</code>/ID to a <code>struct</code>, where appropriate</a></li>\n<li><a href=\"#g03--structs-can-be-packed-into-fewer-storage-slots\">Gâ€‘03  Structs can be packed into fewer storage slots</a></li>\n<li><a href=\"#g04--using-calldata-instead-of-memory-for-read-only-arguments-in-external-functions-saves-gas\">Gâ€‘04  Using <code>calldata</code> instead of <code>memory</code> for read-only arguments in <code>external</code> functions saves gas</a></li>\n<li><a href=\"#g05--using-storage-instead-of-memory-for-structsarrays-saves-gas\">Gâ€‘05  Using <code>storage</code> instead of <code>memory</code> for structs/arrays saves gas</a></li>\n<li><a href=\"#g06--state-variables-should-be-cached-in-stack-variables-rather-than-re-reading-them-from-storage\">Gâ€‘06  State variables should be cached in stack variables rather than re-reading them from storage</a></li>\n<li><a href=\"#g07--multiple-accesses-of-a-mappingarray-should-use-a-local-variable-cache\">Gâ€‘07  Multiple accesses of a mapping/array should use a local variable cache</a></li>\n<li><a href=\"#g08--internal-functions-only-called-once-can-be-inlined-to-save-gas\">Gâ€‘08  <code>internal</code> functions only called once can be inlined to save gas</a></li>\n<li><a href=\"#g09--add-unchecked--for-subtractions-where-the-operands-cannot-underflow-because-of-a-previous-require-or-if-statement\">Gâ€‘09  Add <code>unchecked {}</code> for subtractions where the operands cannot underflow because of a previous <code>require()</code> or <code>if</code>-statement</a></li>\n<li><a href=\"#g10--arraylength-should-not-be-looked-up-in-every-loop-of-a-for-loop\">Gâ€‘10  <code>&#x3C;array>.length</code> should not be looked up in every loop of a <code>for</code>-loop</a></li>\n<li><a href=\"#g11--ii-should-be-uncheckediuncheckedi-when-it-is-not-possible-for-them-to-overflow-as-is-the-case-when-used-in-for--and-while-loops\">Gâ€‘11  <code>++i</code>/<code>i++</code> should be <code>unchecked{++i}</code>/<code>unchecked{i++}</code> when it is not possible for them to overflow, as is the case when used in <code>for</code>- and <code>while</code>-loops</a></li>\n<li><a href=\"#g12--requirerevert-strings-longer-than-32-bytes-cost-extra-gas\">Gâ€‘12  <code>require()</code>/<code>revert()</code> strings longer than 32 bytes cost extra gas</a></li>\n<li><a href=\"#g13--optimize-names-to-save-gas\">Gâ€‘13  Optimize names to save gas</a></li>\n<li><a href=\"#g14--use-a-more-recent-version-of-solidity\">Gâ€‘14  Use a more recent version of solidity</a></li>\n<li><a href=\"#g15--i-costs-less-gas-than-i-especially-when-its-used-in-for-loops---ii---too\">Gâ€‘15  <code>++i</code> costs less gas than <code>i++</code>, especially when itâ€™s used in <code>for</code>-loops (<code>--i</code>/<code>i--</code> too)</a></li>\n<li><a href=\"#g16--splitting-require-statements-that-use--saves-gas\">Gâ€‘16  Splitting <code>require()</code> statements that use <code>&#x26;&#x26;</code> saves gas</a></li>\n<li><a href=\"#g17--usage-of-uintsints-smaller-than-32-bytes-256-bits-incurs-overhead\">Gâ€‘17  Usage of <code>uints</code>/<code>ints</code> smaller than 32 bytes (256 bits) incurs overhead</a></li>\n<li><a href=\"#g18--using-private-rather-than-public-for-constants-saves-gas\">Gâ€‘18  Using <code>private</code> rather than <code>public</code> for constants, saves gas</a></li>\n<li><a href=\"#g19--dont-compare-boolean-expressions-to-boolean-literals\">Gâ€‘19  Donâ€™t compare boolean expressions to boolean literals</a></li>\n<li><a href=\"#g20--division-by-two-should-use-bit-shifting\">Gâ€‘20  Division by two should use bit shifting</a></li>\n<li><a href=\"#g21--require-or-revert-statements-that-check-input-arguments-should-be-at-the-top-of-the-function\">Gâ€‘21  <code>require()</code> or <code>revert()</code> statements that check input arguments should be at the top of the function</a></li>\n<li><a href=\"#g22--empty-blocks-should-be-removed-or-emit-something\">Gâ€‘22  Empty blocks should be removed or emit something</a></li>\n<li><a href=\"#g23--use-custom-errors-rather-than-revertrequire-strings-to-save-gas\">Gâ€‘23  Use custom errors rather than <code>revert()</code>/<code>require()</code> strings to save gas</a></li>\n</ul>\n</li>\n<li><a href=\"#disclosures\">Disclosures</a></li>\n</ul>",
  "md": "\n# Overview\n\n## About C4\n\nCode4rena (C4) is an open organization consisting of security researchers, auditors, developers, and individuals with domain expertise in smart contracts.\n\nA C4 audit contest is an event in which community participants, referred to as Wardens, review, audit, or analyze smart contract logic in exchange for a bounty provided by sponsoring projects.\n\nDuring the audit contest outlined in this document, C4 conducted an analysis of the Nouns DAO smart contract system written in Solidity. The audit contest took place between August 22â€”August 27 2022.\n\n## Wardens\n\n168 Wardens contributed reports to the Nouns DAO contest:\n\n  1. rbserver\n  1. [Respx](https://twitter.com/RespxR)\n  1. Lambda\n  1. KIntern&#95;NA (TrungOre and duc)\n  1. [berndartmueller](https://twitter.com/berndartmueller)\n  1. [csanuragjain](https://twitter.com/csanuragjain)\n  1. cccz\n  1. zzzitron\n  1. [bin2chen](https://twitter.com/bin2chen)\n  1. IEatBabyCarrots\n  1. jayphbee\n  1. [Deivitto](https://twitter.com/Deivitto)\n  1. [0xSmartContract](https://twitter.com/0xSmartContract)\n  1. 0xDjango\n  1. [Aymen0909](https://github.com/Aymen1001)\n  1. [Ch&#95;301](https://twitter.com/0xch301)\n  1. [TomJ](https://mobile.twitter.com/tomj_bb)\n  1. IllIllI\n  1. [0xNazgul](https://twitter.com/0xNazgul)\n  1. JohnSmith\n  1. mics\n  1. CodingNameKiki\n  1. [Dravee](https://twitter.com/BowTiedDravee)\n  1. [JC](https://twitter.com/sm4rtcontr4ct)\n  1. 0x1f8b\n  1. Rolezn\n  1. [m&#95;Rassska](https://t.me/Road220)\n  1. cRat1st0s\n  1. Bnke0x0\n  1. &#95;141345&#95;\n  1. [GalloDaSballo](https://twitter.com/gallodasballo)\n  1. [gogo](https://www.linkedin.com/in/georgi-nikolaev-georgiev-978253219)\n  1. 0xNineDec\n  1. [Funen](https://instagram.com/vanensurya)\n  1. [oyc&#95;109](https://twitter.com/andyfeili)\n  1. robee\n  1. ReyAdmirado\n  1. [pfapostol](https://t.me/pfahard)\n  1. ElKu\n  1. [c3phas](https://twitter.com/c3ph_)\n  1. ajtra\n  1. [Sm4rty](https://twitter.com/Sm4rty_)\n  1. erictee\n  1. 0xkatana\n  1. sikorico\n  1. Olivierdem\n  1. [carlitox477](https://twitter.com/CAA1994)\n  1. saian\n  1. [hyh](https://twitter.com/0xhyh)\n  1. brgltd\n  1. bobirichman\n  1. [seyni](https://twitter.com/seynixyz)\n  1. ladboy233\n  1. [fatherOfBlocks](https://twitter.com/father0fBl0cks)\n  1. [prasantgupta52](https://twitter.com/prasantgupta52)\n  1. [ret2basic](https://twitter.com/ret2basic)\n  1. [Tomo](https://tom-sol.notion.site/Who-am-I-3b4dc28e77b647eb90794735a94dd38e)\n  1. [durianSausage](https://github.com/lyciumlee)\n  1. LeoS\n  1. sryysryy\n  1. simon135\n  1. GimelSec ([rayn](https://twitter.com/rayn731) and sces60107)\n  1. [catchup](https://twitter.com/catchup22)\n  1. Waze\n  1. delfin454000\n  1. [Guardian](https://twitter.com/GuardianAudits)\n  1. d3e4\n  1. lukris02\n  1. 0xbepresent\n  1. [CertoraInc](https://twitter.com/CertoraInc) (egjlmn1, [OriDabush](https://twitter.com/ori_dabush), ItayG, shakedwinder, and RoiEvenHaim)\n  1. [pauliax](https://twitter.com/SolidityDev)\n  1. [Rohan16](https://twitter.com/ROHANJH56009256)\n  1. rvierdiiev\n  1. 0x040\n  1. [rfa](https://www.instagram.com/riyan_rfa/)\n  1. DimitarDimitrov\n  1. [Ruhum](https://twitter.com/0xruhum)\n  1. sach1r0\n  1. djxploit\n  1. RaymondFam\n  1. &#95;Adam\n  1. [Chom](https://chom.dev)\n  1. SooYa\n  1. Bjorn&#95;bug\n  1. R2\n  1. tnevler\n  1. [mrpathfindr](https://veranos.io)\n  1. [natzuu](https://twitter.com/natzuu33)\n  1. DevABDee\n  1. Saintcode&#95;\n  1. [rokinot](twitter.com/rokinot)\n  1. Noah3o6\n  1. wagmi\n  1. auditor0517\n  1. [Jeiwan](https://jeiwan.net)\n  1. xiaoming90\n  1. 0bi\n  1. 0x1337\n  1. [rajatbeladiya](https://twitter.com/rajat_beladiya)\n  1. [sseefried](http://seanseefried.org/blog)\n  1. [exd0tpy](https://github.com/exd0tpy)\n  1. [0xRajeev](https://twitter.com/0xRajeev)\n  1. dipp\n  1. 0xSky\n  1. asutorufos\n  1. Soosh\n  1. yixxas\n  1. tonisives\n  1. [shenwilly](https://twitter.com/shenwilly_)\n  1. p&#95;crypt0\n  1. zkhorse ([karmacoma](twitter.com/0xkarmacoma) and horsefacts)\n  1. [JansenC](https://www.linkedin.com/in/jansen-moreira/?locale&#x3D;en_US)\n  1. 0xmatt\n  1. pashov\n  1. [Haruxe](twitter.com/haruxeETH)\n  1. android69\n  1. [8olidity](https://twitter.com/8olidity)\n  1. Trabajo&#95;de&#95;mates (Saintcode_ and tay054)\n  1. [z3s](https://github.com/z3s/)\n  1. [throttle](https://twitter.com/Throt7le)\n  1. [joestakey](https://twitter.com/JoeStakey)\n  1. [martin](https://github.com/martin-petrov03)\n  1. Junnon\n  1. ch0bu\n  1. samruna\n  1. jag\n  1. Shishigami\n  1. Ben\n  1. [ignacio](https://twitter.com/0xheynacho)\n  1. [SaharAP](https://twitter.com/SAPanahloo)\n  1. [BipinSah](https://twitter.com/BipinSah745)\n  1. bulej93\n  1. lucacez\n  1. exolorkistis\n  1. [zishansami](https://zishansami102.github.io/)\n  1. [Tomio](https://twitter.com/meidhiwirara)\n  1. [Fitraldys](https://twitter.com/fitraldys)\n  1. [medikko](https://twitter.com/mehmeddukov)\n  1. EthLedger\n  1. [shr1ftyy](https://github.com/Shr1ftyy)\n  1. rotcivegaf\n  1. ak1\n  1. karanctf\n  1. shark\n  1. 0xc0ffEE\n  1. Amithuddar\n  1. SerMyVillage\n  1. 2997ms\n  1. newfork01\n  1. RoiEvenHaim\n  1. Polandia94\n  1. tay054\n  1. Yiko\n  1. ACai\n  1. francoHacker\n  1. [Randyyy](https://twitter.com/randyyramadhan)\n  1. Diraco\n  1. [IgnacioB](https://twitter.com/AdonaiR6)\n  1. peritoflores\n  1. [a12jmx](https://twitter.com/a12jmx)\n\nThis contest was judged by [gzeon](https://twitter.com/gzeon).\n\nFinal report assembled by [itsmetechjay](https://twitter.com/itsmetechjay).\n\n# Summary\n\nThe C4 analysis yielded an aggregated total of 4 unique vulnerabilities. Of these vulnerabilities, 1 received a risk rating in the category of HIGH severity and 3 received a risk rating in the category of MEDIUM severity.\n\nAdditionally, C4 analysis included 116 reports detailing issues with a risk rating of LOW severity or non-critical. There were also 126 reports recommending gas optimizations.\n\nAll of the issues presented here are linked back to their original finding.\n\n# Scope\n\nThe code under review can be found within the [C4 Nouns DAO contest repository](https://github.com/code-423n4/2022-08-nounsdao), and is composed of 6 smart contracts written in the Solidity programming language and includes 2,412 lines of Solidity code.\n\n# Severity Criteria\n\nC4 assesses the severity of disclosed vulnerabilities according to a methodology based on [OWASP standards](https://owasp.org/www-community/OWASP_Risk_Rating_Methodology).\n\nVulnerabilities are divided into three primary risk categories: high, medium, and low/non-critical.\n\nHigh-level considerations for vulnerabilities span the following key areas when conducting assessments:\n\n- Malicious Input Handling\n- Escalation of privileges\n- Arithmetic\n- Gas use\n\nFurther information regarding the severity criteria referenced throughout the submission review process, please refer to the documentation provided on [the C4 website](https://code4rena.com).\n\n# High Risk Findings (1)\n## [[H-01] ERC721Checkpointable: delegateBySig allows the user to vote to address 0, which causes the user to permanently lose his vote and cannot transfer his NFT.](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/157)\n_Submitted by cccz, also found by berndartmueller, bin2chen, csanuragjain, IEatBabyCarrots, jayphbee, KIntern&#95;NA, Lambda, and zzzitron_\n\nIn the ERC721Checkpointable contract, when the user votes with the delegate function, the delegatee will not be address 0.\n\n        function delegate(address delegatee) public {\n            if (delegatee == address(0)) delegatee = msg.sender;\n            return _delegate(msg.sender, delegatee);\n        }\n\nHowever, there is no such restriction in the delegateBySig function, which allows the user to vote to address 0.\n\n        function delegateBySig(\n            address delegatee,\n            uint256 nonce,\n            uint256 expiry,\n            uint8 v,\n            bytes32 r,\n            bytes32 s\n        ) public {\n            bytes32 domainSeparator = keccak256(\n                abi.encode(DOMAIN_TYPEHASH, keccak256(bytes(name())), getChainId(), address(this))\n            );\n            bytes32 structHash = keccak256(abi.encode(DELEGATION_TYPEHASH, delegatee, nonce, expiry));\n            bytes32 digest = keccak256(abi.encodePacked('\\x19\\x01', domainSeparator, structHash));\n            address signatory = ecrecover(digest, v, r, s);\n            require(signatory != address(0), 'ERC721Checkpointable::delegateBySig: invalid signature');\n            require(nonce == nonces[signatory]++, 'ERC721Checkpointable::delegateBySig: invalid nonce');\n            require(block.timestamp <= expiry, 'ERC721Checkpointable::delegateBySig: signature expired');\n            return _delegate(signatory, delegatee);\n        }\n\nIf user A votes to address 0 in the delegateBySig function, \\_delegates\\[A] will be address 0, but the delegates function will return the address of user A and getCurrentVotes(A) will return 0.\n\n        function _delegate(address delegator, address delegatee) internal {\n            /// @notice differs from `_delegate()` in `Comp.sol` to use `delegates` override method to simulate auto-delegation\n            address currentDelegate = delegates(delegator);\n\n            _delegates[delegator] = delegatee;\n    ...\n        function delegates(address delegator) public view returns (address) {\n            address current = _delegates[delegator];\n            return current == address(0) ? delegator : current;\n        }\n\nLater, if user A votes to another address or transfers NFT, the \\_moveDelegates function will fail due to overflow, which makes user A lose votes forever and cannot transfer NFT.\n\n        function _moveDelegates(\n            address srcRep,\n            address dstRep,\n            uint96 amount\n        ) internal {\n            if (srcRep != dstRep && amount > 0) {\n                if (srcRep != address(0)) {\n                    uint32 srcRepNum = numCheckpoints[srcRep];\n                    uint96 srcRepOld = srcRepNum > 0 ? checkpoints[srcRep][srcRepNum - 1].votes : 0;\n                    uint96 srcRepNew = sub96(srcRepOld, amount, 'ERC721Checkpointable::_moveDelegates: amount underflows'); // auditor : overflow here\n                    _writeCheckpoint(srcRep, srcRepNum, srcRepOld, srcRepNew);\n                }\n\nOn the other hand, since the burn function also fails, this can also be used to prevent the NFT from being burned by the minter\n\n        function burn(uint256 nounId) public override onlyMinter {\n            _burn(nounId);\n            emit NounBurned(nounId);\n        }\n    ...\n        function _burn(uint256 tokenId) internal virtual {\n            address owner = ERC721.ownerOf(tokenId);\n\n            _beforeTokenTransfer(owner, address(0), tokenId);\n    ...\n        function _beforeTokenTransfer(\n            address from,\n            address to,\n            uint256 tokenId\n        ) internal override {\n            super._beforeTokenTransfer(from, to, tokenId);\n\n            /// @notice Differs from `_transferTokens()` to use `delegates` override method to simulate auto-delegation\n            _moveDelegates(delegates(from), delegates(to), 1);\n        }\n\n### Proof of Concept\n\n<https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L126-L144>\n\n<https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L88-L91>\n\n<https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L97-L106>\n\n<https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L197-L208>\n\n### Recommended Mitigation Steps\n\nConsider requiring in the `delegateBySig` function that delegatee cannot be address 0.\n\n```diff\n    function delegateBySig(\n        address delegatee,\n        uint256 nonce,\n        uint256 expiry,\n        uint8 v,\n        bytes32 r,\n        bytes32 s\n    ) public {\n+ require(delegatee != address(0));\n```\n**[eladmallel (Nouns DAO) confirmed and commented](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/157#issuecomment-1232007061):**\n > We agree this is a bug that has existed since Nouns launched, and plan to fix the bug with the suggested requirement that delegatee should not be address(0).\n> \n> Worth noting that this fix will not have a positive effect on Nouns, as the token is already deployed and not upgradable. \n\n\n\n***\n\n \n# Medium Risk Findings (3)\n## [[M-01] Voters can burn large amounts of Ether by submitting votes with long reason strings](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/174)\n_Submitted by Respx_\n\n<https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L518-L524>\n\n<https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L533-L544>\n\n<https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L98>\n\n### Vulnerability Details\n\nVoters can burn large amounts of Ether by submitting votes with long reason strings\n\n<https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L518-L524>\n\n<https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L533-L544>\n\n<https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L98>\n\nThe only limits to how long a string argument to a function call can be is the block gas limit of the EVM, currently 30 million. It is therefore possible for a user to call `NounsDAOLogicV2.castRefundableVoteWithReason()` with a very, very long `reason` string. `castRefundableVoteInternal()` emits an event that includes `reason` on line 540, which is within the region of code covered by gas refunds (gas refunds are measured from `startGas` on line 538). Because of this, gas refunds will include the gas price of emitting this event, which could potentially be very large.\n\n### Impact\n\nThis issue is partially mitigated by the fact that the voter will still bear the cost of the massive calldata usage. `NounsDAOLogicV2` covers this with a fixed value of `REFUND_BASE_GAS` (36000), but the real transaction overhead is far larger when submitting a `reason` string that is many thousands of characters in length. Therefore, the voter ends up losing roughly as much as is drained from the `NounsDAOLogicV2` contract by the refund.\nNonetheless, I still think this is a valid high funding as the protocol will not want to rely purely on this economic protection. Some risk scenarios:\n\n1.  It is quite possible that calldata prices could decrease in future, perhaps as part of catering for rollups. This could make the attack suddenly far more viable.\n2.  A voter might have some motive to want to emit some arbitrary text as an Ethereum event, and simply exploit this system to do so.\n3.  A voter might want to maliciously drain the Ether, perhaps to damage the protocol's reputation.\n4.  As in 3, this could be achieved by emptying out the last funds in \\`\\`NounsDAOLogicV2\\` and so denying many other voters their voting refunds.\n\n### Tools Used\n\nHardhat testing\n\n### Recommended Mitigation Steps\n\n2 alternative ideas:\n\n1.  Move the `emit VoteCast` outside of the gas calculation region of the code and increase `REFUND_BASE_GAS` to cover an event with a reasonable length of string.\n2.  Change the type of `reason` to `bytes` and add a check to its length in `castRefundableVoteWithReason()`, reverting if it is too long.\n\n### Proof of Concept\n\nThe single vote in this test burns around 0.25 Ether from the `NounsDAOLogicV2` contract.\nThis test runs slowly and is assuming a base fee of 500 gwei. Obviously if the base fee were higher, the gas burnt would also be higher.\nThe numbers are printed out with a rather messy `console.log()` in the middle of the test output. Apologies for the bad presentation, but on the bright side you can adjust the numbers and see different results.\n\n```diff\ndiff --git a/hardhat.config.ts b/hardhat.config.ts\nindex 6d469b0..dc51148 100644\n--- a/hardhat.config.ts\n+++ b/hardhat.config.ts\n@@ -34,7 +34,7 @@ const config: HardhatUserConfig = {\n         : [process.env.WALLET_PRIVATE_KEY!].filter(Boolean),\n     },\n     hardhat: {\n-      initialBaseFeePerGas: 0,\n+      initialBaseFeePerGas: 500_000_000_000,\n     },\n   },\n   etherscan: {\n@@ -50,12 +50,12 @@ const config: HardhatUserConfig = {\n   gasReporter: {\n     enabled: !process.env.CI,\n     currency: 'USD',\n-    gasPrice: 50,\n+    gasPrice: 500,\n     src: 'contracts',\n     coinmarketcap: '7643dfc7-a58f-46af-8314-2db32bdd18ba',\n   },\n   mocha: {\n-    timeout: 60_000,\n+    timeout: 600_000,\n   },\n };\n export default config;\n```\n\n```diff\ndiff --git a/test/governance/NounsDAO/V2/voteRefund.test.ts b/test/governance/NounsDAO/V2/voteRefundPOC.test.ts\nindex d34ff4b..4c268a3 100644\n--- a/test/governance/NounsDAO/V2/voteRefund.test.ts\n+++ b/test/governance/NounsDAO/V2/voteRefundPOC.test.ts\n@@ -162,6 +162,30 @@ describe('Vote Refund', () => {\n   });\n \n   describe('castRefundableVoteWithReason', () => {\n+    it(\"accepts excessively long reason strings\", async () => {\n+      await fundGov();\n+      const balanceBefore = await user.getBalance();\n+      const govBalanceBefore = await ethers.provider.getBalance(gov.address);\n+      const tx = await gov\n+        .connect(user)\n+        .castRefundableVoteWithReason(1, 1, junkString(50_000), {\n+          maxPriorityFeePerGas: MAX_PRIORITY_FEE_CAP,\n+          gasLimit: 24000000,\n+        });\n+      const r = await tx.wait();\n+      const balanceDiff = balanceBefore.sub(await user.getBalance());\n+      const govBalanceDiff = govBalanceBefore.sub(\n+        await ethers.provider.getBalance(gov.address)\n+      );\n+      const govBalanceAfter = await ethers.provider.getBalance(gov.address);\n+      console.log(\"USER BALANCE DIFF:\", ethers.utils.formatEther(balanceDiff));\n+      console.log(\n+        \"GOV BALANCE DIFF:\",\n+        ethers.utils.formatEther(govBalanceDiff)\n+      );\n+      console.log(\"TX COST:\", ethers.utils.formatEther(await txCostInEth(r)));\n+\n+    });\n     it('refunds users with votes', async () => {\n       await fundGov();\n       const balanceBefore = await user.getBalance();\n@@ -284,6 +308,15 @@ describe('Vote Refund', () => {\n     expect(refundEvent!.args!.refundAmount).to.be.closeTo(expectedCost, REFUND_ERROR_MARGIN);\n   }\n \n+  function junkString(iterations: number = 100) {\n+    var x = \"Ab Cd Ef Gh Ij \";\n+    const y = \"Ab Cd Ef Gh Ij\";\n+    for (var i = 0; i < iterations; i++) {\n+      x += y;\n+    }\n+    return x;\n+  }\n+\n   async function submitProposal(u: SignerWithAddress) {\n     await gov\n       .connect(u)\n```\n\n**[eladmallel (Nouns DAO) disagreed with severity and commented](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/174#issuecomment-1232002119):**\n > We acknowledge that a Noun holder can push the refund amount up with a long reason string. We think this is low risk since again this is capped by the number of proposals one can vote on, furthermore buying an expensive Noun just to perform this no-profit attack seems unlikely at the moment.\n> \n> Having said that, we do plan to mitigate this concern by adding a cap on the `gasUsed` variable used in the refund calculation.\n\n**[gzeoneth (judge) decreased severity to Medium](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/174)**\n\n***\n\n## [[M-02] User A cannot cancel User B's proposal when User B's prior number of votes at relevant block is same as proposal threshold, which contradicts the fact that User B actually cannot create the proposal when the prior number of votes is same as proposal threshold](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/255)\n_Submitted by rbserver_\n\n<https://github.com/code-423n4/2022-08-nounsdao/blob/main/contracts/governance/NounsDAOLogicV2.sol#L184-L279>\n\n<https://github.com/code-423n4/2022-08-nounsdao/blob/main/contracts/governance/NounsDAOLogicV2.sol#L346-L368>\n\n### Impact\n\nWhen User B calls the following `propose` function for creating a proposal, it checks that User B's prior number of votes at the relevant block is larger than the proposal threshold through executing `nouns.getPriorVotes(msg.sender, block.number - 1) > temp.proposalThreshold`. This means that User B cannot create the proposal when the prior number of votes and the proposal threshold are the same.\n\n<https://github.com/code-423n4/2022-08-nounsdao/blob/main/contracts/governance/NounsDAOLogicV2.sol#L184-L279>\n\n```solidity\n    function propose(\n        address[] memory targets,\n        uint256[] memory values,\n        string[] memory signatures,\n        bytes[] memory calldatas,\n        string memory description\n    ) public returns (uint256) {\n        ProposalTemp memory temp;\n\n        temp.totalSupply = nouns.totalSupply();\n\n        temp.proposalThreshold = bps2Uint(proposalThresholdBPS, temp.totalSupply);\n\n        require(\n            nouns.getPriorVotes(msg.sender, block.number - 1) > temp.proposalThreshold,\n            'NounsDAO::propose: proposer votes below proposal threshold'\n        );\n        require(\n            targets.length == values.length &&\n                targets.length == signatures.length &&\n                targets.length == calldatas.length,\n            'NounsDAO::propose: proposal function information arity mismatch'\n        );\n        require(targets.length != 0, 'NounsDAO::propose: must provide actions');\n        require(targets.length <= proposalMaxOperations, 'NounsDAO::propose: too many actions');\n\n        temp.latestProposalId = latestProposalIds[msg.sender];\n        if (temp.latestProposalId != 0) {\n            ProposalState proposersLatestProposalState = state(temp.latestProposalId);\n            require(\n                proposersLatestProposalState != ProposalState.Active,\n                'NounsDAO::propose: one live proposal per proposer, found an already active proposal'\n            );\n            require(\n                proposersLatestProposalState != ProposalState.Pending,\n                'NounsDAO::propose: one live proposal per proposer, found an already pending proposal'\n            );\n        }\n\n        temp.startBlock = block.number + votingDelay;\n        temp.endBlock = temp.startBlock + votingPeriod;\n\n        proposalCount++;\n        Proposal storage newProposal = _proposals[proposalCount];\n        newProposal.id = proposalCount;\n        newProposal.proposer = msg.sender;\n        newProposal.proposalThreshold = temp.proposalThreshold;\n        newProposal.eta = 0;\n        newProposal.targets = targets;\n        newProposal.values = values;\n        newProposal.signatures = signatures;\n        newProposal.calldatas = calldatas;\n        newProposal.startBlock = temp.startBlock;\n        newProposal.endBlock = temp.endBlock;\n        newProposal.forVotes = 0;\n        newProposal.againstVotes = 0;\n        newProposal.abstainVotes = 0;\n        newProposal.canceled = false;\n        newProposal.executed = false;\n        newProposal.vetoed = false;\n        newProposal.totalSupply = temp.totalSupply;\n        newProposal.creationBlock = block.number;\n\n        latestProposalIds[newProposal.proposer] = newProposal.id;\n\n        /// @notice Maintains backwards compatibility with GovernorBravo events\n        emit ProposalCreated(\n            newProposal.id,\n            msg.sender,\n            targets,\n            values,\n            signatures,\n            calldatas,\n            newProposal.startBlock,\n            newProposal.endBlock,\n            description\n        );\n\n        /// @notice Updated event with `proposalThreshold` and `minQuorumVotes`\n        /// @notice `minQuorumVotes` is always zero since V2 introduces dynamic quorum with checkpoints\n        emit ProposalCreatedWithRequirements(\n            newProposal.id,\n            msg.sender,\n            targets,\n            values,\n            signatures,\n            calldatas,\n            newProposal.startBlock,\n            newProposal.endBlock,\n            newProposal.proposalThreshold,\n            minQuorumVotes(),\n            description\n        );\n\n        return newProposal.id;\n    }\n```\n\nAfter User B's proposal is created, User A can call the following `cancel` function to cancel it. When calling `cancel`, it checks that User B's prior number of votes at the relevant block is less than the proposal threshold through executing `nouns.getPriorVotes(proposal.proposer, block.number - 1) < proposal.proposalThreshold`. When User B's prior number of votes and the proposal threshold are the same, User A cannot cancel this proposal of User B. However, this contradicts the fact User B actually cannot create this proposal when the same condition holds true. In other words, if User B cannot create this proposal when the prior number of votes and the proposal threshold are the same, User A should be able to cancel User B's proposal under the same condition but it is not true. The functionality for canceling User B's proposal in this situation becomes unavailable for User A.\n\n<https://github.com/code-423n4/2022-08-nounsdao/blob/main/contracts/governance/NounsDAOLogicV2.sol#L346-L368>\n\n```solidity\n    function cancel(uint256 proposalId) external {\n        require(state(proposalId) != ProposalState.Executed, 'NounsDAO::cancel: cannot cancel executed proposal');\n\n        Proposal storage proposal = _proposals[proposalId];\n        require(\n            msg.sender == proposal.proposer ||\n                nouns.getPriorVotes(proposal.proposer, block.number - 1) < proposal.proposalThreshold,\n            'NounsDAO::cancel: proposer above threshold'\n        );\n\n        proposal.canceled = true;\n        for (uint256 i = 0; i < proposal.targets.length; i++) {\n            timelock.cancelTransaction(\n                proposal.targets[i],\n                proposal.values[i],\n                proposal.signatures[i],\n                proposal.calldatas[i],\n                proposal.eta\n            );\n        }\n\n        emit ProposalCanceled(proposalId);\n    }\n```\n\n### Proof of Concept\n\nPlease append the following test in the `NounsDAOV2#inflationHandling` `describe` block in `test\\governance\\NounsDAO\\V2\\inflationHandling.test.ts`. This test should pass to demonstrate the described scenario.\n\n```typescript\n  it(\"User A cannot cancel User B's proposal when User B's prior number of votes at relevant block is same as proposal threshold, which contradicts the fact that User B actually cannot create the proposal when the prior number of votes is same as proposal threshold\",\n    async () => {\n    // account1 has 3 tokens at the beginning\n    // account1 gains 2 more to own 5 tokens in total\n    await token.transferFrom(deployer.address, account1.address, 11);\n    await token.transferFrom(deployer.address, account1.address, 12);\n\n    await mineBlock();\n\n    // account1 cannot create a proposal when owning 5 tokens in total\n    await expect(\n      gov.connect(account1).propose(targets, values, signatures, callDatas, 'do nothing'),\n    ).to.be.revertedWith('NounsDAO::propose: proposer votes below proposal threshold');\n\n    // account1 gains 1 more to own 6 tokens in total\n    await token.transferFrom(deployer.address, account1.address, 13);\n\n    await mineBlock();\n\n    // account1 can create a proposal when owning 6 tokens in total\n    await gov.connect(account1).propose(targets, values, signatures, callDatas, 'do nothing');\n    const proposalId = await gov.latestProposalIds(account1.address);\n    expect(await gov.state(proposalId)).to.equal(0);\n\n    // other user cannot cancel account1's proposal at this moment\n    await expect(\n      gov.cancel(proposalId, {gasLimit: 1e6})\n    ).to.be.revertedWith('NounsDAO::cancel: proposer above threshold');\n    \n    // account1 removes 1 token to own 5 tokens in total\n    await token.connect(account1).transferFrom(account1.address, deployer.address, 13);\n\n    await mineBlock();\n\n    // other user still cannot cancel account1's proposal when account1 owns 5 tokens in total\n    // this contradicts the fact that account1 cannot create a proposal when owning 5 tokens in total\n    await expect(\n      gov.cancel(proposalId, {gasLimit: 1e6})\n    ).to.be.revertedWith('NounsDAO::cancel: proposer above threshold');\n\n    // account1 removes another token to own 4 tokens in total\n    await token.connect(account1).transferFrom(account1.address, deployer.address, 12);\n\n    await mineBlock();\n\n    // other user can now cancel account1's proposal when account1 owns 4 tokens in total\n    await gov.cancel(proposalId, {gasLimit: 1e6})\n    expect(await gov.state(proposalId)).to.equal(2);\n  });\n```\n\n### Tools Used\n\nVSCode\n\n### Recommended Mitigation Steps\n\n<https://github.com/code-423n4/2022-08-nounsdao/blob/main/contracts/governance/NounsDAOLogicV2.sol#L197-L200> can be changed to the following code.\n\n```solidity\n        require(\n            nouns.getPriorVotes(msg.sender, block.number - 1) >= temp.proposalThreshold,\n            'NounsDAO::propose: proposer votes below proposal threshold'\n        );\n```\n\nor\n\n<https://github.com/code-423n4/2022-08-nounsdao/blob/main/contracts/governance/NounsDAOLogicV2.sol#L350-L354> can be changed to the following code.\n\n```solidity\n        require(\n            msg.sender == proposal.proposer ||\n                nouns.getPriorVotes(proposal.proposer, block.number - 1) <= proposal.proposalThreshold,\n            'NounsDAO::cancel: proposer above threshold'\n        );\n```\n\nbut not both.\n\n**[eladmallel (Nouns DAO) confirmed and commented](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/255#issuecomment-1232013574):**\n > We agree that the case of prior votes equal to `proposalThreshold` is missed, and plan to include that state in what is cancelable.\n\n\n\n***\n\n## [[M-03] Loss of Veto Power can Lead to 51% Attack](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/315)\n_Submitted by TomJ, also found by 0xDjango, 0xSmartContract, Aymen0909, Ch&#95;301, and Deivitto_\n\n<https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L156>\n\n<https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L150>\n\n<https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L839-L845>\n\n<https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L637-L643>\n\n### Impact\n\nThe veto power is import functionality for current NounsDAO in order to protect their treasury from malicious proposals.\nHowever there is lack of zero address check and lack of 2 step address changing process for vetoer address.\nThis might lead to Nounders losing their veto power unintentionally and open to 51% attack which can drain their entire treasury.\n\nRefrence from Nouns DAO contest documents:\n<https://dialectic.ch/editorial/nouns-governance-attack>\n<https://dialectic.ch/editorial/nouns-governance-attack-2>\n\n### Proof of Concept\n\nLack of 0-address check for vetoer address at `initialize()` and `\\_setVetoer()` of NounsDAOLogicV2.sol and NounsDAOLogicV1.sol.\nAlso it is better to make changing address process of vetoer at `\\_setVetoer()` into 2-step process to avoid accidently setting\nvetoer to zero address or any other arbitrary addresses and end up burning/losing veto power unintentionally.\n\n1.  Vetoer address of `initialize()` of NounsDAOLogicV2.sol, NounsDAOLogicV1.sol\n\n<https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L156>\n\n<https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L150>\n\n2.  Vetoer address of `\\_setVetoer()` of NounsDAOLogicV2.sol, NounsDAOLogicV1.sol\n\n<https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L839-L845>\n\n<https://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L637-L643>\n\n### Recommended Mitigation Steps\n\nAdd zero address check for vetoer address at `initialize()`.\nAlso change `\\_setVetoer()` vetoer address changing process to 2-step process like explained below.\n\nFirst make the `\\_setVetoer()` function approve a new vetoer address as a pending vetoer.\nNext that pending vetoer has to claim the ownership in a separate transaction to be a new vetoer.\n\n**[eladmallel (Nouns DAO) confirmed and commented](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/315#issuecomment-1232091787):**\n > We agree it's worth being extra safe here, planning to change it to a 2-step process.\n\n\n\n***\n\n\n\n# Low Risk and Non-Critical Issues\n\nFor this contest, 116 reports were submitted by wardens detailing low risk and non-critical issues. The [report highlighted below](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/166) by **IllIllI** received the top score from the judge.\n\n*The following wardens also submitted reports: [0xNazgul](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/154), [Deivitto](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/301), [mics](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/95), [CodingNameKiki](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/38), [JC](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/400), [0xSmartContract](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/312), [Lambda](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/53), [Rolezn](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/107), [rbserver](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/384), [Dravee](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/35), [Bnke0x0](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/88), [0x1f8b](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/100), [&#95;141345&#95;](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/234), [0xNineDec](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/258), [0xDjango](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/264), [Ch&#95;301](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/286), [auditor0517](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/330), [Funen](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/343), [GalloDaSballo](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/361), [gogo](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/398), [oyc&#95;109](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/16), [carlitox477](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/77), [bobirichman](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/92), [sikorico](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/97), [ElKu](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/127), [seyni](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/213), [robee](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/221), [saian](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/270), [Aymen0909](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/309), [c3phas](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/375), [Olivierdem](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/386), [hyh](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/404), [brgltd](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/406), [durianSausage](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/43), [LeoS](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/50), [Jeiwan](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/51), [ladboy233](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/85), [xiaoming90](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/134), [simon135](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/186), [sryysryy](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/192), [GimelSec](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/208), [catchup](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/219), [cccz](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/225), [Waze](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/240), [berndartmueller](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/243), [ajtra](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/250), [delfin454000](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/273), [Guardian](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/305), [d3e4](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/362), [lukris02](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/369), [csanuragjain](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/288), [0bi](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/8), [ReyAdmirado](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/15), [fatherOfBlocks](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/28), [0x1337](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/32), [djxploit](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/71), [Bjorn&#95;bug](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/90), [pfapostol](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/99), [0xbepresent](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/111), [RaymondFam](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/119), [rajatbeladiya](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/149), [zzzitron](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/151), [cRat1st0s](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/176), [CertoraInc](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/181), [&#95;Adam](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/193), [sseefried](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/196), [Sm4rty](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/201), [exd0tpy](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/231), [KIntern&#95;NA](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/268), [0xRajeev](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/7), [Chom](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/290), [JohnSmith](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/293), [dipp](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/316), [pauliax](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/326), [R2](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/328), [Rohan16](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/333), [0xSky](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/336), [TomJ](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/337), [SooYa](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/340), [tnevler](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/377), [asutorufos](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/385), [mrpathfindr](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/206), [Soosh](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/210), [yixxas](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/211), [rvierdiiev](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/215), [tonisives](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/238), [0x040](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/253), [prasantgupta52](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/269), [ret2basic](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/274), [shenwilly](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/297), [p&#95;crypt0](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/298), [natzuu](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/307), [zkhorse](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/310), [JansenC](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/347), [0xmatt](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/352), [rfa](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/354), [wagmi](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/357), [pashov](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/366), [erictee](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/6), [DimitarDimitrov](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/12), [DevABDee](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/19), [Haruxe](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/26), [Saintcode&#95;](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/33), [android69](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/52), [rokinot](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/73), [8olidity](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/78), [Trabajo&#95;de&#95;mates](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/84), [Ruhum](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/125), [z3s](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/135), [0xkatana](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/137), [throttle](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/143), [sach1r0](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/146), [Noah3o6](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/162), [Respx](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/172), and [Tomo](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/202).*\n\n## Low Risk Issues\n| |Issue|Instances|\n|-|:-|:-:|\n| [L&#x2011;01] | Nouns will not be able to be transferred once the `block.number` passes `type(uint32).max` | 2 |\n| [L&#x2011;02] | Unused/empty `receive()`/`fallback()` function | 1 |\n| [L&#x2011;03] | Missing checks for `address(0x0)` when assigning values to `address` state variables | 5 |\n\nTotal: 8 instances over 3 issues\n\n## [L&#x2011;01]  Nouns will not be able to be transferred once the `block.number` passes `type(uint32).max`\nWhile this currently equates to ~1260 years, if there's a hard fork which makes block times much more frequent (e.g. to compete with Solana), then this limit may be reached much faster than expected, and transfers and delegations will remain stuck at their existing settings\n\n*There are 2 instances of this issue:*\n```solidity\nFile: /contracts/base/ERC721Checkpointable.sol\n\n238          uint32 blockNumber = safe32(\n239              block.number,\n240              'ERC721Checkpointable::_writeCheckpoint: block number exceeds 32 bits'\n241:         );\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L238-L241\n\n```solidity\nFile: /contracts/governance/NounsDAOLogicV2.sol\n\n923:         uint32 blockNumber = safe32(blockNumber_, 'NounsDAO::getDynamicQuorumParamsAt: block number exceeds 32 bits');\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L923\n\n## [L&#x2011;02]  Unused/empty `receive()`/`fallback()` function\nIf the intention is for the Ether to be used, the function should call another function, otherwise it should revert (e.g. `require(msg.sender == address(weth))`). Having no access control on the function means that someone may send Ether to the contract, and have no way to get anything back out, which is a loss of funds\n\n*There is 1 instance of this issue:*\n```solidity\nFile: contracts/governance/NounsDAOLogicV2.sol\n\n1030:     receive() external payable {}\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L1030\n\n## [L&#x2011;03]  Missing checks for `address(0x0)` when assigning values to `address` state variables\n\n*There are 5 instances of this issue:*\n```solidity\nFile: contracts/governance/NounsDAOLogicV1.sol\n\n605:          pendingAdmin = newPendingAdmin;\n\n642:          vetoer = newVetoer;\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L605\n\n```solidity\nFile: contracts/governance/NounsDAOLogicV2.sol\n\n807:          pendingAdmin = newPendingAdmin;\n\n844:          vetoer = newVetoer;\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L807\n\n```solidity\nFile: contracts/governance/NounsDAOProxy.sol\n\n71:           admin = admin_;\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOProxy.sol#L71\n\n## Non-Critical Issues\n| |Issue|Instances|\n|-|:-|:-:|\n| [N&#x2011;01] | `public` functions not called by the contract should be declared `external` instead | 8 |\n| [N&#x2011;02] | Non-assembly method available | 3 |\n| [N&#x2011;03] | `2**<n> - 1` should be re-written as `type(uint<n>).max` | 2 |\n| [N&#x2011;04] | `constant`s should be defined rather than using magic numbers | 8 |\n| [N&#x2011;05] | Use a more recent version of solidity | 3 |\n| [N&#x2011;06] | Expressions for constant values such as a call to `keccak256()`, should use `immutable` rather than `constant` | 6 |\n| [N&#x2011;07] | Constant redefined elsewhere | 11 |\n| [N&#x2011;08] | Lines are too long | 7 |\n| [N&#x2011;09] | Non-library/interface files should use fixed compiler versions, not floating ones | 4 |\n| [N&#x2011;10] | Event is missing `indexed` fields | 21 |\n| [N&#x2011;11] | Not using the named return variables anywhere in the function is confusing | 8 |\n| [N&#x2011;12] | Typos | 4 |\n\nTotal: 85 instances over 12 issues\n\n## [N&#x2011;01]  `public` functions not called by the contract should be declared `external` instead\nContracts [are allowed](https://docs.soliditylang.org/en/latest/contracts.html#function-overriding) to override their parents' functions and change the visibility from `external` to `public`.\n\n*There are 8 instances of this issue:*\n```solidity\nFile: contracts/governance/NounsDAOLogicV1.sol\n\n174       function propose(\n175           address[] memory targets,\n176           uint256[] memory values,\n177           string[] memory signatures,\n178           bytes[] memory calldatas,\n179           string memory description\n180:      ) public returns (uint256) {\n\n649       function _burnVetoPower() public {\n650           // Check caller is pendingAdmin and pendingAdmin â‰  address(0)\n651:          require(msg.sender == vetoer, 'NounsDAO::_burnVetoPower: vetoer only');\n\n660:      function proposalThreshold() public view returns (uint256) {\n\n668:      function quorumVotes() public view returns (uint256) {\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L174-L180\n\n```solidity\nFile: contracts/governance/NounsDAOLogicV2.sol\n\n184       function propose(\n185           address[] memory targets,\n186           uint256[] memory values,\n187           string[] memory signatures,\n188           bytes[] memory calldatas,\n189           string memory description\n190:      ) public returns (uint256) {\n\n851       function _burnVetoPower() public {\n852           // Check caller is pendingAdmin and pendingAdmin â‰  address(0)\n853:          require(msg.sender == vetoer, 'NounsDAO::_burnVetoPower: vetoer only');\n\n862:      function proposalThreshold() public view returns (uint256) {\n\n1002:     function maxQuorumVotes() public view returns (uint256) {\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L184-L190\n\n## [N&#x2011;02]  Non-assembly method available \n`assembly{ id := chainid() }` => `uint256 id = block.chainid`, `assembly { size := extcodesize() }` => `uint256 size = address().code.length`\nThere are some automated tools that will flag a project as having higher complexity if there is inline-assembly, so it's best to avoid using it where it's not necessary\n\n*There are 3 instances of this issue:*\n```solidity\nFile: contracts/base/ERC721Checkpointable.sol\n\n285:              chainId := chainid()\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L285\n\n```solidity\nFile: contracts/governance/NounsDAOLogicV1.sol\n\n679:              chainId := chainid()\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L679\n\n```solidity\nFile: contracts/governance/NounsDAOLogicV2.sol\n\n1013:             chainId := chainid()\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L1013\n\n## [N&#x2011;03]  `2**<n> - 1` should be re-written as `type(uint<n>).max`\nEarlier versions of solidity can use `uint<n>(-1)` instead. Expressions not including the `- 1` can often be re-written to accomodate the change (e.g. by using a `>` rather than a `>=`, which will also save some gas)\n\n*There are 2 instances of this issue:*\n```solidity\nFile: contracts/base/ERC721Checkpointable.sol\n\n254:          require(n < 2**32, errorMessage);\n\n259:          require(n < 2**96, errorMessage);\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L254\n\n## [N&#x2011;04]  `constant`s should be defined rather than using magic numbers\nEven [assembly](https://github.com/code-423n4/2022-05-opensea-seaport/blob/9d7ce4d08bf3c3010304a0476a785c70c0e90ae7/contracts/lib/TokenTransferrer.sol#L35-L39) can benefit from using readable constants instead of hex/numeric literals\n\n*There are 8 instances of this issue:*\n```solidity\nFile: contracts/base/ERC721Checkpointable.sol\n\n/// @audit 32\n254:          require(n < 2**32, errorMessage);\n\n/// @audit 96\n259:          require(n < 2**96, errorMessage);\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L254\n\n```solidity\nFile: contracts/governance/NounsDAOLogicV1.sol\n\n/// @audit 10000\n673:          return (number * bps) / 10000;\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L673\n\n```solidity\nFile: contracts/governance/NounsDAOLogicV2.sol\n\n/// @audit 10000\n908:          uint256 againstVotesBPS = (10000 * againstVotes) / totalSupply;\n\n/// @audit 1e6\n909:          uint256 quorumAdjustmentBPS = (params.quorumCoefficient * againstVotesBPS) / 1e6;\n\n/// @audit 10000\n1007:         return (number * bps) / 10000;\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L908\n\n```solidity\nFile: contracts/governance/NounsDAOProxy.sol\n\n/// @audit 0x20\n98:                   revert(add(returnData, 0x20), returndatasize())\n\n/// @audit 0x40\n113:              let free_mem_ptr := mload(0x40)\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOProxy.sol#L98\n\n## [N&#x2011;05]  Use a more recent version of solidity\nUse a solidity version of at least 0.8.12 to get `string.concat()` to be used instead of `abi.encodePacked(<str>,<str>)`\n\n*There are 3 instances of this issue:*\n```solidity\nFile: contracts/base/ERC721Checkpointable.sol\n\n35:   pragma solidity ^0.8.6;\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L35\n\n```solidity\nFile: contracts/governance/NounsDAOLogicV1.sol\n\n61:   pragma solidity ^0.8.6;\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L61\n\n```solidity\nFile: contracts/governance/NounsDAOLogicV2.sol\n\n53:   pragma solidity ^0.8.6;\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L53\n\n## [N&#x2011;06]  Expressions for constant values such as a call to `keccak256()`, should use `immutable` rather than `constant`\nWhile it doesn't save any gas because the compiler knows that developers often make this mistake, it's still best to use the right tool for the task at hand. There is a difference between `constant` variables and `immutable` variables, and they should each be used in their appropriate contexts. `constants` should be used for literal values written into the code, and `immutable` variables should be used for expressions, or values calculated in, or passed into the constructor.\n\n*There are 6 instances of this issue:*\n```solidity\nFile: contracts/base/ERC721Checkpointable.sol\n\n59        bytes32 public constant DOMAIN_TYPEHASH =\n60:           keccak256('EIP712Domain(string name,uint256 chainId,address verifyingContract)');\n\n63        bytes32 public constant DELEGATION_TYPEHASH =\n64:           keccak256('Delegation(address delegatee,uint256 nonce,uint256 expiry)');\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L59-L60\n\n```solidity\nFile: contracts/governance/NounsDAOLogicV1.sol\n\n97        bytes32 public constant DOMAIN_TYPEHASH =\n98:           keccak256('EIP712Domain(string name,uint256 chainId,address verifyingContract)');\n\n101:      bytes32 public constant BALLOT_TYPEHASH = keccak256('Ballot(uint256 proposalId,uint8 support)');\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L97-L98\n\n```solidity\nFile: contracts/governance/NounsDAOLogicV2.sol\n\n101       bytes32 public constant DOMAIN_TYPEHASH =\n102:          keccak256('EIP712Domain(string name,uint256 chainId,address verifyingContract)');\n\n105:      bytes32 public constant BALLOT_TYPEHASH = keccak256('Ballot(uint256 proposalId,uint8 support)');\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L101-L102\n\n## [N&#x2011;07]  Constant redefined elsewhere\nConsider defining in only one contract so that values cannot become out of sync when only one location is updated. A [cheap way](https://medium.com/coinmonks/gas-cost-of-solidity-library-functions-dbe0cedd4678) to store constants in a single location is to create an `internal constant` in a `library`. If the variable is a local cache of another contract's value, consider making the cache variable internal or private, which will require external users to query the contract with the source of truth, so that callers don't get out of sync.\n\n*There are 11 instances of this issue:*\n```solidity\nFile: contracts/governance/NounsDAOLogicV2.sol\n\n/// @audit seen in contracts/governance/NounsDAOLogicV1.sol \n59:       string public constant name = 'Nouns DAO';\n\n/// @audit seen in contracts/governance/NounsDAOLogicV1.sol \n62:       uint256 public constant MIN_PROPOSAL_THRESHOLD_BPS = 1; // 1 basis point or 0.01%\n\n/// @audit seen in contracts/governance/NounsDAOLogicV1.sol \n65:       uint256 public constant MAX_PROPOSAL_THRESHOLD_BPS = 1_000; // 1,000 basis points or 10%\n\n/// @audit seen in contracts/governance/NounsDAOLogicV1.sol \n68:       uint256 public constant MIN_VOTING_PERIOD = 5_760; // About 24 hours\n\n/// @audit seen in contracts/governance/NounsDAOLogicV1.sol \n71:       uint256 public constant MAX_VOTING_PERIOD = 80_640; // About 2 weeks\n\n/// @audit seen in contracts/governance/NounsDAOLogicV1.sol \n74:       uint256 public constant MIN_VOTING_DELAY = 1;\n\n/// @audit seen in contracts/governance/NounsDAOLogicV1.sol \n77:       uint256 public constant MAX_VOTING_DELAY = 40_320; // About 1 week\n\n/// @audit seen in contracts/governance/NounsDAOLogicV1.sol \n89:       uint256 public constant MAX_QUORUM_VOTES_BPS = 2_000; // 2,000 basis points or 20%\n\n/// @audit seen in contracts/governance/NounsDAOLogicV1.sol \n92:       uint256 public constant proposalMaxOperations = 10; // 10 actions\n\n/// @audit seen in contracts/governance/NounsDAOLogicV1.sol \n101       bytes32 public constant DOMAIN_TYPEHASH =\n102:          keccak256('EIP712Domain(string name,uint256 chainId,address verifyingContract)');\n\n/// @audit seen in contracts/governance/NounsDAOLogicV1.sol \n105:      bytes32 public constant BALLOT_TYPEHASH = keccak256('Ballot(uint256 proposalId,uint8 support)');\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L59\n\n## [N&#x2011;08]  Lines are too long\nUsually lines in source code are limited to [80](https://softwareengineering.stackexchange.com/questions/148677/why-is-80-characters-the-standard-limit-for-code-width) characters. Today's screens are much larger so it's reasonable to stretch this in some cases. Since the files will most likely reside in GitHub, and GitHub starts using a scroll bar in all cases when the length is over [164](https://github.com/aizatto/character-length) characters, the lines below should be split when they reach that length\n\n*There are 7 instances of this issue:*\n```solidity\nFile: contracts/governance/NounsDAOInterfaces.sol\n\n156:      /// @notice The basis point number of votes in support of a proposal required in order for a quorum to be reached and for a vote to succeed. *DIFFERS from GovernerBravo\n\n181:          /// @notice The number of votes in support of a proposal required in order for a quorum to be reached and for a vote to succeed at the time of proposal creation. *DIFFERS from GovernerBravo\n\n256:      /// @notice The basis point number of votes in support of a proposal required in order for a quorum to be reached and for a vote to succeed. *DIFFERS from GovernerBravo\n\n281:          /// @notice The number of votes in support of a proposal required in order for a quorum to be reached and for a vote to succeed at the time of proposal creation. *DIFFERS from GovernerBravo\n\n375:          /// @notice The minimum number of votes in support of a proposal required in order for a quorum to be reached and for a vote to succeed at the time of proposal creation. *DIFFERS from GovernerBravo\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOInterfaces.sol#L156\n\n```solidity\nFile: contracts/governance/NounsDAOLogicV1.sol\n\n507:          /// @notice: Unlike GovernerBravo, votes are considered from the block the proposal was created in order to normalize quorumVotes and proposalThreshold metrics\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L507\n\n```solidity\nFile: contracts/governance/NounsDAOLogicV2.sol\n\n599:          /// @notice: Unlike GovernerBravo, votes are considered from the block the proposal was created in order to normalize quorumVotes and proposalThreshold metrics\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L599\n\n## [N&#x2011;09]  Non-library/interface files should use fixed compiler versions, not floating ones\n\n*There are 4 instances of this issue:*\n```solidity\nFile: contracts/governance/NounsDAOInterfaces.sol\n\n33:   pragma solidity ^0.8.6;\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOInterfaces.sol#L33\n\n```solidity\nFile: contracts/governance/NounsDAOLogicV1.sol\n\n61:   pragma solidity ^0.8.6;\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L61\n\n```solidity\nFile: contracts/governance/NounsDAOLogicV2.sol\n\n53:   pragma solidity ^0.8.6;\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L53\n\n```solidity\nFile: contracts/governance/NounsDAOProxy.sol\n\n36:   pragma solidity ^0.8.6;\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOProxy.sol#L36\n\n## [N&#x2011;10]  Event is missing `indexed` fields\nIndex event fields make the field more quickly accessible to off-chain tools that parse events. However, note that each index field costs extra gas during emission, so it's not necessarily best to index the maximum allowed per event (three fields). Each `event` should use three `indexed` fields if there are three or more fields, and gas usage is not particularly of concern for the events in question. If there are fewer than three fields, all of the fields should be indexed.\n\n*There are 21 instances of this issue:*\n```solidity\nFile: contracts/base/ERC721Checkpointable.sol\n\n73:       event DelegateVotesChanged(address indexed delegate, uint256 previousBalance, uint256 newBalance);\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L73\n\n```solidity\nFile: contracts/governance/NounsDAOInterfaces.sol\n\n37        event ProposalCreated(\n38            uint256 id,\n39            address proposer,\n40            address[] targets,\n41            uint256[] values,\n42            string[] signatures,\n43            bytes[] calldatas,\n44            uint256 startBlock,\n45            uint256 endBlock,\n46            string description\n47:       );\n\n50        event ProposalCreatedWithRequirements(\n51            uint256 id,\n52            address proposer,\n53            address[] targets,\n54            uint256[] values,\n55            string[] signatures,\n56            bytes[] calldatas,\n57            uint256 startBlock,\n58            uint256 endBlock,\n59            uint256 proposalThreshold,\n60            uint256 quorumVotes,\n61            string description\n62:       );\n\n70:       event VoteCast(address indexed voter, uint256 proposalId, uint8 support, uint256 votes, string reason);\n\n73:       event ProposalCanceled(uint256 id);\n\n76:       event ProposalQueued(uint256 id, uint256 eta);\n\n79:       event ProposalExecuted(uint256 id);\n\n82:       event ProposalVetoed(uint256 id);\n\n85:       event VotingDelaySet(uint256 oldVotingDelay, uint256 newVotingDelay);\n\n88:       event VotingPeriodSet(uint256 oldVotingPeriod, uint256 newVotingPeriod);\n\n91:       event NewImplementation(address oldImplementation, address newImplementation);\n\n94:       event ProposalThresholdBPSSet(uint256 oldProposalThresholdBPS, uint256 newProposalThresholdBPS);\n\n97:       event QuorumVotesBPSSet(uint256 oldQuorumVotesBPS, uint256 newQuorumVotesBPS);\n\n100:      event NewPendingAdmin(address oldPendingAdmin, address newPendingAdmin);\n\n103:      event NewAdmin(address oldAdmin, address newAdmin);\n\n106:      event NewVetoer(address oldVetoer, address newVetoer);\n\n111:      event MinQuorumVotesBPSSet(uint16 oldMinQuorumVotesBPS, uint16 newMinQuorumVotesBPS);\n\n114:      event MaxQuorumVotesBPSSet(uint16 oldMaxQuorumVotesBPS, uint16 newMaxQuorumVotesBPS);\n\n117:      event QuorumCoefficientSet(uint32 oldQuorumCoefficient, uint32 newQuorumCoefficient);\n\n120:      event RefundableVote(address indexed voter, uint256 refundAmount, bool refundSent);\n\n123:      event Withdraw(uint256 amount, bool sent);\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOInterfaces.sol#L37-L47\n\n## [N&#x2011;11]  Not using the named return variables anywhere in the function is confusing\nConsider changing the variable to be an unnamed one\n\n*There are 8 instances of this issue:*\n```solidity\nFile: contracts/governance/NounsDAOLogicV1.sol\n\n/// @audit targets\n/// @audit values\n/// @audit signatures\n/// @audit calldatas\n392       function getActions(uint256 proposalId)\n393           external\n394           view\n395           returns (\n396               address[] memory targets,\n397               uint256[] memory values,\n398               string[] memory signatures,\n399:              bytes[] memory calldatas\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L392-L399\n\n```solidity\nFile: contracts/governance/NounsDAOLogicV2.sol\n\n/// @audit targets\n/// @audit values\n/// @audit signatures\n/// @audit calldatas\n403       function getActions(uint256 proposalId)\n404           external\n405           view\n406           returns (\n407               address[] memory targets,\n408               uint256[] memory values,\n409               string[] memory signatures,\n410:              bytes[] memory calldatas\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L403-L410\n\n## [N&#x2011;12]  Typos\n\n*There are 4 instances of this issue:*\n```solidity\nFile: /contracts/governance/NounsDAOLogicV1.sol\n\n/// @audit contructor\n104:      * @notice Used to initialize the contract during delegator contructor\n\n/// @audit priviledges\n646:      * @notice Burns veto priviledges\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV1.sol#L104\n\n```solidity\nFile: /contracts/governance/NounsDAOLogicV2.sol\n\n/// @audit contructor\n115:      * @notice Used to initialize the contract during delegator contructor\n\n/// @audit priviledges\n848:      * @notice Burns veto priviledges\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L115\n\n\n***\n\n# Gas Optimizations\n\nFor this contest, 126 reports were submitted by wardens detailing gas optimizations. The [report highlighted below](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/164) by **IllIllI** received the top score from the judge.\n\n*The following wardens also submitted reports: [JohnSmith](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/294), [m&#95;Rassska](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/271), [Dravee](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/34), [0xDjango](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/263), [0x1f8b](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/81), [cRat1st0s](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/177), [0xSmartContract](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/295), [Aymen0909](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/304), [oyc&#95;109](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/13), [ReyAdmirado](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/14), [Bnke0x0](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/24), [pfapostol](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/94), [Rolezn](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/108), [robee](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/222), [joestakey](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/248), [TomJ](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/292), [erictee](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/5), [mics](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/96), [ajtra](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/103), [0xkatana](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/136), [ElKu](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/139), [martin](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/159), [Sm4rty](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/200), [Junnon](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/218), [Deivitto](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/296), [ch0bu](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/308), [c3phas](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/373), [fatherOfBlocks](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/27), [ladboy233](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/83), [sikorico](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/98), [Olivierdem](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/113), [Tomo](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/124), [0xNazgul](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/153), [ret2basic](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/197), [&#95;141345&#95;](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/233), [prasantgupta52](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/267), [gogo](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/335), [GalloDaSballo](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/359), [JC](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/399), [rbserver](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/411), [durianSausage](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/42), [DimitarDimitrov](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/10), [samruna](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/22), [LeoS](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/47), [jag](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/62), [carlitox477](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/76), [Ruhum](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/86), [Shishigami](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/87), [0xbepresent](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/109), [Ben](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/112), [ignacio](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/115), [SaharAP](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/120), [0x040](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/126), [sach1r0](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/145), [BipinSah](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/165), [bulej93](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/175), [lucacez](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/179), [CertoraInc](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/180), [sryysryy](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/191), [rvierdiiev](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/217), [exolorkistis](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/228), [zishansami](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/237), [saian](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/260), [Tomio](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/317), [Rohan16](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/331), [rfa](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/355), [Fitraldys](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/370), [hyh](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/383), [pauliax](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/392), [brgltd](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/407), [natzuu](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/306), [Chom](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/311), [medikko](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/358), [lukris02](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/372), [delfin454000](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/374), [d3e4](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/388), [EthLedger](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/18), [DevABDee](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/21), [Saintcode&#95;](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/31), [Lambda](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/54), [djxploit](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/70), [rokinot](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/72), [shr1ftyy](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/79), [CodingNameKiki](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/82), [mrpathfindr](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/152), [Noah3o6](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/161), [rotcivegaf](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/167), [ak1](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/168), [Respx](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/169), [simon135](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/185), [RaymondFam](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/187), [karanctf](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/190), [&#95;Adam](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/194), [shark](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/204), [GimelSec](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/209), [catchup](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/220), [0xc0ffEE](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/227), [Waze](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/239), [0xNineDec](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/256), [KIntern&#95;NA](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/261), [SooYa](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/272), [Guardian](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/285), [Ch&#95;301](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/287), [Amithuddar](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/300), [SerMyVillage](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/2), [2997ms](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/11), [newfork01](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/20), [RoiEvenHaim](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/46), [Polandia94](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/48), [tay054](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/49), [Yiko](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/89), [Bjorn&#95;bug](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/91), [bobirichman](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/93), [ACai](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/158), [seyni](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/216), [francoHacker](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/319), [Randyyy](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/332), [R2](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/339), [Diraco](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/342), [Funen](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/344), [IgnacioB](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/345), [tnevler](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/379), [wagmi](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/381), [peritoflores](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/387), and [a12jmx](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/405).*\n\n## Summary\n\n| |Issue|Instances|\n|-|:-|:-:|\n| [G&#x2011;01] | State checks unnecessarily re-fetch `Proposal`s | 5 |\n| [G&#x2011;02] | Multiple `address`/ID mappings can be combined into a single `mapping` of an `address`/ID to a `struct`, where appropriate | 1 |\n| [G&#x2011;03] | Structs can be packed into fewer storage slots | 3 |\n| [G&#x2011;04] | Using `calldata` instead of `memory` for read-only arguments in `external` functions saves gas | 10 |\n| [G&#x2011;05] | Using `storage` instead of `memory` for structs/arrays saves gas | 1 |\n| [G&#x2011;06] | State variables should be cached in stack variables rather than re-reading them from storage | 11 |\n| [G&#x2011;07] | Multiple accesses of a mapping/array should use a local variable cache | 2 |\n| [G&#x2011;08] | `internal` functions only called once can be inlined to save gas | 7 |\n| [G&#x2011;09] | Add `unchecked {}` for subtractions where the operands cannot underflow because of a previous `require()` or `if`-statement | 1 |\n| [G&#x2011;10] | `<array>.length` should not be looked up in every loop of a `for`-loop | 8 |\n| [G&#x2011;11] | `++i`/`i++` should be `unchecked{++i}`/`unchecked{i++}` when it is not possible for them to overflow, as is the case when used in `for`- and `while`-loops | 8 |\n| [G&#x2011;12] | `require()`/`revert()` strings longer than 32 bytes cost extra gas | 86 |\n| [G&#x2011;13] | Optimize names to save gas | 5 |\n| [G&#x2011;14] | Use a more recent version of solidity | 1 |\n| [G&#x2011;15] | `++i` costs less gas than `i++`, especially when it's used in `for`-loops (`--i`/`i--` too) | 10 |\n| [G&#x2011;16] | Splitting `require()` statements that use `&&` saves gas | 19 |\n| [G&#x2011;17] | Usage of `uints`/`ints` smaller than 32 bytes (256 bits) incurs overhead | 1 |\n| [G&#x2011;18] | Using `private` rather than `public` for constants, saves gas | 31 |\n| [G&#x2011;19] | Don't compare boolean expressions to boolean literals | 2 |\n| [G&#x2011;20] | Division by two should use bit shifting | 2 |\n| [G&#x2011;21] | `require()` or `revert()` statements that check input arguments should be at the top of the function | 3 |\n| [G&#x2011;22] | Empty blocks should be removed or emit something | 1 |\n| [G&#x2011;23] | Use custom errors rather than `revert()`/`require()` strings to save gas | 95 |\n\nTotal: 313 instances over 23 issues\n\n## [G&#x2011;01]  State checks unnecessarily re-fetch `Proposal`s\nEvery call to `state()` fetches the `Proposal` storage variable, which is fetched again immediately afterwards by the caller. If instead there were a version of `state()` that took in a `Proposal storage` variable, the proposal could be fetched only once, saving the gas of the mapping lookup\n\n*There are 5 instances of this issue. (For in-depth details on this and all further gas optimizations with multiple instances, please see the warden's [full report](https://github.com/code-423n4/2022-08-nounsdao-findings/issues/164).)*\n\n## [G&#x2011;02]  Multiple `address`/ID mappings can be combined into a single `mapping` of an `address`/ID to a `struct`, where appropriate\nSaves a storage slot for the mapping. Depending on the circumstances and sizes of types, can avoid a Gsset (**20000 gas**) per mapping combined. Reads and subsequent writes can also be cheaper when a function requires both values and they both fit in the same storage slot. Finally, if both fields are accessed in the same function, can save **~42 gas per access** due to [not having to recalculate the key's keccak256 hash](https://gist.github.com/IllIllI000/ec23a57daa30a8f8ca8b9681c8ccefb0) (Gkeccak256 - 30 gas) and that calculation's associated stack operations.\n\n*There is 1 instance of this issue:*\n```solidity\nFile: contracts/base/ERC721Checkpointable.sol\n\n53        mapping(address => mapping(uint32 => Checkpoint)) public checkpoints;\n54    \n55        /// @notice The number of checkpoints for each account\n56:       mapping(address => uint32) public numCheckpoints;\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L53-L56\n\n## [G&#x2011;03]  Structs can be packed into fewer storage slots\nEach slot saved can avoid an extra Gsset (**20000 gas**) for the first setting of the struct. Subsequent reads as well as writes have smaller gas savings\n\n*There are 3 instances of this issue.*\n\n## [G&#x2011;04]  Using `calldata` instead of `memory` for read-only arguments in `external` functions saves gas\nWhen a function with a `memory` array is called externally, the `abi.decode()` step has to use a for-loop to copy each index of the `calldata` to the `memory` index. **Each iteration of this for-loop costs at least 60 gas** (i.e. `60 * <mem_array>.length`). Using `calldata` directly, obliviates the need for such a loop in the contract code and runtime execution. Note that even if an interface defines a function as having `memory` arguments, it's still valid for implementation contracs to use `calldata` arguments instead. \n\nIf the array is passed to an `internal` function which passes the array to another internal function where the array is modified and therefore `memory` is used in the `external` call, it's still more gass-efficient to use `calldata` when the `external` function uses modifiers, since the modifiers may prevent the internal functions from being called. Structs have the same overhead as an array of length one\n\nNote that I've also flagged instances where the function is `public` but can be marked as `external` since it's not called by the contract, and cases where a constructor is involved\n\n*There are 10 instances of this issue.*\n\n## [G&#x2011;05]  Using `storage` instead of `memory` for structs/arrays saves gas\nWhen fetching data from a storage location, assigning the data to a `memory` variable causes all fields of the struct/array to be read from storage, which incurs a Gcoldsload (**2100 gas**) for *each* field of the struct/array. If the fields are read from the new memory variable, they incur an additional `MLOAD` rather than a cheap stack read. Instead of declearing the variable with the `memory` keyword, declaring the variable with the `storage` keyword and caching any fields that need to be re-read in stack variables, will be much cheaper, only incuring the Gcoldsload for the fields actually read. The only time it makes sense to read the whole struct/array into a `memory` variable, is if the full struct/array is being returned by the function, is being passed to a function that requires `memory`, or if the array/struct is being read from another `memory` array/struct\n\n*There is 1 instance of this issue:*\n```solidity\nFile: contracts/governance/NounsDAOLogicV2.sol\n\n952:              DynamicQuorumParamsCheckpoint memory cp = quorumParamsCheckpoints[center];\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L952\n\n## [G&#x2011;06]  State variables should be cached in stack variables rather than re-reading them from storage\nThe instances below point to the second+ access of a state variable within a function. Caching of a state variable replace each Gwarmaccess (**100 gas**) with a much cheaper stack read. Other less obvious fixes/optimizations include having local memory caches of state variable structs, or having local caches of state variable contracts/addresses.\n\n*There are 11 instances of this issue.*\n\n## [G&#x2011;07]  Multiple accesses of a mapping/array should use a local variable cache\nThe instances below point to the second+ access of a value inside a mapping/array, within a function. Caching a mapping's value in a local `storage` or `calldata` variable when the value is accessed [multiple times](https://gist.github.com/IllIllI000/ec23a57daa30a8f8ca8b9681c8ccefb0), saves **~42 gas per access** due to not having to recalculate the key's keccak256 hash (Gkeccak256 - **30 gas**) and that calculation's associated stack operations. Caching an array's struct avoids recalculating the array offsets into memory/calldata\n\n*There are 2 instances of this issue.*\n\n## [G&#x2011;08]  `internal` functions only called once can be inlined to save gas\nNot inlining costs **20 to 40 gas** because of two extra `JUMP` instructions and additional stack operations needed for function calls.\n\n*There are 7 instances of this issue.*\n\n## [G&#x2011;09]  Add `unchecked {}` for subtractions where the operands cannot underflow because of a previous `require()` or `if`-statement\n`require(a <= b); x = b - a` => `require(a <= b); unchecked { x = b - a }`\n\n*There is 1 instance of this issue:*\n```solidity\nFile: contracts/base/ERC721Checkpointable.sol\n\n/// @audit require() on line 278\n279:          return a - b;\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L279\n\n## [G&#x2011;10]  `<array>.length` should not be looked up in every loop of a `for`-loop\nThe overheads outlined below are _PER LOOP_, excluding the first loop\n* storage arrays incur a Gwarmaccess (**100 gas**)\n* memory arrays use `MLOAD` (**3 gas**)\n* calldata arrays use `CALLDATALOAD` (**3 gas**)\n\nCaching the length changes each of these to a `DUP<N>` (**3 gas**), and gets rid of the extra `DUP<N>` needed to store the stack offset\n\n*There are 8 instances of this issue.*\n\n## [G&#x2011;11]  `++i`/`i++` should be `unchecked{++i}`/`unchecked{i++}` when it is not possible for them to overflow, as is the case when used in `for`- and `while`-loops\nThe `unchecked` keyword is new in solidity version 0.8.0, so this only applies to that version or higher, which these instances are. This saves **30-40 gas [per loop](https://gist.github.com/hrkrshnn/ee8fabd532058307229d65dcd5836ddc#the-increment-in-for-loop-post-condition-can-be-made-unchecked)**\n\n*There are 8 instances of this issue.*\n\n## [G&#x2011;12]  `require()`/`revert()` strings longer than 32 bytes cost extra gas\nEach extra memory word of bytes past the original 32 [incurs an MSTORE](https://gist.github.com/hrkrshnn/ee8fabd532058307229d65dcd5836ddc#consider-having-short-revert-strings) which costs **3 gas**\n\n*There are 86 instances of this issue.*\n\n## [G&#x2011;13]  Optimize names to save gas\n`public`/`external` function names and `public` member variable names can be optimized to save gas. See [this](https://gist.github.com/IllIllI000/a5d8b486a8259f9f77891a919febd1a9) link for an example of how it works. Below are the interfaces/abstract contracts that can be optimized so that the most frequently-called functions use the least amount of gas possible during method lookup. Method IDs that have two leading zero bytes can save **128 gas** each during deployment, and renaming functions to have lower method IDs will save **22 gas** per call, [per sorted position shifted](https://medium.com/joyso/solidity-how-does-function-name-affect-gas-consumption-in-smart-contract-47d270d8ac92)\n\n*There are 5 instances of this issue.*\n\n## [G&#x2011;14]  Use a more recent version of solidity\nUse a solidity version of at least 0.8.2 to get simple compiler automatic inlining\nUse a solidity version of at least 0.8.3 to get better struct packing and cheaper multiple storage reads\nUse a solidity version of at least 0.8.4 to get custom errors, which are cheaper at deployment than `revert()/require()` strings\nUse a solidity version of at least 0.8.10 to have external calls skip contract existence checks if the external call has a return value\n\n*There is 1 instance of this issue:*\n```solidity\nFile: contracts/base/ERC721Enumerable.sol\n\n28:   pragma solidity ^0.8.0;\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Enumerable.sol#L28\n\n## [G&#x2011;15]  `++i` costs less gas than `i++`, especially when it's used in `for`-loops (`--i`/`i--` too)\nSaves **5 gas per loop**\n\n*There are 10 instances of this issue.*\n\n## [G&#x2011;16]  Splitting `require()` statements that use `&&` saves gas\nSee [this issue](https://github.com/code-423n4/2022-01-xdefi-findings/issues/128) which describes the fact that there is a larger deployment gas cost, but with enough runtime calls, the change ends up being cheaper by **3 gas**\n\n*There are 19 instances of this issue.*\n\n## [G&#x2011;17]  Usage of `uints`/`ints` smaller than 32 bytes (256 bits) incurs overhead\n> When using elements that are smaller than 32 bytes, your contractâ€™s gas usage may be higher. This is because the EVM operates on 32 bytes at a time. Therefore, if the element is smaller than that, the EVM must use more operations in order to reduce the size of the element from 32 bytes to the desired size.\n\nhttps://docs.soliditylang.org/en/v0.8.11/internals/layout_in_storage.html\nEach operation involving a `uint8` costs an extra [**22-28 gas**](https://gist.github.com/IllIllI000/9388d20c70f9a4632eb3ca7836f54977) (depending on whether the other operand is also a variable of type `uint8`) as compared to ones involving `uint256`, due to the compiler having to clear the higher bits of the memory word before operating on the `uint8`, as well as the associated stack operations of doing so. Use a larger size then downcast where needed\n\n*There is 1 instance of this issue:*\n```solidity\nFile: contracts/base/ERC721Checkpointable.sol\n\n/// @audit uint32 upper\n191:                  upper = center - 1;\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/base/ERC721Checkpointable.sol#L191\n\n## [G&#x2011;18]  Using `private` rather than `public` for constants, saves gas\nIf needed, the values can be read from the verified contract source code, or if there are multiple values there can be a single getter function that [returns a tuple](https://github.com/code-423n4/2022-08-frax/blob/90f55a9ce4e25bceed3a74290b854341d8de6afa/src/contracts/FraxlendPair.sol#L156-L178) of the values of all currently-public constants. Saves **3406-3606 gas** in deployment gas due to the compiler not having to create non-payable getter functions for deployment calldata, not having to store the bytes of the value outside of where it's used, and not adding another entry to the method ID table\n\n*There are 31 instances of this issue.*\n\n## [G&#x2011;19]  Don't compare boolean expressions to boolean literals\n`if (<x> == true)` => `if (<x>)`, `if (<x> == false)` => `if (!<x>)`\n\n*There are 2 instances of this issue.*\n\n## [G&#x2011;20]  Division by two should use bit shifting\n`<x> / 2` is the same as `<x> >> 1`. While the compiler uses the `SHR` opcode to accomplish both, the version that uses division incurs an overhead of [**20 gas**](https://gist.github.com/IllIllI000/ec0e4e6c4f52a6bca158f137a3afd4ff) due to `JUMP`s to and from a compiler utility function that introduces checks which can be avoided by using `unchecked {}` around the division by two\n\n*There are 2 instances of this issue.*\n\n## [G&#x2011;21]  `require()` or `revert()` statements that check input arguments should be at the top of the function\nChecks that involve constants should come before checks that involve state variables, function calls, and calculations. By doing these checks first, the function is able to revert before wasting a Gcoldsload (**2100 gas***) in a function that may ultimately revert in the unhappy case.\n\n*There are 3 instances of this issue.*\n\n## [G&#x2011;22]  Empty blocks should be removed or emit something \nThe code should be refactored such that they no longer exist, or the block should do something useful, such as emitting an event or reverting. If the contract is meant to be extended, the contract should be `abstract` and the function signatures be added without any default implementation. If the block is an empty `if`-statement block to avoid doing subsequent checks in the else-if/else conditions, the else-if/else conditions should be nested under the negation of the if-statement, because they involve different classes of checks, which may lead to the introduction of errors when the code is later modified (`if(x){}else if(y){...}else{...}` => `if(!x){if(y){...}else{...}}`). Empty `receive()`/`fallback() payable` functions that are not used, can be removed to save deployment gas.\n\n*There is 1 instance of this issue:*\n```solidity\nFile: contracts/governance/NounsDAOLogicV2.sol\n\n1030:     receive() external payable {}\n\n```\nhttps://github.com/code-423n4/2022-08-nounsdao/blob/45411325ec14c6d747b999a40367d3c5109b5a89/contracts/governance/NounsDAOLogicV2.sol#L1030\n\n## [G&#x2011;23]  Use custom errors rather than `revert()`/`require()` strings to save gas\nCustom errors are available from solidity version 0.8.4. Custom errors save [**~50 gas**](https://gist.github.com/IllIllI000/ad1bd0d29a0101b25e57c293b4b0c746) each time they're hit by [avoiding having to allocate and store the revert string](https://blog.soliditylang.org/2021/04/21/custom-errors/#errors-in-depth). Not defining the strings also save deployment gas\n\n*There are 95 instances of this issue.*\n\n***\n\n# Disclosures\n\nC4 is an open organization governed by participants in the community.\n\nC4 Contests incentivize the discovery of exploits, vulnerabilities, and bugs in smart contracts. Security researchers are rewarded at an increasing rate for finding higher-risk issues. Contest submissions are judged by a knowledgeable security researcher and solidity developer and disclosed to sponsoring developers. C4 does not conduct formal verification regarding the provided code but instead provides final verification.\n\nC4 does not provide any guarantee or warranty regarding the security of this project. All smart contract software should be used at the sole risk and responsibility of users.\n"
}