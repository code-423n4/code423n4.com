{
  "circa": {
    "title": "Mimo DeFi contest",
    "sponsor": "Mimo DeFi",
    "slug": "2022-04-mimo",
    "date": "2022-07-18",
    "findings": "https://github.com/code-423n4/2022-04-mimo-findings/issues",
    "contest": 115
  },
  "html": "<h1 id=\"overview\" style=\"position:relative;\"><a href=\"#overview\" aria-label=\"overview permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Overview</h1>\n<h2 id=\"about-c4\" style=\"position:relative;\"><a href=\"#about-c4\" aria-label=\"about c4 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>About C4</h2>\n<p>Code4rena (C4) is an open organization consisting of security researchers, auditors, developers, and individuals with domain expertise in smart contracts.</p>\n<p>A C4 audit contest is an event in which community participants, referred to as Wardens, review, audit, or analyze smart contract logic in exchange for a bounty provided by sponsoring projects.</p>\n<p>During the audit contest outlined in this document, C4 conducted an analysis of the Mimo DeFi smart contract system written in Solidity. The audit contest took place between April 28 -\nMay 2 2022.</p>\n<h2 id=\"wardens\" style=\"position:relative;\"><a href=\"#wardens\" aria-label=\"wardens permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Wardens</h2>\n<p>46 Wardens contributed reports to the Mimo DeFi contest:</p>\n<ol>\n<li>0xDjango</li>\n<li>unforgiven</li>\n<li><a href=\"https://twitter.com/thePicodes\">Picodes</a></li>\n<li>AlleyCat</li>\n<li><a href=\"https://github.com/SmilingHeretic\">smiling_heretic</a></li>\n<li>robee</li>\n<li><a href=\"https://twitter.com/defsec_\">defsec</a></li>\n<li><a href=\"https://twitter.com/SolidityDev\">pauliax</a></li>\n<li><a href=\"https://twitter.com/JustDravee\">Dravee</a></li>\n<li>0x1f8b</li>\n<li><a href=\"https://twitter.com/0xbroccolirob\">broccolirob</a></li>\n<li><a href=\"https://twitter.com/MaratCerby\">MaratCerby</a></li>\n<li><a href=\"https://www.linkedin.com/in/yahia-chaabane/\">ych18</a></li>\n<li><a href=\"https://twitter.com/JoeStakey\">joestakey</a></li>\n<li><a href=\"https://twitter.com/berndartmueller\">berndartmueller</a></li>\n<li>hyh</li>\n<li>delfin454000</li>\n<li>cccz</li>\n<li>sorrynotsorry</li>\n<li>kebabsec (okkothejawa and <a href=\"https://twitter.com/FlameHorizon1\">FlameHorizon</a>)</li>\n<li><a href=\"https://github.com/z3s/\">z3s</a></li>\n<li><a href=\"https://twitter.com/0xNazgul\">0xNazgul</a></li>\n<li>0x4non</li>\n<li>rotcivegaf</li>\n<li><a href=\"https://instagram.com/vanensurya\">Funen</a></li>\n<li>GimelSec (<a href=\"https://twitter.com/rayn731\">rayn</a> and sces60107)</li>\n<li>samruna</li>\n<li>0x52</li>\n<li>dipp</li>\n<li>peritoflores</li>\n<li>sikorico</li>\n<li><a href=\"https://twitter.com/gallodasballo\">GalloDaSballo</a></li>\n<li>Hawkeye (0xwags and 0xmint)</li>\n<li>ilan</li>\n<li><a href=\"https://twitter.com/luduvigo\">luduvigo</a></li>\n<li><a href=\"https://twitter.com/shenwilly_\">shenwilly</a></li>\n<li>simon135</li>\n<li>0xkatana</li>\n<li>slywaters</li>\n<li><a href=\"https://twitter.com/meidhiwirara\">Tomio</a></li>\n<li><a href=\"https://twitter.com/_0v3rf10w\">0v3rf10w</a></li>\n<li>oyc_109</li>\n<li><a href=\"https://github.com/htadashi\">Tadashi</a></li>\n</ol>\n<p>This contest was judged by <a href=\"https://twitter.com/gzeon\">gzeon</a>.</p>\n<p>Final report assembled by <a href=\"https://twitter.com/liveactionllama\">liveactionllama</a>.</p>\n<h1 id=\"summary\" style=\"position:relative;\"><a href=\"#summary\" aria-label=\"summary permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Summary</h1>\n<p>The C4 analysis yielded an aggregated total of 7 unique vulnerabilities. Of these vulnerabilities, 2 received a risk rating in the category of HIGH severity and 5 received a risk rating in the category of MEDIUM severity.</p>\n<p>Additionally, C4 analysis included 33 reports detailing issues with a risk rating of LOW severity or non-critical. There were also 26 reports recommending gas optimizations.</p>\n<p>All of the issues presented here are linked back to their original finding.</p>\n<h1 id=\"scope\" style=\"position:relative;\"><a href=\"#scope\" aria-label=\"scope permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scope</h1>\n<p>The code under review can be found within the <a href=\"https://github.com/code-423n4/2022-04-mimo\">C4 Mimo DeFi contest repository</a>, and is composed of 26 smart contracts written in the Solidity programming language and includes 2,432 lines of Solidity code.</p>\n<h1 id=\"severity-criteria\" style=\"position:relative;\"><a href=\"#severity-criteria\" aria-label=\"severity criteria permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Severity Criteria</h1>\n<p>C4 assesses the severity of disclosed vulnerabilities according to a methodology based on <a href=\"https://owasp.org/www-community/OWASP_Risk_Rating_Methodology\">OWASP standards</a>.</p>\n<p>Vulnerabilities are divided into three primary risk categories: high, medium, and low/non-critical.</p>\n<p>High-level considerations for vulnerabilities span the following key areas when conducting assessments:</p>\n<ul>\n<li>Malicious Input Handling</li>\n<li>Escalation of privileges</li>\n<li>Arithmetic</li>\n<li>Gas use</li>\n</ul>\n<p>Further information regarding the severity criteria referenced throughout the submission review process, please refer to the documentation provided on <a href=\"https://code4rena.com\">the C4 website</a>.</p>\n<h1 id=\"high-risk-findings-2\" style=\"position:relative;\"><a href=\"#high-risk-findings-2\" aria-label=\"high risk findings 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>High Risk Findings (2)</h1>\n<h2 id=\"h-01-user-can-call-liquidate-and-steal-all-collateral-due-to-arbitrary-router-call\" style=\"position:relative;\"><a href=\"#h-01-user-can-call-liquidate-and-steal-all-collateral-due-to-arbitrary-router-call\" aria-label=\"h 01 user can call liquidate and steal all collateral due to arbitrary router call permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/83\">[H-01] User can call liquidate() and steal all collateral due to arbitrary router call</a></h2>\n<p><em>Submitted by 0xDjango</em></p>\n<p><a href=\"https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/core/contracts/liquidityMining/v2/PARMinerV2.sol#L126\">https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/core/contracts/liquidityMining/v2/PARMinerV2.sol#L126</a></p>\n<p><a href=\"https://github.com/Uniswap/v2-periphery/blob/2efa12e0f2d808d9b49737927f0e416fafa5af68/contracts/UniswapV2Router02.sol#L299\">https://github.com/Uniswap/v2-periphery/blob/2efa12e0f2d808d9b49737927f0e416fafa5af68/contracts/UniswapV2Router02.sol#L299</a></p>\n<p><a href=\"https://github.com/Uniswap/solidity-lib/blob/c01640b0f0f1d8a85cba8de378cc48469fcfd9a6/contracts/libraries/TransferHelper.sol#L47-L50\">https://github.com/Uniswap/solidity-lib/blob/c01640b0f0f1d8a85cba8de378cc48469fcfd9a6/contracts/libraries/TransferHelper.sol#L47-L50</a></p>\n<p>A malicious user is able to steal all collateral of an unhealthy position in <code>PARMinerV2.sol</code>. The code for the <code>liquidate()</code> function is written so that the following steps are followed:</p>\n<ul>\n<li>User calls <code>PARMinerV2.liquidate()</code></li>\n<li>PARMinerV2 performs the liquidation with <code>_a.parallel().core().liquidatePartial()</code></li>\n<li>PARMinerV2 receives the liquidated collateral</li>\n<li>An arbitrary router function is called to swap the collateral to PAR</li>\n<li>Finally, <code>PARMinerV2.liquidate()</code> checks that PARMinerV2’s PAR balance is higher than the balance at the beginning of the function call.</li>\n</ul>\n<p>The exploit occurs with the arbitrary router call. The malicious user is able to supply the <code>dexTxnData</code> parameter which dictates the function call to the router. If the user supplied a function such as UniswapV2Router’s <code>swapExactTokenForETH()</code>, then control flow will be given to the user, allowing them to perform the exploit.</p>\n<p>Note: The Mimo developers have stated that the routers used by the protocol will be DEX Aggregators such as 1inch and Paraswap, but this submission will be referring to UniswapV2Router for simplicity. It can be assumed that the dex aggregators currently allow swapping tokens for ETH.</p>\n<p>Continuing the exploit, once the attacker has gained control due to the ETH transfer, they are able to swap the ETH for PAR. Finally, they deposit the PAR with <code>PARMinerV2.deposit()</code>. This will cause the final check of <code>liquidate()</code> to pass because PARMinerV2’s PAR balance will be larger than the start of the liquidation call.</p>\n<p>The attacker is able to steal all collateral from every unhealthy position that they liquidate. In the most extreme case, the attacker is able to open their own risky positions with the hope that the position becomes unhealthy. They will borrow the PAR and then liquidate themselves to take back the collateral. Thus effectively stealing PAR.</p>\n<h3 id=\"proof-of-concept\" style=\"position:relative;\"><a href=\"#proof-of-concept\" aria-label=\"proof of concept permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Proof of Concept</h3>\n<p>Steps for exploit:</p>\n<ul>\n<li>Attacker monitors unhealthy positions. Finds a position to liquidate.</li>\n<li>Attacker calls <code>PARMinerV2.liquidate()</code></li>\n<li>Position liquidated. Collateral transferred back to <code>PARMinerV2</code></li>\n<li>In the <code>liquidate()</code> function, attacker supplies bytes for <code>UniswapV2Router.swapExactTokensForETH(uint amountIn, uint amountOutMin, address[] calldata path, address to, uint deadline)</code>. For <code>to</code>, they supply the attacker contract.</li>\n<li><code>swapExactTokensForETH()</code> firstly swaps the collateral for ETH and then transfers the ETH to the user with <code>TransferHelper.safeTransferETH(to, amounts[amounts.length - 1]);</code></li>\n<li><code>TransferHelper.safeTransferETH()</code> contains a call to the receiver via <code>(bool success, ) = to.call{value: value}(new bytes(0));</code></li>\n<li>Therefore, the attacker contract will indeed gain control of execution.</li>\n</ul>\n<p>The attacker contract will then perform the following steps:</p>\n<ul>\n<li>Swap the received ETH to PAR.</li>\n<li>Deposit the PAR in <code>PARMinerV2</code></li>\n<li>Withdraw the deposited PAR.</li>\n</ul>\n<h3 id=\"recommended-mitigation-steps\" style=\"position:relative;\"><a href=\"#recommended-mitigation-steps\" aria-label=\"recommended mitigation steps permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recommended Mitigation Steps</h3>\n<p>The arbitrary call to the router contracts is risky because of the various functions that they can contain. Perhaps a solution is to only allow certain calls such as swapping tokens to tokens, not ETH. This would require frequently updated knowledge of the router’s functions, though would be beneficial for security.</p>\n<p>Also, adding a check that the <code>_totalStake</code> variable has not increased during the liquidation call will mitigate the risk of the attacker depositing the PAR to increase the contract’s balance. The attacker would have no option but to transfer the PAR to PARMinerV2 as is intended.</p>\n<p><strong><a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/83#issuecomment-1118331621\">m19 (Mimo Defi) disagreed with severity and commented</a>:</strong></p>\n<blockquote>\n<p>We believe in theory this attack is actually possible, but highly unlikely to happen. It also begs the question of whether it’s really worth it for an attacker to do this because they could just call VaultsCore.liquidate() themselves (for example with a flashloan) and stake all the PAR they profit that way directly.</p>\n</blockquote>\n<p><strong><a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/83#issuecomment-1120159996\">m19 (Mimo DeFi) confirmed and commented</a>:</strong></p>\n<blockquote>\n<p>We misunderstood this exploit wrong and we confirm it. Basically, if the attacker was liquidating a 10,000 PAR position, he could potentially end up with a 10,000 PAR stake + liquidation profits. Our previous understanding was that he could only end up with the profits.</p>\n<p>At the very least we’ll implement a check that <code>totalStake</code> hasn’t changed, we will carefully consider if more changes are needed.</p>\n</blockquote>\n<hr>\n<h2 id=\"h-02-fund-loss-or-theft-by-attacker-with-creating-a-flash-loan-and-setting-supervault-as-receiver-so-executeoperation-will-be-get-called-by-lendingpool-but-with-attackers-specified-params\" style=\"position:relative;\"><a href=\"#h-02-fund-loss-or-theft-by-attacker-with-creating-a-flash-loan-and-setting-supervault-as-receiver-so-executeoperation-will-be-get-called-by-lendingpool-but-with-attackers-specified-params\" aria-label=\"h 02 fund loss or theft by attacker with creating a flash loan and setting supervault as receiver so executeoperation will be get called by lendingpool but with attackers specified params permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/123\">[H-02] Fund loss or theft by attacker with creating a flash loan and setting SuperVault as receiver so executeOperation() will be get called by lendingPool but with attackers specified params</a></h2>\n<p><em>Submitted by unforgiven, also found by Picodes</em></p>\n<p>According to Aave documentation, when requesting flash-loan, it’s possible to specify a <code>receiver</code>, so function <code>executeOperation()</code> of that <code>receiver</code> will be called by <code>lendingPool</code>.\n<a href=\"https://docs.aave.com/developers/v/2.0/guides/flash-loans\">https://docs.aave.com/developers/v/2.0/guides/flash-loans</a>\nIn the <code>SuperVault</code> there is no check to prevent this attack so attacker can use this and perform  <code>griefing attack</code> and make miner contract lose all its funds. or he can create specifically crafted <code>params</code> so when <code>executeOperation()</code> is called by <code>lendingPool</code>, attacker could steal vault’s user funds.</p>\n<h3 id=\"proof-of-concept-1\" style=\"position:relative;\"><a href=\"#proof-of-concept-1\" aria-label=\"proof of concept 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Proof of Concept</h3>\n<p>To exploit this attacker will do this steps:</p>\n<ol>\n<li>will call <code>Aave lendingPool</code> to get a flash-loan and specify <code>SuperVault</code> as <code>receiver</code> of flash-loan. and also create a specific <code>params</code> that invoke <code>Operation.REBALANCE</code> action to change user vault’s collateral.</li>\n<li><code>lendingPool</code> will call <code>executeOperation()</code> of <code>SuperVault</code> with attacker specified data.</li>\n<li><code>executeOperation()</code> will check <code>msg.sender</code> and will process the function call which will cause some dummy exchanges that will cost user exchange fee and flash-loan fee.</li>\n<li>attacker will repeat this attack until user losses all his funds.</li>\n</ol>\n<!---->\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">  function executeOperation(</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    address[] calldata assets,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    uint256[] calldata amounts,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    uint256[] calldata premiums,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    address,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    bytes calldata params</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  ) external returns (bool) {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    require(msg.sender == address(lendingPool), &quot;SV002&quot;);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    (Operation operation, bytes memory operationParams) = abi.decode(params, (Operation, bytes));</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    IERC20 asset = IERC20(assets[0]);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    uint256 flashloanRepayAmount = amounts[0] + premiums[0];</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    if (operation == Operation.LEVERAGE) {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      leverageOperation(asset, flashloanRepayAmount, operationParams);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    }</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    if (operation == Operation.REBALANCE) {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      rebalanceOperation(asset, amounts[0], flashloanRepayAmount, operationParams);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    }</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    if (operation == Operation.EMPTY) {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      emptyVaultOperation(asset, amounts[0], flashloanRepayAmount, operationParams);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    }</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    asset.approve(address(lendingPool), flashloanRepayAmount);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    return true;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  }</span></span></code></pre>\n<p>To steal user fund in <code>SupperVault</code> attacker needs more steps. in all these actions (<code>Operation.REBALANCE</code>, <code>Operation.LEVERAGE</code>, <code>Operation.EMPTY</code>) contract will call <code>aggregatorSwap()</code> with data that are controlled by attacker.</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">  function aggregatorSwap(</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    uint256 dexIndex,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    IERC20 token,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    uint256 amount,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    bytes memory dexTxData</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  ) internal {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    (address proxy, address router) = _dexAP.dexMapping(dexIndex);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    require(proxy != address(0) &amp;&amp; router != address(0), &quot;SV201&quot;); </span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    token.approve(proxy, amount);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    router.call(dexTxData);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  }</span></span></code></pre>\n<p>Attacker can put special data in <code>dexTxData</code> that make contract to do an exchange with bad price. To do this, attacker will create a smart contract that will do this steps:</p>\n<ol>\n<li>manipulate price in exchange with flash loan.</li>\n<li>make a call to <code>executeOperation()</code> by <code>Aave flash-loan</code> with <code>receiver</code> and specific <code>params</code> so that <code>SuperVault</code> will make calls to manipulated exchange for exchanging.</li>\n<li>do the reverse of #1 and pay the flash-loan and steal the user fund.</li>\n</ol>\n<p>The details are:\nAttacker can manipulate swapping pool price with flash-loan, then Attacker will create specific <code>params</code> and perform steps 1 to 4. so contract will try to exchange tokens and because of attacker price manipulation and specific <code>dexTxData</code>, contract will have bad deals.\nAfter that, attacker can reverse the process of swap manipulation and get his  flash-loan tokens and some of <code>SuperVault</code> funds and. then pay the flash-loan.</p>\n<h3 id=\"tools-used\" style=\"position:relative;\"><a href=\"#tools-used\" aria-label=\"tools used permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tools Used</h3>\n<p>VIM</p>\n<h3 id=\"recommended-mitigation-steps-1\" style=\"position:relative;\"><a href=\"#recommended-mitigation-steps-1\" aria-label=\"recommended mitigation steps 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recommended Mitigation Steps</h3>\n<p>There should be some state variable which stores the fact that <code>SuperVault</code> imitated flash-loan.\nWhen contract tries to start flash-loan, it sets the <code>isFlash</code> to <code>True</code> and <code>executeOperation()</code> only accepts calls if <code>isFlash</code> is <code>True</code>. and after the flash loan code will set <code>isFlash</code> to <code>False.</code></p>\n<p><strong><a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/123#issuecomment-1117124780\">m19 (Mimo DeFi) confirmed and commented</a>:</strong></p>\n<blockquote>\n<p>We definitely confirm this issue and intend to fix it.</p>\n</blockquote>\n<hr>\n<h1 id=\"medium-risk-findings-5\" style=\"position:relative;\"><a href=\"#medium-risk-findings-5\" aria-label=\"medium risk findings 5 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Medium Risk Findings (5)</h1>\n<h2 id=\"m-01-decimal-token-underflow-could-produce-loss-of-funds\" style=\"position:relative;\"><a href=\"#m-01-decimal-token-underflow-could-produce-loss-of-funds\" aria-label=\"m 01 decimal token underflow could produce loss of funds permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/55\">[M-01] Decimal token underflow could produce loss of funds</a></h2>\n<p><em>Submitted by 0x1f8b, also found by broccolirob and pauliax</em></p>\n<p><a href=\"https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/core/contracts/oracles/GUniLPOracle.sol#L47\">https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/core/contracts/oracles/GUniLPOracle.sol#L47</a></p>\n<p><a href=\"https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/core/contracts/oracles/GUniLPOracle.sol#L51\">https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/core/contracts/oracles/GUniLPOracle.sol#L51</a></p>\n<p>It is possible to produce underflows with specific tokens which can cause errors when calculating prices.</p>\n<h3 id=\"proof-of-concept-2\" style=\"position:relative;\"><a href=\"#proof-of-concept-2\" aria-label=\"proof of concept 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Proof of Concept</h3>\n<p>The pragma is <code>pragma solidity 0.6.12;</code> therefore, integer overflows must be protected with safe math. But in the case of <a href=\"https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/core/contracts/oracles/GUniLPOracle.sol#L51\">GUniLPOracle</a>, there is a decimal subtraction that could underflow if any token in the pool has more than 18 decimals. This could cause an error when calculating price values.</p>\n<h3 id=\"recommended-mitigation-steps-2\" style=\"position:relative;\"><a href=\"#recommended-mitigation-steps-2\" aria-label=\"recommended mitigation steps 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recommended Mitigation Steps</h3>\n<p>Ensure that tokens have less than 18 decimals.</p>\n<p><strong><a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/55#issuecomment-1118295987\">m19 (Mimo DeFi) confirmed and commented</a>:</strong></p>\n<blockquote>\n<p>We confirm this issue.</p>\n</blockquote>\n<hr>\n<h2 id=\"m-02-users-can-use-updateboost-function-to-claim-unfairly-large-rewards-from-liquidity-mining-contracts-for-themselves-at-cost-of-other-users\" style=\"position:relative;\"><a href=\"#m-02-users-can-use-updateboost-function-to-claim-unfairly-large-rewards-from-liquidity-mining-contracts-for-themselves-at-cost-of-other-users\" aria-label=\"m 02 users can use updateboost function to claim unfairly large rewards from liquidity mining contracts for themselves at cost of other users permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/136\">[M-02] Users can use updateBoost function to claim unfairly large rewards from liquidity mining contracts for themselves at cost of other users.</a></h2>\n<p><em>Submitted by smiling</em>heretic, also found by unforgiven_</p>\n<p><a href=\"https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/core/contracts/liquidityMining/v2/PARMinerV2.sol#L159-L165\">https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/core/contracts/liquidityMining/v2/PARMinerV2.sol#L159-L165</a></p>\n<p><a href=\"https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/core/contracts/liquidityMining/v2/GenericMinerV2.sol#L88-L94\">https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/core/contracts/liquidityMining/v2/GenericMinerV2.sol#L88-L94</a></p>\n<p>Users aware of this vulnerability could effectively steal a portion of liquidity mining rewards from honest users.</p>\n<p>Affected contracts are: <code>SupplyMinerV2</code>, <code>DemandMinerV2</code>, <code>PARMinerV2</code></p>\n<p><code>VotingMinerV2</code> is less affected because locking veMIMO in <code>votingEscrow</code>  triggers a call to <code>releaseMIMO</code> of this miner contract (which in turn updates user’s boost multiplier).</p>\n<h3 id=\"proof-of-concept-3\" style=\"position:relative;\"><a href=\"#proof-of-concept-3\" aria-label=\"proof of concept 3 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Proof of Concept</h3>\n<p>Let’s focus here on <code>SupplyMinerV2</code>. The exploits for other liquidity mining contracts are analogous.</p>\n<h4 id=\"scenario-1\" style=\"position:relative;\"><a href=\"#scenario-1\" aria-label=\"scenario 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scenario 1:</h4>\n<p>Both Alice and Bob deposit 1 WETH to <code>coreVaults</code>  and borrow 100 PAR from <code>coreVaults</code>. They both have no locked veMIMO.</p>\n<p>Now they wait for a month without interacting with the protocol. In the meantime, <code>SupplyMinerV2</code> accumulated 100 MIMO for rewards.</p>\n<p>Alice locks huge amount of veMIMO in <code>votingEscrow</code>, so now her <code>boostMultiplier</code>  is 4.</p>\n<p>Let’s assume that Alice and Bob are the only users of the protocol. Because they borrowed the same amounts of PAR, they should have the same stakes for past month, so a fair reward for each of them (for this past month) should be 50 MIMO. If they simply repay their debts now, 50 MIMO is indeed what they get.</p>\n<p>However if Alice calls <code>supplyMiner.updateBoost(alice)</code> before repaying her debt, she can claim 80 MIMO and leave only 20 MIMO for Bob. She can basically apply the multiplier 4 to her past stake.</p>\n<h4 id=\"scenario-2\" style=\"position:relative;\"><a href=\"#scenario-2\" aria-label=\"scenario 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scenario 2:</h4>\n<p>Both Alice and Bob deposit 1 WETH to <code>coreVaults</code>  and borrow 100 PAR from <code>coreVaults</code>. Bob locks huge amount of veMIMO in <code>votingEscrow</code> for 4 years, so now his <code>boostMultiplier</code> is 4.</p>\n<p>Alice and Bob wait for 4 years without interacting with the protocol.</p>\n<p><code>SupplyMinerV2</code> accumulated 1000 MIMO rewards.</p>\n<p>Because of his locked veMIMO, Bob should be able to claim larger reward than Alice. Maybe not 4 times larger but definitely larger.</p>\n<p>However, if Alice includes  a transaction with call <code>supplyMiner.updateBoost(bob)</code> before Bob’s <code>vaultsCore.repay()</code> , then she can claim 500 MIMO. She can effectively set Bob’s <code>boostMultiplier</code> for past 4 years to 1.</p>\n<h3 id=\"tools-used-1\" style=\"position:relative;\"><a href=\"#tools-used-1\" aria-label=\"tools used 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tools Used</h3>\n<p>Tested in Foundry</p>\n<h3 id=\"recommended-mitigation-steps-3\" style=\"position:relative;\"><a href=\"#recommended-mitigation-steps-3\" aria-label=\"recommended mitigation steps 3 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recommended Mitigation Steps</h3>\n<p>I have 2 ideas:</p>\n<ol>\n<li>Remove <code>updateBoost</code> function. There shouldn’t be a way to update boost multiplier without claiming rewards and updating <code>_userInfo.accAmountPerShare</code> .  So <code>releaseRewards</code>  should be sufficient.</li>\n<li>A better, but also much more difficult solution, would be to redesign boost updates in such a way that distribution of rewards no longer depends on when and how often boost multiplier is updated. If the formula for boost multiplier stays the same, this approach might require calculating integrals of the multiplier as a function of time.</li>\n</ol>\n<p><strong><a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/136#issuecomment-1117148014\">m19 (Mimo DeFi) confirmed and commented</a>:</strong></p>\n<blockquote>\n<p>We agree this is an issue and intend to fix it.</p>\n</blockquote>\n<hr>\n<h2 id=\"m-03-supervaults-leverageswap-and-emptyvaultoperation-can-become-stuck\" style=\"position:relative;\"><a href=\"#m-03-supervaults-leverageswap-and-emptyvaultoperation-can-become-stuck\" aria-label=\"m 03 supervaults leverageswap and emptyvaultoperation can become stuck permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/145\">[M-03] SuperVault’s leverageSwap and emptyVaultOperation can become stuck</a></h2>\n<p><em>Submitted by hyh, also found by cccz, berndartmueller, delfin454000, joestakey, robee, defsec, and 0xDjango</em></p>\n<p><a href=\"https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/supervaults/contracts/SuperVault.sol#L320-L326\">https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/supervaults/contracts/SuperVault.sol#L320-L326</a></p>\n<p><a href=\"https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/supervaults/contracts/SuperVault.sol#L198-L199\">https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/supervaults/contracts/SuperVault.sol#L198-L199</a></p>\n<p>leverageSwap and emptyVaultOperation can be run repeatedly for the same tokens. If these tokens happen to be an ERC20 that do not allow for approval of positive amount when allowance already positive, both functions can become stuck.</p>\n<p><a href=\"https://github.com/d-xo/weird-erc20#approval-race-protections\">https://github.com/d-xo/weird-erc20#approval-race-protections</a></p>\n<p>In both cases, logic doesn’t seem to guarantee full usage of the allowance given. If it’s not used fully, the token will revert each next approve attempt, which will render the functions unavailable for the token.</p>\n<p>While emptyVaultOperation can be cured by emptying the balance and rerun, in the leverageSwap case there is no such fix possible.</p>\n<p>Setting severity to medium as this clearly impacts leverageSwap and emptyVaultOperation availability to the users.</p>\n<h3 id=\"proof-of-concept-4\" style=\"position:relative;\"><a href=\"#proof-of-concept-4\" aria-label=\"proof of concept 4 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Proof of Concept</h3>\n<p>leverageSwap calls target token for maximum approval of core each time:</p>\n<p><a href=\"https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/supervaults/contracts/SuperVault.sol#L320-L326\">https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/supervaults/contracts/SuperVault.sol#L320-L326</a></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">///@param token The leveraged asset to swap PAR for</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">leverageSwap</span><span class=\"mtk1\">(</span><span class=\"mtk12\">bytes</span><span class=\"mtk1\"> </span><span class=\"mtk12\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk12\">params</span><span class=\"mtk1\">, </span><span class=\"mtk12\">IERC20</span><span class=\"mtk1\"> </span><span class=\"mtk12\">token</span><span class=\"mtk1\">) </span><span class=\"mtk11\">internal</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    (</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">parToSell</span><span class=\"mtk1\">, </span><span class=\"mtk12\">bytes</span><span class=\"mtk1\"> </span><span class=\"mtk12\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk12\">dexTxData</span><span class=\"mtk1\">, </span><span class=\"mtk12\">uint</span><span class=\"mtk1\"> </span><span class=\"mtk12\">dexIndex</span><span class=\"mtk1\">) = </span><span class=\"mtk12\">abi</span><span class=\"mtk1\">.</span><span class=\"mtk11\">decode</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">params</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      (</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">, </span><span class=\"mtk12\">bytes</span><span class=\"mtk1\">, </span><span class=\"mtk12\">uint</span><span class=\"mtk1\"> )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">token</span><span class=\"mtk1\">.</span><span class=\"mtk11\">approve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">a</span><span class=\"mtk1\">.</span><span class=\"mtk11\">core</span><span class=\"mtk1\">()), </span><span class=\"mtk7\">2</span><span class=\"mtk1\">**</span><span class=\"mtk7\">256</span><span class=\"mtk1\"> - </span><span class=\"mtk7\">1</span><span class=\"mtk1\">);</span></span></span></code></pre>\n<p>Some tokens do not have maximum amount as an exception, simply reverting any attempt to approve positive from positive, for example current USDT contract, L205:</p>\n<p><a href=\"https://etherscan.io/address/0xdac17f958d2ee523a2206206994597c13d831ec7#code\">https://etherscan.io/address/0xdac17f958d2ee523a2206206994597c13d831ec7#code</a></p>\n<p>I.e. if leverageSwap be run again with USDT it will revert all the times after the first.</p>\n<p>emptyVaultOperation approves core for the whole balance of stablex:</p>\n<p><a href=\"https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/supervaults/contracts/SuperVault.sol#L198-L199\">https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/supervaults/contracts/SuperVault.sol#L198-L199</a></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">IERC20</span><span class=\"mtk1\"> </span><span class=\"mtk12\">par</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">IERC20</span><span class=\"mtk1\">(</span><span class=\"mtk12\">a</span><span class=\"mtk1\">.</span><span class=\"mtk11\">stablex</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">par</span><span class=\"mtk1\">.</span><span class=\"mtk11\">approve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">a</span><span class=\"mtk1\">.</span><span class=\"mtk11\">core</span><span class=\"mtk1\">()), </span><span class=\"mtk12\">par</span><span class=\"mtk1\">.</span><span class=\"mtk11\">balanceOf</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">)));</span></span></span></code></pre>\n<h3 id=\"recommended-mitigation-steps-4\" style=\"position:relative;\"><a href=\"#recommended-mitigation-steps-4\" aria-label=\"recommended mitigation steps 4 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recommended Mitigation Steps</h3>\n<p>Consider adding zero amount approval before actual amount approval, i.e. force zero allowance before current approval.</p>\n<p><strong><a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/145\">m19 (Mimo DeFi) acknowledged</a></strong></p>\n<p><strong><a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/145#issuecomment-1146831466\">gzeoneth (judge) commented</a>:</strong></p>\n<blockquote>\n<p>Having <code>approve(0)</code> first will still revert with USDT because the interface expect it to return a bool but USDT return void. Fund also won’t be stuck because it will revert. Judging as Med Risk as function availability could be impacted. Unlike the core protocol, <code>SuperVault</code> can take any token as input and USDT is listed on various lending protocol like AAVE.</p>\n</blockquote>\n<hr>\n<h2 id=\"m-04-non-standard-erc20-tokens-are-not-supported\" style=\"position:relative;\"><a href=\"#m-04-non-standard-erc20-tokens-are-not-supported\" aria-label=\"m 04 non standard erc20 tokens are not supported permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/127\">[M-04] Non-standard ERC20 Tokens are Not Supported</a></h2>\n<p><em>Submitted by ych18, also found by MaratCerby, robee, and defsec</em></p>\n<p>When trying to call <code>SuperVault.executeOperation</code>  the transaction reverts. This is because the call to <code>asset.approve()</code> in line{97} doesn’t match the expected function signature of <code>approve()</code> on the target contract like in the case of USDT.</p>\n<p>This issue exists in any call to approve function when the asset could be any ERC20.</p>\n<p>Recommendation : consider using safeApprove of OZ</p>\n<p><strong><a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/127\">m19 (Mimo DeFi) acknowledged</a></strong></p>\n<p><strong><a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/127#issuecomment-1146832811\">gzeoneth (judge) decreased severity to Medium and commented</a>:</strong></p>\n<blockquote>\n<p>Judging as Med Risk as function availability could be impacted. Unlike the core protocol, <code>SuperVault</code> can take any token as input and USDT is listed on various lending protocol like AAVE.</p>\n</blockquote>\n<hr>\n<h2 id=\"m-05-abdkmath64-performs-multiplication-on-results-of-division\" style=\"position:relative;\"><a href=\"#m-05-abdkmath64-performs-multiplication-on-results-of-division\" aria-label=\"m 05 abdkmath64 performs multiplication on results of division permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/151\">[M-05] ABDKMath64 performs multiplication on results of division</a></h2>\n<p><em>Submitted by AlleyCat</em></p>\n<p><a href=\"https://github.com/code-423n4/2022-04-mimo/blob/main/core/contracts/libraries/ABDKMath64x64.sol#L626\">https://github.com/code-423n4/2022-04-mimo/blob/main/core/contracts/libraries/ABDKMath64x64.sol#L626</a></p>\n<p><a href=\"https://github.com/code-423n4/2022-04-mimo/blob/main/core/contracts/libraries/ABDKMath64x64.sol#L629\">https://github.com/code-423n4/2022-04-mimo/blob/main/core/contracts/libraries/ABDKMath64x64.sol#L629</a></p>\n<p><a href=\"https://github.com/code-423n4/2022-04-mimo/blob/main/core/contracts/libraries/ABDKMath64x64.sol#L630\">https://github.com/code-423n4/2022-04-mimo/blob/main/core/contracts/libraries/ABDKMath64x64.sol#L630</a></p>\n<p>Solidity could truncate the results, performing multiplication before division will prevent rounding/truncation in solidity math.</p>\n<h3 id=\"recommended-mitigation-steps-5\" style=\"position:relative;\"><a href=\"#recommended-mitigation-steps-5\" aria-label=\"recommended mitigation steps 5 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recommended Mitigation Steps</h3>\n<p>Consider ordering multiplication first.</p>\n<p><strong><a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/151\">m19 (Mimo DeFi) acknowledged</a></strong></p>\n<hr>\n<h1 id=\"low-risk-and-non-critical-issues\" style=\"position:relative;\"><a href=\"#low-risk-and-non-critical-issues\" aria-label=\"low risk and non critical issues permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Low Risk and Non-Critical Issues</h1>\n<p>For this contest, 33 reports were submitted by wardens detailing low risk and non-critical issues. The <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/153\">report highlighted below</a> by <strong>Dravee</strong> received the top score from the judge.</p>\n<p><em>The following wardens also submitted reports: <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/104\">robee</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/124\">defsec</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/137\">pauliax</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/87\">0xDjango</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/117\">berndartmueller</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/165\">hyh</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/114\">joestakey</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/66\">0x52</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/113\">dipp</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/74\">kebabsec</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/149\">peritoflores</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/109\">Picodes</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/106\">sikorico</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/102\">sorrynotsorry</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/96\">z3s</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/58\">0x1f8b</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/3\">0x4non</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/154\">AlleyCat</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/61\">cccz</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/141\">delfin454000</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/152\">Funen</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/12\">GalloDaSballo</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/92\">GimelSec</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/162\">Hawkeye</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/110\">ilan</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/10\">luduvigo</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/51\">MaratCerby</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/23\">rotcivegaf</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/13\">samruna</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/79\">shenwilly</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/72\">simon135</a>, and <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/98\">unforgiven</a>.</em></p>\n<h2 id=\"table-of-contents\" style=\"position:relative;\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h2>\n<p>See <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/153\">original submission</a> for details.</p>\n<h2 id=\"l-01-approve-should-be-replaced-with-safeapprove-or-safeincreaseallowance--safedecreaseallowance\" style=\"position:relative;\"><a href=\"#l-01-approve-should-be-replaced-with-safeapprove-or-safeincreaseallowance--safedecreaseallowance\" aria-label=\"l 01 approve should be replaced with safeapprove or safeincreaseallowance  safedecreaseallowance permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[L-01] <code>approve</code> should be replaced with <code>safeApprove</code> or <code>safeIncreaseAllowance() / safeDecreaseAllowance()</code></h2>\n<p><code>approve</code> is subject to a known front-running attack. Consider using <code>safeApprove</code> instead:</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">   </span><span class=\"mtk7\">58</span><span class=\"mtk1\">:     </span><span class=\"mtk12\">_par</span><span class=\"mtk1\">.</span><span class=\"mtk11\">approve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">_a</span><span class=\"mtk1\">.</span><span class=\"mtk11\">parallel</span><span class=\"mtk1\">().</span><span class=\"mtk11\">core</span><span class=\"mtk1\">()), </span><span class=\"mtk11\">uint256</span><span class=\"mtk1\">(-</span><span class=\"mtk7\">1</span><span class=\"mtk1\">));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">125</span><span class=\"mtk1\">:     </span><span class=\"mtk12\">collateralToken</span><span class=\"mtk1\">.</span><span class=\"mtk11\">approve</span><span class=\"mtk1\">(</span><span class=\"mtk12\">proxy</span><span class=\"mtk1\">, </span><span class=\"mtk12\">collateralToken</span><span class=\"mtk1\">.</span><span class=\"mtk11\">balanceOf</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">)));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">echidna</span><span class=\"mtk1\">/</span><span class=\"mtk12\">TInceptionVaultHealthy</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">33</span><span class=\"mtk1\">:     </span><span class=\"mtk12\">_weth</span><span class=\"mtk1\">.</span><span class=\"mtk11\">approve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">a</span><span class=\"mtk1\">), </span><span class=\"mtk12\">_adminDepositAmount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">39</span><span class=\"mtk1\">:     </span><span class=\"mtk12\">_link</span><span class=\"mtk1\">.</span><span class=\"mtk11\">approve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">v</span><span class=\"mtk1\">), </span><span class=\"mtk12\">_userDepositAmount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">47</span><span class=\"mtk1\">:     </span><span class=\"mtk12\">_par</span><span class=\"mtk1\">.</span><span class=\"mtk11\">approve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">_inceptionVaultsCore</span><span class=\"mtk1\">), </span><span class=\"mtk12\">_MAX_INT</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">echidna</span><span class=\"mtk1\">/</span><span class=\"mtk12\">TInceptionVaultUnhealthy</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">37</span><span class=\"mtk1\">:     </span><span class=\"mtk12\">_weth</span><span class=\"mtk1\">.</span><span class=\"mtk11\">approve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">a</span><span class=\"mtk1\">), </span><span class=\"mtk12\">_adminDepositAmount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">43</span><span class=\"mtk1\">:     </span><span class=\"mtk12\">_link</span><span class=\"mtk1\">.</span><span class=\"mtk11\">approve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">v</span><span class=\"mtk1\">), </span><span class=\"mtk12\">_userDepositAmount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">52</span><span class=\"mtk1\">:     </span><span class=\"mtk12\">_par</span><span class=\"mtk1\">.</span><span class=\"mtk11\">approve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">_inceptionVaultsCore</span><span class=\"mtk1\">), </span><span class=\"mtk12\">_MAX_INT</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">echidna</span><span class=\"mtk1\">/</span><span class=\"mtk12\">TInceptionVaultUnhealthyAssertion</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">36</span><span class=\"mtk1\">:     </span><span class=\"mtk12\">_weth</span><span class=\"mtk1\">.</span><span class=\"mtk11\">approve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">a</span><span class=\"mtk1\">), </span><span class=\"mtk12\">_adminDepositAmount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">42</span><span class=\"mtk1\">:     </span><span class=\"mtk12\">_link</span><span class=\"mtk1\">.</span><span class=\"mtk11\">approve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">v</span><span class=\"mtk1\">), </span><span class=\"mtk12\">_userDepositAmount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">51</span><span class=\"mtk1\">:     </span><span class=\"mtk12\">_par</span><span class=\"mtk1\">.</span><span class=\"mtk11\">approve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">_inceptionVaultsCore</span><span class=\"mtk1\">), </span><span class=\"mtk12\">_MAX_INT</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">echidna</span><span class=\"mtk1\">/</span><span class=\"mtk12\">TInceptionVaultUnhealthyProperty</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">35</span><span class=\"mtk1\">:     </span><span class=\"mtk12\">_weth</span><span class=\"mtk1\">.</span><span class=\"mtk11\">approve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">a</span><span class=\"mtk1\">), </span><span class=\"mtk12\">_adminDepositAmount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">41</span><span class=\"mtk1\">:     </span><span class=\"mtk12\">_link</span><span class=\"mtk1\">.</span><span class=\"mtk11\">approve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">v</span><span class=\"mtk1\">), </span><span class=\"mtk12\">_userDepositAmount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">50</span><span class=\"mtk1\">:     </span><span class=\"mtk12\">_par</span><span class=\"mtk1\">.</span><span class=\"mtk11\">approve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">_inceptionVaultsCore</span><span class=\"mtk1\">), </span><span class=\"mtk12\">_MAX_INT</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">supervaults</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">SuperVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">   </span><span class=\"mtk7\">97</span><span class=\"mtk1\">:     </span><span class=\"mtk12\">asset</span><span class=\"mtk1\">.</span><span class=\"mtk11\">approve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">lendingPool</span><span class=\"mtk1\">), </span><span class=\"mtk12\">flashloanRepayAmount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">149</span><span class=\"mtk1\">:     </span><span class=\"mtk11\">IERC20</span><span class=\"mtk1\">(</span><span class=\"mtk12\">toCollateral</span><span class=\"mtk1\">).</span><span class=\"mtk11\">approve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">a</span><span class=\"mtk1\">.</span><span class=\"mtk11\">core</span><span class=\"mtk1\">()), </span><span class=\"mtk12\">depositAmount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">199</span><span class=\"mtk1\">:     </span><span class=\"mtk12\">par</span><span class=\"mtk1\">.</span><span class=\"mtk11\">approve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">a</span><span class=\"mtk1\">.</span><span class=\"mtk11\">core</span><span class=\"mtk1\">()), </span><span class=\"mtk12\">par</span><span class=\"mtk1\">.</span><span class=\"mtk11\">balanceOf</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">)));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">273</span><span class=\"mtk1\">:     </span><span class=\"mtk12\">token</span><span class=\"mtk1\">.</span><span class=\"mtk11\">approve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">a</span><span class=\"mtk1\">.</span><span class=\"mtk11\">core</span><span class=\"mtk1\">()), </span><span class=\"mtk12\">amount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">289</span><span class=\"mtk1\">:     </span><span class=\"mtk12\">token</span><span class=\"mtk1\">.</span><span class=\"mtk11\">approve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">a</span><span class=\"mtk1\">.</span><span class=\"mtk11\">core</span><span class=\"mtk1\">()), </span><span class=\"mtk12\">depositAmount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">326</span><span class=\"mtk1\">:     </span><span class=\"mtk12\">token</span><span class=\"mtk1\">.</span><span class=\"mtk11\">approve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">a</span><span class=\"mtk1\">.</span><span class=\"mtk11\">core</span><span class=\"mtk1\">()), </span><span class=\"mtk7\">2</span><span class=\"mtk1\">**</span><span class=\"mtk7\">256</span><span class=\"mtk1\"> - </span><span class=\"mtk7\">1</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">345</span><span class=\"mtk1\">:     </span><span class=\"mtk12\">token</span><span class=\"mtk1\">.</span><span class=\"mtk11\">approve</span><span class=\"mtk1\">(</span><span class=\"mtk12\">proxy</span><span class=\"mtk1\">, </span><span class=\"mtk12\">amount</span><span class=\"mtk1\">);</span></span></span></code></pre>\n<p>Keep in mind though that it would be actually better to replace safeApprove() with safeIncreaseAllowance() or safeDecreaseAllowance().</p>\n<p>See this discussion: <a href=\"https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2219\">SafeERC20.safeApprove() Has unnecessary and unsecure added behavior</a></p>\n<h2 id=\"l-02-add-constructor-initializers\" style=\"position:relative;\"><a href=\"#l-02-add-constructor-initializers\" aria-label=\"l 02 add constructor initializers permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[L-02] Add constructor initializers</h2>\n<p>As per <a href=\"https://forum.openzeppelin.com/t/uupsupgradeable-vulnerability-post-mortem/15680/6\">OpenZeppelinâ€™s (OZ) recommendation</a>, â€œThe guidelines are now to make it impossible for <em>anyone</em> to run <code>initialize</code> on an implementation contract, by adding an empty constructor with the <code>initializer</code> modifier. So the implementation contract gets initialized automatically upon deployment.â€</p>\n<p>Note that this behaviour is also incorporated the <a href=\"https://wizard.openzeppelin.com/\">OZ Wizard</a> since the UUPS vulnerability discovery: â€œAdditionally, we modified the code generated by the <a href=\"https://wizard.openzeppelin.com/\">Wizard 19</a> to include a constructor that automatically initializes the implementation when deployed.â€</p>\n<p>Furthermore, this thwarts any attempts to frontrun the initialization tx of these contracts:</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">35</span><span class=\"mtk1\">:   </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">initialize</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/InceptionVaultsCore.sol:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">40</span><span class=\"mtk1\">:   </span><span class=\"mtk10\">function</span><span class=\"mtk1\"> </span><span class=\"mtk10\">initialize</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">core</span><span class=\"mtk1\">/</span><span class=\"mtk10\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk10\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk10\">InceptionVaultsDataProvider</span><span class=\"mtk1\">.</span><span class=\"mtk10\">sol</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">30</span><span class=\"mtk1\">:   </span><span class=\"mtk10\">function</span><span class=\"mtk1\"> </span><span class=\"mtk10\">initialize</span><span class=\"mtk1\">(</span><span class=\"mtk10\">IInceptionVaultsCore</span><span class=\"mtk1\"> </span><span class=\"mtk10\">inceptionVaultsCore</span><span class=\"mtk1\">, </span><span class=\"mtk10\">IAddressProvider</span><span class=\"mtk1\"> </span><span class=\"mtk10\">addressProvider</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">core</span><span class=\"mtk1\">/</span><span class=\"mtk10\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk10\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk10\">priceFeed</span><span class=\"mtk1\">/</span><span class=\"mtk10\">ChainlinkInceptionPriceFeed</span><span class=\"mtk1\">.</span><span class=\"mtk10\">sol</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">29</span><span class=\"mtk1\">:   </span><span class=\"mtk10\">function</span><span class=\"mtk1\"> </span><span class=\"mtk10\">initialize</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">supervaults</span><span class=\"mtk1\">/</span><span class=\"mtk10\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk10\">SuperVault</span><span class=\"mtk1\">.</span><span class=\"mtk10\">sol</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">49</span><span class=\"mtk1\">:   </span><span class=\"mtk10\">function</span><span class=\"mtk1\"> </span><span class=\"mtk10\">initialize</span><span class=\"mtk1\">(</span></span></span></code></pre>\n<h2 id=\"l-03-missing-address0-checks\" style=\"position:relative;\"><a href=\"#l-03-missing-address0-checks\" aria-label=\"l 03 missing address0 checks permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[L-03] Missing address(0) checks</h2>\n<p>According to Slither:</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk11\">initialize</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">,</span><span class=\"mtk12\">IAddressProvider</span><span class=\"mtk1\">,</span><span class=\"mtk12\">IDebtNotifier</span><span class=\"mtk1\">,</span><span class=\"mtk12\">IWETH</span><span class=\"mtk1\">,</span><span class=\"mtk12\">IERC20</span><span class=\"mtk1\">,</span><span class=\"mtk12\">IInceptionVaultsCore</span><span class=\"mtk1\">).</span><span class=\"mtk11\">_owner</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">36</span><span class=\"mtk1\">) </span><span class=\"mtk12\">lacks</span><span class=\"mtk1\"> </span><span class=\"mtk12\">a</span><span class=\"mtk1\"> </span><span class=\"mtk12\">zero</span><span class=\"mtk1\">-</span><span class=\"mtk12\">check</span><span class=\"mtk1\"> on :</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  - </span><span class=\"mtk12\">owner</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">_owner</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">48</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">InceptionVaultsCore</span><span class=\"mtk1\">.</span><span class=\"mtk11\">initialize</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">,</span><span class=\"mtk12\">IInceptionVaultsCore</span><span class=\"mtk1\">.</span><span class=\"mtk12\">VaultConfig</span><span class=\"mtk1\">,</span><span class=\"mtk12\">IERC20</span><span class=\"mtk1\">,</span><span class=\"mtk12\">IAddressProvider</span><span class=\"mtk1\">,</span><span class=\"mtk12\">IAdminInceptionVault</span><span class=\"mtk1\">,</span><span class=\"mtk12\">IInceptionVaultsDataProvider</span><span class=\"mtk1\">,</span><span class=\"mtk12\">IInceptionVaultPriceFeed</span><span class=\"mtk1\">).</span><span class=\"mtk11\">_owner</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultsCore</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">41</span><span class=\"mtk1\">) </span><span class=\"mtk12\">lacks</span><span class=\"mtk1\"> </span><span class=\"mtk12\">a</span><span class=\"mtk1\"> </span><span class=\"mtk12\">zero</span><span class=\"mtk1\">-</span><span class=\"mtk12\">check</span><span class=\"mtk1\"> on :</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  - </span><span class=\"mtk12\">owner</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">_owner</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultsCore</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">56</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">DemandMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setFeeCollector</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">).</span><span class=\"mtk11\">feeCollector</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">DemandMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">46</span><span class=\"mtk1\">) </span><span class=\"mtk12\">lacks</span><span class=\"mtk1\"> </span><span class=\"mtk12\">a</span><span class=\"mtk1\"> </span><span class=\"mtk12\">zero</span><span class=\"mtk1\">-</span><span class=\"mtk12\">check</span><span class=\"mtk1\"> on :</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  - </span><span class=\"mtk12\">_feeCollector</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">feeCollector</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">DemandMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">47</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">liquidate</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">,</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">,</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">,</span><span class=\"mtk12\">bytes</span><span class=\"mtk1\">).</span><span class=\"mtk11\">router</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">124</span><span class=\"mtk1\">) </span><span class=\"mtk12\">lacks</span><span class=\"mtk1\"> </span><span class=\"mtk12\">a</span><span class=\"mtk1\"> </span><span class=\"mtk12\">zero</span><span class=\"mtk1\">-</span><span class=\"mtk12\">check</span><span class=\"mtk1\"> on :</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  - </span><span class=\"mtk12\">router</span><span class=\"mtk1\">.</span><span class=\"mtk11\">call</span><span class=\"mtk1\">(</span><span class=\"mtk12\">dexTxData</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">126</span><span class=\"mtk1\">)</span></span></span></code></pre>\n<h2 id=\"l-04-add-a-timelock-to-critical-functions\" style=\"position:relative;\"><a href=\"#l-04-add-a-timelock-to-critical-functions\" aria-label=\"l 04 add a timelock to critical functions permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[L-04] Add a timelock to critical functions</h2>\n<p>It is a good practice to give time for users to react and adjust to critical changes. A timelock provides more guarantees and reduces the level of trust required, thus decreasing risk for users. It also indicates that the project is legitimate (less risk of a malicious Manager making a frontrunning/sandwich attack on the fees).</p>\n<p>Consider adding a timelock to:</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">DemandMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">56</span><span class=\"mtk1\">:   </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">setFeeConfig</span><span class=\"mtk1\">(</span><span class=\"mtk12\">FeeConfig</span><span class=\"mtk1\"> </span><span class=\"mtk12\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk12\">newFeeConfig</span><span class=\"mtk1\">) </span><span class=\"mtk11\">external</span><span class=\"mtk1\"> </span><span class=\"mtk11\">override</span><span class=\"mtk1\"> </span><span class=\"mtk11\">onlyManager</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">57</span><span class=\"mtk1\">:     </span><span class=\"mtk12\">_feeConfig</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">newFeeConfig</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">58</span><span class=\"mtk1\">:     </span><span class=\"mtk12\">emit</span><span class=\"mtk1\"> </span><span class=\"mtk11\">FeeConfigSet</span><span class=\"mtk1\">(</span><span class=\"mtk12\">newFeeConfig</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">59</span><span class=\"mtk1\">:   }</span></span></span></code></pre>\n<h2 id=\"l-05-fee-in-demandminerv2setfeeconfig-should-be-upper-bounded\" style=\"position:relative;\"><a href=\"#l-05-fee-in-demandminerv2setfeeconfig-should-be-upper-bounded\" aria-label=\"l 05 fee in demandminerv2setfeeconfig should be upper bounded permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[L-05] Fee in <code>DemandMinerV2.setFeeConfig()</code> should be upper-bounded</h2>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">DemandMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">56</span><span class=\"mtk1\">:   </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">setFeeConfig</span><span class=\"mtk1\">(</span><span class=\"mtk12\">FeeConfig</span><span class=\"mtk1\"> </span><span class=\"mtk12\">memory</span><span class=\"mtk1\"> </span><span class=\"mtk12\">newFeeConfig</span><span class=\"mtk1\">) </span><span class=\"mtk11\">external</span><span class=\"mtk1\"> </span><span class=\"mtk11\">override</span><span class=\"mtk1\"> </span><span class=\"mtk11\">onlyManager</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">57</span><span class=\"mtk1\">:     </span><span class=\"mtk12\">_feeConfig</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">newFeeConfig</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">58</span><span class=\"mtk1\">:     </span><span class=\"mtk12\">emit</span><span class=\"mtk1\"> </span><span class=\"mtk11\">FeeConfigSet</span><span class=\"mtk1\">(</span><span class=\"mtk12\">newFeeConfig</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">59</span><span class=\"mtk1\">:   }</span></span></span></code></pre>\n<h2 id=\"n-01-unused-named-returns\" style=\"position:relative;\"><a href=\"#n-01-unused-named-returns\" aria-label=\"n 01 unused named returns permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[N-01] Unused named returns</h2>\n<p>Using both named returns and a return statement isn’t necessary. Removing one of those can improve code clarity:</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">priceFeed</span><span class=\"mtk1\">/</span><span class=\"mtk12\">ChainlinkInceptionPriceFeed</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">73</span><span class=\"mtk1\">:   </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">getAssetPrice</span><span class=\"mtk1\">() </span><span class=\"mtk11\">public</span><span class=\"mtk1\"> </span><span class=\"mtk11\">view</span><span class=\"mtk1\"> </span><span class=\"mtk11\">override</span><span class=\"mtk1\"> </span><span class=\"mtk11\">returns</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">price</span><span class=\"mtk1\">) {</span></span></span></code></pre>\n<h2 id=\"n-02-useless-import-safemath\" style=\"position:relative;\"><a href=\"#n-02-useless-import-safemath\" aria-label=\"n 02 useless import safemath permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[N-02] Useless import: SafeMath</h2>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">SuperVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">6</span><span class=\"mtk1\">: </span><span class=\"mtk15\">import</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&quot;@openzeppelin/contracts/utils/math/SafeMath.sol&quot;</span><span class=\"mtk1\">; </span><span class=\"mtk3\">//@audit NC: useless import</span></span></span></code></pre>\n<h2 id=\"n-03-the-visibility-for-constructor-is-ignored\" style=\"position:relative;\"><a href=\"#n-03-the-visibility-for-constructor-is-ignored\" aria-label=\"n 03 the visibility for constructor is ignored permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[N-03] The visibility for constructor is ignored</h2>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">SuperVaultFactory</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">17</span><span class=\"mtk1\">:   </span><span class=\"mtk11\">constructor</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\"> </span><span class=\"mtk12\">_base</span><span class=\"mtk1\">) </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> {</span></span></span></code></pre>\n<p><strong><a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/153#issuecomment-1120354471\">m19 (Mimo DeFi) commented</a>:</strong></p>\n<blockquote>\n<p>Very clear and well structured QA report</p>\n</blockquote>\n<p><strong><a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/153#issuecomment-1146848674\">gzeoneth (judge) commented</a>:</strong></p>\n<blockquote>\n<p>For L-01 I don’t think there are front-running risk but the suggestion to use <code>safeIncreaseAllowance</code> is fine\nOtherwise looks good and I think the severity of each issue is well labeled.</p>\n</blockquote>\n<hr>\n<h1 id=\"gas-optimizations\" style=\"position:relative;\"><a href=\"#gas-optimizations\" aria-label=\"gas optimizations permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gas Optimizations</h1>\n<p>For this contest, 26 reports were submitted by wardens detailing gas optimizations. The <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/139\">report highlighted below</a> by <strong>Dravee</strong> received the top score from the judge.</p>\n<p><em>The following wardens also submitted reports: <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/111\">joestakey</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/105\">robee</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/82\">0xNazgul</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/129\">defsec</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/71\">0xkatana</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/68\">slywaters</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/97\">Tomio</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/78\">0v3rf10w</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/2\">0x4non</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/88\">0xDjango</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/140\">delfin454000</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/60\">MaratCerby</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/20\">oyc_109</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/138\">pauliax</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/14\">rotcivegaf</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/101\">sorrynotsorry</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/59\">0x1f8b</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/150\">Funen</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/89\">GimelSec</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/75\">kebabsec</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/108\">Picodes</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/11\">samruna</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/157\">Tadashi</a>, <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/128\">ych18</a>, and <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/95\">z3s</a>.</em></p>\n<h2 id=\"table-of-contents-1\" style=\"position:relative;\"><a href=\"#table-of-contents-1\" aria-label=\"table of contents 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h2>\n<p>See <a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/139\">original submission</a>.</p>\n<h2 id=\"g-01-help-the-optimizer-by-saving-a-storage-variables-reference-instead-of-repeatedly-fetching-it\" style=\"position:relative;\"><a href=\"#g-01-help-the-optimizer-by-saving-a-storage-variables-reference-instead-of-repeatedly-fetching-it\" aria-label=\"g 01 help the optimizer by saving a storage variables reference instead of repeatedly fetching it permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[G-01] Help the optimizer by saving a storage variable’s reference instead of repeatedly fetching it</h2>\n<p>To help the optimizer, declare a <code>storage</code> type variable and use it instead of repeatedly fetching the reference in a map or an array.</p>\n<p>The effect can be quite significant.</p>\n<p>As an example, instead of repeatedly calling <code>someMap[someIndex]</code>, save its reference like this: <code>SomeStruct storage someStruct = someMap[someIndex]</code> and use it.</p>\n<p>Instances include (check the <code>@audit</code> tags):</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"12\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">dex</span><span class=\"mtk1\">/</span><span class=\"mtk12\">DexAddressProvider</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">53</span><span class=\"mtk1\">:     </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">_dexMapping</span><span class=\"mtk1\">[</span><span class=\"mtk12\">index</span><span class=\"mtk1\">].</span><span class=\"mtk12\">proxy</span><span class=\"mtk1\">, </span><span class=\"mtk12\">_dexMapping</span><span class=\"mtk1\">[</span><span class=\"mtk12\">index</span><span class=\"mtk1\">].</span><span class=\"mtk12\">router</span><span class=\"mtk1\">);  </span><span class=\"mtk3\">//@audit gas: should declare a storage variable &quot;Dex storage _dex = _dexMapping[index]&quot;</span></span></span></code></pre>\n<h2 id=\"g-02-caching-external-values-in-memory\" style=\"position:relative;\"><a href=\"#g-02-caching-external-values-in-memory\" aria-label=\"g 02 caching external values in memory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[G-02] Caching external values in memory</h2>\n<p>See the <code>@audit</code> tags for further details:</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"13\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">dex</span><span class=\"mtk1\">/</span><span class=\"mtk12\">DexAddressProvider</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">22</span><span class=\"mtk1\">:     </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">_a</span><span class=\"mtk1\">.</span><span class=\"mtk11\">controller</span><span class=\"mtk1\">().</span><span class=\"mtk11\">hasRole</span><span class=\"mtk1\">(</span><span class=\"mtk12\">_a</span><span class=\"mtk1\">.</span><span class=\"mtk11\">controller</span><span class=\"mtk1\">().</span><span class=\"mtk11\">MANAGER_ROLE</span><span class=\"mtk1\">(), </span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">), </span><span class=\"mtk8\">&quot;LM010&quot;</span><span class=\"mtk1\">); </span><span class=\"mtk3\">//@audit gas: should cache _a.controller()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">supervaults</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">SuperVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">369</span><span class=\"mtk1\">:     </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">ga</span><span class=\"mtk1\">.</span><span class=\"mtk11\">mimo</span><span class=\"mtk1\">().</span><span class=\"mtk11\">balanceOf</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">)) &gt; </span><span class=\"mtk7\">0</span><span class=\"mtk1\">) {  </span><span class=\"mtk3\">//@audit gas: should cache ga.mimo()</span></span></span></code></pre>\n<h2 id=\"g-03-using-an-existing-memory-variable-instead-of-reading-storage\" style=\"position:relative;\"><a href=\"#g-03-using-an-existing-memory-variable-instead-of-reading-storage\" aria-label=\"g 03 using an existing memory variable instead of reading storage permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[G-03] Using an existing memory variable instead of reading storage</h2>\n<p>See the <code>@audit</code> tags for further details:</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"14\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">oracles</span><span class=\"mtk1\">/</span><span class=\"mtk12\">BalancerV2LPOracle</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">41</span><span class=\"mtk1\">:     (</span><span class=\"mtk12\">address</span><span class=\"mtk1\"> </span><span class=\"mtk12\">_pool</span><span class=\"mtk1\">, </span><span class=\"mtk12\">IBalancerVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">PoolSpecialization</span><span class=\"mtk1\"> </span><span class=\"mtk12\">tokensNum</span><span class=\"mtk1\">) = </span><span class=\"mtk12\">vault</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getPool</span><span class=\"mtk1\">(</span><span class=\"mtk12\">poolId</span><span class=\"mtk1\">); </span><span class=\"mtk3\">//@audit gas: should use memory variable _poolId: &quot;vault.getPool(_poolId)&quot;</span></span></span></code></pre>\n<h2 id=\"g-04-balancerv2lporaclesol-tighly-pack-storage-variables\" style=\"position:relative;\"><a href=\"#g-04-balancerv2lporaclesol-tighly-pack-storage-variables\" aria-label=\"g 04 balancerv2lporaclesol tighly pack storage variables permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[G-04] <code>BalancerV2LPOracle.sol</code>: Tighly pack storage variables</h2>\n<p>I suggest going from (see <code>@audit</code> tags):</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"15\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">File: </span><span class=\"mtk12\">BalancerV2LPOracle</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">14</span><span class=\"mtk1\">: </span><span class=\"mtk12\">contract</span><span class=\"mtk1\"> </span><span class=\"mtk12\">BalancerV2LPOracle</span><span class=\"mtk1\"> </span><span class=\"mtk12\">is</span><span class=\"mtk1\"> </span><span class=\"mtk12\">AggregatorV3Interface</span><span class=\"mtk1\">, </span><span class=\"mtk12\">BNum</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">15</span><span class=\"mtk1\">:   </span><span class=\"mtk12\">using</span><span class=\"mtk1\"> </span><span class=\"mtk12\">SafeMath</span><span class=\"mtk1\"> </span><span class=\"mtk12\">for</span><span class=\"mtk1\"> </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">16</span><span class=\"mtk1\">: </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">17</span><span class=\"mtk1\">:   </span><span class=\"mtk12\">string</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">override</span><span class=\"mtk1\"> </span><span class=\"mtk12\">description</span><span class=\"mtk1\">; </span><span class=\"mtk3\">//@audit gas: 32 bytes</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">18</span><span class=\"mtk1\">:   </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">override</span><span class=\"mtk1\"> </span><span class=\"mtk12\">version</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">3</span><span class=\"mtk1\">; </span><span class=\"mtk3\">//@audit gas: 32 bytes</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">19</span><span class=\"mtk1\">:   </span><span class=\"mtk12\">uint8</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">override</span><span class=\"mtk1\"> </span><span class=\"mtk12\">decimals</span><span class=\"mtk1\">; </span><span class=\"mtk3\">//@audit gas: 1 byte, can be tightly packed by being moved further down or by moving an address closer</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">20</span><span class=\"mtk1\">: </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">21</span><span class=\"mtk1\">:   </span><span class=\"mtk12\">bytes32</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">poolId</span><span class=\"mtk1\">; </span><span class=\"mtk3\">//@audit gas: 32 bytes</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">22</span><span class=\"mtk1\">:   </span><span class=\"mtk12\">IBalancerVault</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">vault</span><span class=\"mtk1\">; </span><span class=\"mtk3\">//@audit gas: 20 bytes</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">23</span><span class=\"mtk1\">:   </span><span class=\"mtk12\">IBalancerPool</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">pool</span><span class=\"mtk1\">; </span><span class=\"mtk3\">//@audit gas: 20 bytes</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">24</span><span class=\"mtk1\">:   </span><span class=\"mtk12\">AggregatorV3Interface</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">oracleA</span><span class=\"mtk1\">; </span><span class=\"mtk3\">//@audit gas: 20 bytes</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">25</span><span class=\"mtk1\">:   </span><span class=\"mtk12\">AggregatorV3Interface</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">oracleB</span><span class=\"mtk1\">; </span><span class=\"mtk3\">//@audit gas: 20 bytes</span></span></span></code></pre>\n<p>to</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"16\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">contract</span><span class=\"mtk1\"> </span><span class=\"mtk12\">BalancerV2LPOracle</span><span class=\"mtk1\"> </span><span class=\"mtk12\">is</span><span class=\"mtk1\"> </span><span class=\"mtk12\">AggregatorV3Interface</span><span class=\"mtk1\">, </span><span class=\"mtk12\">BNum</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">using</span><span class=\"mtk1\"> </span><span class=\"mtk12\">SafeMath</span><span class=\"mtk1\"> </span><span class=\"mtk12\">for</span><span class=\"mtk1\"> </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">string</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">override</span><span class=\"mtk1\"> </span><span class=\"mtk12\">description</span><span class=\"mtk1\">; </span><span class=\"mtk3\">//@audit gas: 32 bytes (slot 1)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">override</span><span class=\"mtk1\"> </span><span class=\"mtk12\">version</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">3</span><span class=\"mtk1\">; </span><span class=\"mtk3\">//@audit gas: 32 bytes (slot 2)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">uint8</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">override</span><span class=\"mtk1\"> </span><span class=\"mtk12\">decimals</span><span class=\"mtk1\">; </span><span class=\"mtk3\">//@audit gas: 1 byte (slot 3)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">IBalancerVault</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">vault</span><span class=\"mtk1\">; </span><span class=\"mtk3\">//@audit gas: 20 bytes (slot 3)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">IBalancerPool</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">pool</span><span class=\"mtk1\">; </span><span class=\"mtk3\">//@audit gas: 20 bytes  (slot 4)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">bytes32</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">poolId</span><span class=\"mtk1\">; </span><span class=\"mtk3\">//@audit gas: 32 bytes &lt;= this is the one we moved</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">AggregatorV3Interface</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">oracleA</span><span class=\"mtk1\">; </span><span class=\"mtk3\">//@audit gas: 20 bytes</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">AggregatorV3Interface</span><span class=\"mtk1\"> </span><span class=\"mtk12\">public</span><span class=\"mtk1\"> </span><span class=\"mtk12\">oracleB</span><span class=\"mtk1\">; </span><span class=\"mtk3\">//@audit gas: 20 bytes</span></span></span></code></pre>\n<p>Which would save 1 storage slot.</p>\n<h2 id=\"g-05-variables-that-should-be-constant\" style=\"position:relative;\"><a href=\"#g-05-variables-that-should-be-constant\" aria-label=\"g 05 variables that should be constant permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[G-05] Variables that should be constant</h2>\n<p>According to slither:</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"jsx\" data-index=\"17\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">BalancerV2LPOracle</span><span class=\"mtk1\">.</span><span class=\"mtk11\">version</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">oracles</span><span class=\"mtk1\">/</span><span class=\"mtk12\">BalancerV2LPOracle</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">18</span><span class=\"mtk1\">) </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">constant</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">GUniLPOracle</span><span class=\"mtk1\">.</span><span class=\"mtk11\">version</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">oracles</span><span class=\"mtk1\">/</span><span class=\"mtk12\">GUniLPOracle</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">16</span><span class=\"mtk1\">) </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">constant</span></span></span></code></pre>\n<h2 id=\"g-06--0-is-less-efficient-than--0-for-unsigned-integers-with-proof\" style=\"position:relative;\"><a href=\"#g-06--0-is-less-efficient-than--0-for-unsigned-integers-with-proof\" aria-label=\"g 06  0 is less efficient than  0 for unsigned integers with proof permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[G-06] <code>> 0</code> is less efficient than <code>!= 0</code> for unsigned integers (with proof)</h2>\n<p><code>!= 0</code> costs less gas compared to <code>> 0</code> for unsigned integers in <code>require</code> statements with the optimizer enabled (6 gas)</p>\n<p>Proof: While it may seem that <code>> 0</code> is cheaper than <code>!=</code>, this is only true without the optimizer enabled and outside a require statement. If you enable the optimizer at 10k AND you’re in a <code>require</code> statement, this will save gas. You can see this tweet for more proofs: <a href=\"https://twitter.com/gzeon/status/1485428085885640706\">https://twitter.com/gzeon/status/1485428085885640706</a></p>\n<p>I suggest changing <code>> 0</code> with <code>!= 0</code> here:</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"18\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultsCore</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">122</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">_amount</span><span class=\"mtk1\"> &gt; </span><span class=\"mtk7\">0</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;IV100&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">58</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">boostConfig</span><span class=\"mtk1\">.</span><span class=\"mtk12\">a</span><span class=\"mtk1\"> &gt;= </span><span class=\"mtk7\">1</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">boostConfig</span><span class=\"mtk1\">.</span><span class=\"mtk12\">d</span><span class=\"mtk1\"> &gt; </span><span class=\"mtk7\">0</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">boostConfig</span><span class=\"mtk1\">.</span><span class=\"mtk12\">maxBoost</span><span class=\"mtk1\"> &gt;= </span><span class=\"mtk7\">1</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;LM004&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">70</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">newBoostConfig</span><span class=\"mtk1\">.</span><span class=\"mtk12\">a</span><span class=\"mtk1\"> &gt;= </span><span class=\"mtk7\">1</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">newBoostConfig</span><span class=\"mtk1\">.</span><span class=\"mtk12\">d</span><span class=\"mtk1\"> &gt; </span><span class=\"mtk7\">0</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">newBoostConfig</span><span class=\"mtk1\">.</span><span class=\"mtk12\">maxBoost</span><span class=\"mtk1\"> &gt;= </span><span class=\"mtk7\">1</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;LM004&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">175</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">value</span><span class=\"mtk1\"> &gt; </span><span class=\"mtk7\">0</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;LM101&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">195</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">value</span><span class=\"mtk1\"> &gt; </span><span class=\"mtk7\">0</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;LM101&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">52</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">boostConfig</span><span class=\"mtk1\">.</span><span class=\"mtk12\">a</span><span class=\"mtk1\"> &gt;= </span><span class=\"mtk7\">1</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">boostConfig</span><span class=\"mtk1\">.</span><span class=\"mtk12\">d</span><span class=\"mtk1\"> &gt; </span><span class=\"mtk7\">0</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">boostConfig</span><span class=\"mtk1\">.</span><span class=\"mtk12\">maxBoost</span><span class=\"mtk1\"> &gt;= </span><span class=\"mtk7\">1</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;LM004&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">71</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">newBoostConfig</span><span class=\"mtk1\">.</span><span class=\"mtk12\">a</span><span class=\"mtk1\"> &gt;= </span><span class=\"mtk7\">1</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">newBoostConfig</span><span class=\"mtk1\">.</span><span class=\"mtk12\">d</span><span class=\"mtk1\"> &gt; </span><span class=\"mtk7\">0</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">newBoostConfig</span><span class=\"mtk1\">.</span><span class=\"mtk12\">maxBoost</span><span class=\"mtk1\"> &gt;= </span><span class=\"mtk7\">1</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;LM004&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">254</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">_value</span><span class=\"mtk1\"> &gt; </span><span class=\"mtk7\">0</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;LM101&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">284</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">_value</span><span class=\"mtk1\"> &gt; </span><span class=\"mtk7\">0</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;LM101&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">oracles</span><span class=\"mtk1\">/</span><span class=\"mtk12\">GUniLPOracle</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">112</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">rA</span><span class=\"mtk1\"> &gt; </span><span class=\"mtk7\">0</span><span class=\"mtk1\"> || </span><span class=\"mtk12\">rB</span><span class=\"mtk1\"> &gt; </span><span class=\"mtk7\">0</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;C100&quot;</span><span class=\"mtk1\">);</span></span></span></code></pre>\n<p>Also, please enable the Optimizer.</p>\n<h2 id=\"g-07--is-cheaper-than-\" style=\"position:relative;\"><a href=\"#g-07--is-cheaper-than-\" aria-label=\"g 07  is cheaper than  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[G-07] <code>&#x3C;=</code> is cheaper than <code>&#x3C;</code></h2>\n<p>Strict inequalities (<code>&#x3C;</code>) are more expensive than non-strict ones (<code>&#x3C;=</code>). This is due to some supplementary checks (ISZERO, 3 gas)</p>\n<p>I suggest using  <code>&#x3C;=</code>  instead of <code>&#x3C;</code> here:</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"19\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">libraries</span><span class=\"mtk1\">/</span><span class=\"mtk12\">ABDKMath64x64</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">697</span><span class=\"mtk1\">:      </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk11\">uint128</span><span class=\"mtk1\">(</span><span class=\"mtk12\">r</span><span class=\"mtk1\"> &lt; </span><span class=\"mtk12\">r1</span><span class=\"mtk1\"> ? </span><span class=\"mtk12\">r</span><span class=\"mtk1\"> : </span><span class=\"mtk12\">r1</span><span class=\"mtk1\">);</span></span></span></code></pre>\n<h2 id=\"g-08-splitting-require-statements-that-use--saves-gas\" style=\"position:relative;\"><a href=\"#g-08-splitting-require-statements-that-use--saves-gas\" aria-label=\"g 08 splitting require statements that use  saves gas permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[G-08] Splitting <code>require()</code> statements that use <code>&#x26;&#x26;</code> saves gas</h2>\n<p>Instead of using the <code>&#x26;&#x26;</code> operator in a single require statement to check multiple conditions, I suggest using multiple require statements with 1 condition per require statement (saving 3 gas per <code>&#x26;</code>):</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"20\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">libraries</span><span class=\"mtk1\">/</span><span class=\"mtk12\">ABDKMath64x64</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">   </span><span class=\"mtk7\">35</span><span class=\"mtk1\">:     </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">x</span><span class=\"mtk1\"> &gt;= -</span><span class=\"mtk7\">0x8000000000000000</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">x</span><span class=\"mtk1\"> &lt;= </span><span class=\"mtk7\">0x7FFFFFFFFFFFFFFF</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">   </span><span class=\"mtk7\">83</span><span class=\"mtk1\">:     </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">result</span><span class=\"mtk1\"> &gt;= </span><span class=\"mtk12\">MIN_64x64</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">result</span><span class=\"mtk1\"> &lt;= </span><span class=\"mtk12\">MAX_64x64</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">107</span><span class=\"mtk1\">:     </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">result</span><span class=\"mtk1\"> &gt;= </span><span class=\"mtk12\">MIN_64x64</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">result</span><span class=\"mtk1\"> &lt;= </span><span class=\"mtk12\">MAX_64x64</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">120</span><span class=\"mtk1\">:     </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">result</span><span class=\"mtk1\"> &gt;= </span><span class=\"mtk12\">MIN_64x64</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">result</span><span class=\"mtk1\"> &lt;= </span><span class=\"mtk12\">MAX_64x64</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">133</span><span class=\"mtk1\">:     </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">result</span><span class=\"mtk1\"> &gt;= </span><span class=\"mtk12\">MIN_64x64</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">result</span><span class=\"mtk1\"> &lt;= </span><span class=\"mtk12\">MAX_64x64</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">207</span><span class=\"mtk1\">:     </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">result</span><span class=\"mtk1\"> &gt;= </span><span class=\"mtk12\">MIN_64x64</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">result</span><span class=\"mtk1\"> &lt;= </span><span class=\"mtk12\">MAX_64x64</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">288</span><span class=\"mtk1\">:     </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">result</span><span class=\"mtk1\"> &gt;= </span><span class=\"mtk12\">MIN_64x64</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">result</span><span class=\"mtk1\"> &lt;= </span><span class=\"mtk12\">MAX_64x64</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">413</span><span class=\"mtk1\">:     </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">result</span><span class=\"mtk1\"> &gt;= </span><span class=\"mtk12\">MIN_64x64</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">result</span><span class=\"mtk1\"> &lt;= </span><span class=\"mtk12\">MAX_64x64</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">   </span><span class=\"mtk7\">58</span><span class=\"mtk1\">:     </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">boostConfig</span><span class=\"mtk1\">.</span><span class=\"mtk12\">a</span><span class=\"mtk1\"> &gt;= </span><span class=\"mtk7\">1</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">boostConfig</span><span class=\"mtk1\">.</span><span class=\"mtk12\">d</span><span class=\"mtk1\"> &gt; </span><span class=\"mtk7\">0</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">boostConfig</span><span class=\"mtk1\">.</span><span class=\"mtk12\">maxBoost</span><span class=\"mtk1\"> &gt;= </span><span class=\"mtk7\">1</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;LM004&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">   </span><span class=\"mtk7\">70</span><span class=\"mtk1\">:     </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">newBoostConfig</span><span class=\"mtk1\">.</span><span class=\"mtk12\">a</span><span class=\"mtk1\"> &gt;= </span><span class=\"mtk7\">1</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">newBoostConfig</span><span class=\"mtk1\">.</span><span class=\"mtk12\">d</span><span class=\"mtk1\"> &gt; </span><span class=\"mtk7\">0</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">newBoostConfig</span><span class=\"mtk1\">.</span><span class=\"mtk12\">maxBoost</span><span class=\"mtk1\"> &gt;= </span><span class=\"mtk7\">1</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;LM004&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">331</span><span class=\"mtk1\">:     </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">multiplier</span><span class=\"mtk1\"> &gt;= </span><span class=\"mtk7\">1e18</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">multiplier</span><span class=\"mtk1\"> &lt;= </span><span class=\"mtk12\">_boostConfig</span><span class=\"mtk1\">.</span><span class=\"mtk12\">maxBoost</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;LM103&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">   </span><span class=\"mtk7\">52</span><span class=\"mtk1\">:     </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">boostConfig</span><span class=\"mtk1\">.</span><span class=\"mtk12\">a</span><span class=\"mtk1\"> &gt;= </span><span class=\"mtk7\">1</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">boostConfig</span><span class=\"mtk1\">.</span><span class=\"mtk12\">d</span><span class=\"mtk1\"> &gt; </span><span class=\"mtk7\">0</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">boostConfig</span><span class=\"mtk1\">.</span><span class=\"mtk12\">maxBoost</span><span class=\"mtk1\"> &gt;= </span><span class=\"mtk7\">1</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;LM004&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">   </span><span class=\"mtk7\">71</span><span class=\"mtk1\">:     </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">newBoostConfig</span><span class=\"mtk1\">.</span><span class=\"mtk12\">a</span><span class=\"mtk1\"> &gt;= </span><span class=\"mtk7\">1</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">newBoostConfig</span><span class=\"mtk1\">.</span><span class=\"mtk12\">d</span><span class=\"mtk1\"> &gt; </span><span class=\"mtk7\">0</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">newBoostConfig</span><span class=\"mtk1\">.</span><span class=\"mtk12\">maxBoost</span><span class=\"mtk1\"> &gt;= </span><span class=\"mtk7\">1</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;LM004&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">426</span><span class=\"mtk1\">:     </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">multiplier</span><span class=\"mtk1\"> &gt;= </span><span class=\"mtk7\">1e18</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">multiplier</span><span class=\"mtk1\"> &lt;= </span><span class=\"mtk12\">_boostConfig</span><span class=\"mtk1\">.</span><span class=\"mtk12\">maxBoost</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;LM103&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">supervaults</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">SuperVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">344</span><span class=\"mtk1\">:     </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">proxy</span><span class=\"mtk1\"> != </span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk7\">0</span><span class=\"mtk1\">) &amp;&amp; </span><span class=\"mtk12\">router</span><span class=\"mtk1\"> != </span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk7\">0</span><span class=\"mtk1\">), </span><span class=\"mtk8\">&quot;SV201&quot;</span><span class=\"mtk1\">); </span></span></span></code></pre>\n<h2 id=\"g-09-require-should-be-used-for-checking-error-conditions-on-inputs-and-return-values-while-assert-should-be-used-for-invariant-checking\" style=\"position:relative;\"><a href=\"#g-09-require-should-be-used-for-checking-error-conditions-on-inputs-and-return-values-while-assert-should-be-used-for-invariant-checking\" aria-label=\"g 09 require should be used for checking error conditions on inputs and return values while assert should be used for invariant checking permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[G-09] <code>require()</code> should be used for checking error conditions on inputs and return values while <code>assert()</code> should be used for invariant checking</h2>\n<p>Properly functioning code should <strong>never</strong> reach a failing assert statement, unless there is a bug in your contract you should fix. Here, I believe the assert should be a require or a revert:</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"21\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">libraries</span><span class=\"mtk1\">/</span><span class=\"mtk12\">ABDKMath64x64</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">641</span><span class=\"mtk1\">:      </span><span class=\"mtk11\">assert</span><span class=\"mtk1\">(</span><span class=\"mtk12\">xh</span><span class=\"mtk1\"> == </span><span class=\"mtk12\">hi</span><span class=\"mtk1\"> &gt;&gt; </span><span class=\"mtk7\">128</span><span class=\"mtk1\">);</span></span></span></code></pre>\n<p>As the Solidity version is <code>0.6.12 &#x3C; 0.8.0</code>, the remaining gas would not be refunded in case of failure.</p>\n<h2 id=\"g-10-amounts-should-be-checked-for-0-before-calling-a-transfer\" style=\"position:relative;\"><a href=\"#g-10-amounts-should-be-checked-for-0-before-calling-a-transfer\" aria-label=\"g 10 amounts should be checked for 0 before calling a transfer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[G-10] Amounts should be checked for 0 before calling a transfer</h2>\n<p>Checking non-zero transfer values can avoid an expensive external call and save gas.</p>\n<p>While this is done at some places, it’s not consistently done in the solution.</p>\n<p>I suggest adding a non-zero-value check here:</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"22\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">81</span><span class=\"mtk1\">:    </span><span class=\"mtk12\">asset</span><span class=\"mtk1\">.</span><span class=\"mtk11\">safeTransferFrom</span><span class=\"mtk1\">(</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">, </span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">), </span><span class=\"mtk12\">_depositAmount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">101</span><span class=\"mtk1\">:    </span><span class=\"mtk12\">asset</span><span class=\"mtk1\">.</span><span class=\"mtk11\">safeTransfer</span><span class=\"mtk1\">(</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">, </span><span class=\"mtk12\">_amount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">124</span><span class=\"mtk1\">:    </span><span class=\"mtk12\">stablex</span><span class=\"mtk1\">.</span><span class=\"mtk11\">safeTransfer</span><span class=\"mtk1\">(</span><span class=\"mtk12\">_to</span><span class=\"mtk1\">, </span><span class=\"mtk12\">_amount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">131</span><span class=\"mtk1\">:    </span><span class=\"mtk12\">_mimo</span><span class=\"mtk1\">.</span><span class=\"mtk11\">safeTransfer</span><span class=\"mtk1\">(</span><span class=\"mtk12\">_to</span><span class=\"mtk1\">, </span><span class=\"mtk12\">_amount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">139</span><span class=\"mtk1\">:    </span><span class=\"mtk12\">par</span><span class=\"mtk1\">.</span><span class=\"mtk11\">safeTransfer</span><span class=\"mtk1\">(</span><span class=\"mtk12\">_to</span><span class=\"mtk1\">, </span><span class=\"mtk12\">_amount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">145</span><span class=\"mtk1\">:    </span><span class=\"mtk4\">this</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">uses</span><span class=\"mtk1\"> `</span><span class=\"mtk11\">transferFrom</span><span class=\"mtk1\">()` </span><span class=\"mtk11\">and</span><span class=\"mtk1\"> </span><span class=\"mtk11\">requires</span><span class=\"mtk1\"> </span><span class=\"mtk11\">pre</span><span class=\"mtk1\">-</span><span class=\"mtk11\">approval</span><span class=\"mtk1\"> </span><span class=\"mtk11\">via</span><span class=\"mtk1\"> `</span><span class=\"mtk11\">approve</span><span class=\"mtk1\">()` </span><span class=\"mtk11\">on</span><span class=\"mtk1\"> </span><span class=\"mtk11\">the</span><span class=\"mtk1\"> </span><span class=\"mtk11\">ERC20</span><span class=\"mtk1\">.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">core</span><span class=\"mtk1\">/</span><span class=\"mtk11\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk11\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk11\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk11\">sol</span><span class=\"mtk1\">:151:    </span><span class=\"mtk11\">asset</span><span class=\"mtk1\">.</span><span class=\"mtk11\">safeTransferFrom</span><span class=\"mtk1\">(msg.sender, </span><span class=\"mtk12\">address</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">), </span><span class=\"mtk11\">_amount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultsCore</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">67</span><span class=\"mtk1\">:    </span><span class=\"mtk12\">_inceptionCollateral</span><span class=\"mtk1\">.</span><span class=\"mtk11\">safeTransferFrom</span><span class=\"mtk1\">(</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">, </span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">), </span><span class=\"mtk12\">_amount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultsCore</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">93</span><span class=\"mtk1\">:    </span><span class=\"mtk12\">_inceptionCollateral</span><span class=\"mtk1\">.</span><span class=\"mtk11\">safeTransfer</span><span class=\"mtk1\">(</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">, </span><span class=\"mtk12\">_amount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultsCore</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">186</span><span class=\"mtk1\">:    </span><span class=\"mtk12\">stablex</span><span class=\"mtk1\">.</span><span class=\"mtk11\">safeTransferFrom</span><span class=\"mtk1\">(</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">, </span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">_adminInceptionVault</span><span class=\"mtk1\">), </span><span class=\"mtk12\">_amount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultsCore</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">234</span><span class=\"mtk1\">:    </span><span class=\"mtk12\">stablex</span><span class=\"mtk1\">.</span><span class=\"mtk11\">safeTransferFrom</span><span class=\"mtk1\">(</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">, </span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">), </span><span class=\"mtk12\">_amount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultsCore</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">235</span><span class=\"mtk1\">:    </span><span class=\"mtk12\">stablex</span><span class=\"mtk1\">.</span><span class=\"mtk11\">safeTransfer</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">_adminInceptionVault</span><span class=\"mtk1\">), </span><span class=\"mtk12\">_amount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultsCore</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">239</span><span class=\"mtk1\">:    </span><span class=\"mtk12\">_inceptionCollateral</span><span class=\"mtk1\">.</span><span class=\"mtk11\">safeTransfer</span><span class=\"mtk1\">(</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">, </span><span class=\"mtk12\">collateralToReceive</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">DemandMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">67</span><span class=\"mtk1\">:    </span><span class=\"mtk12\">_token</span><span class=\"mtk1\">.</span><span class=\"mtk11\">safeTransferFrom</span><span class=\"mtk1\">(</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">, </span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">), </span><span class=\"mtk12\">amount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">DemandMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">72</span><span class=\"mtk1\">:      </span><span class=\"mtk12\">_token</span><span class=\"mtk1\">.</span><span class=\"mtk11\">safeTransfer</span><span class=\"mtk1\">(</span><span class=\"mtk12\">_feeCollector</span><span class=\"mtk1\">, </span><span class=\"mtk12\">fee</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">DemandMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">87</span><span class=\"mtk1\">:      </span><span class=\"mtk12\">_token</span><span class=\"mtk1\">.</span><span class=\"mtk11\">safeTransfer</span><span class=\"mtk1\">(</span><span class=\"mtk12\">_feeCollector</span><span class=\"mtk1\">, </span><span class=\"mtk12\">fee</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">DemandMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">90</span><span class=\"mtk1\">:    </span><span class=\"mtk12\">_token</span><span class=\"mtk1\">.</span><span class=\"mtk11\">safeTransfer</span><span class=\"mtk1\">(</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">, </span><span class=\"mtk12\">withdrawAmount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">92</span><span class=\"mtk1\">:    </span><span class=\"mtk12\">_par</span><span class=\"mtk1\">.</span><span class=\"mtk11\">safeTransferFrom</span><span class=\"mtk1\">(</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">, </span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">), </span><span class=\"mtk12\">amount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">101</span><span class=\"mtk1\">:    </span><span class=\"mtk12\">_par</span><span class=\"mtk1\">.</span><span class=\"mtk11\">safeTransfer</span><span class=\"mtk1\">(</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">, </span><span class=\"mtk12\">amount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">127</span><span class=\"mtk1\">:    </span><span class=\"mtk12\">_par</span><span class=\"mtk1\">.</span><span class=\"mtk11\">safeTransfer</span><span class=\"mtk1\">(</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">, </span><span class=\"mtk12\">_liquidateCallerReward</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">supervaults</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">SuperVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">129</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">IERC20</span><span class=\"mtk1\">(</span><span class=\"mtk12\">asset</span><span class=\"mtk1\">).</span><span class=\"mtk11\">transferFrom</span><span class=\"mtk1\">(</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">, </span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">), </span><span class=\"mtk12\">depositAmount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">supervaults</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">SuperVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">247</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">asset</span><span class=\"mtk1\">.</span><span class=\"mtk11\">transfer</span><span class=\"mtk1\">(</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">, </span><span class=\"mtk12\">amount</span><span class=\"mtk1\">));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">supervaults</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">SuperVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">274</span><span class=\"mtk1\">:    </span><span class=\"mtk12\">token</span><span class=\"mtk1\">.</span><span class=\"mtk11\">transferFrom</span><span class=\"mtk1\">(</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">, </span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">), </span><span class=\"mtk12\">amount</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">supervaults</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">SuperVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">290</span><span class=\"mtk1\">:    </span><span class=\"mtk12\">token</span><span class=\"mtk1\">.</span><span class=\"mtk11\">transferFrom</span><span class=\"mtk1\">(</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">, </span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">), </span><span class=\"mtk12\">depositAmount</span><span class=\"mtk1\">);</span></span></span></code></pre>\n<h2 id=\"g-11-an-arrays-length-should-be-cached-to-save-gas-in-for-loops\" style=\"position:relative;\"><a href=\"#g-11-an-arrays-length-should-be-cached-to-save-gas-in-for-loops\" aria-label=\"g 11 an arrays length should be cached to save gas in for loops permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[G-11] An array’s length should be cached to save gas in for-loops</h2>\n<p>Reading array length at each iteration of the loop takes 6 gas (3 for mload and 3 to place memory_offset) in the stack.</p>\n<p>Caching the array length in the stack saves around 3 gas per iteration.</p>\n<p>Here, I suggest storing the array’s length in a variable before the for-loop, and use it instead:</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"23\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">dex</span><span class=\"mtk1\">/</span><span class=\"mtk12\">DexAddressProvider</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">16</span><span class=\"mtk1\">:    </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">i</span><span class=\"mtk1\">; </span><span class=\"mtk12\">i</span><span class=\"mtk1\"> &lt; </span><span class=\"mtk12\">dexes</span><span class=\"mtk1\">.</span><span class=\"mtk12\">length</span><span class=\"mtk1\">; </span><span class=\"mtk12\">i</span><span class=\"mtk1\">++) {</span></span></span></code></pre>\n<h2 id=\"g-12-i-costs-less-gas-compared-to-i-or-i--1\" style=\"position:relative;\"><a href=\"#g-12-i-costs-less-gas-compared-to-i-or-i--1\" aria-label=\"g 12 i costs less gas compared to i or i  1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[G-12] <code>++i</code> costs less gas compared to <code>i++</code> or <code>i += 1</code></h2>\n<p><code>++i</code> costs less gas compared to <code>i++</code> or <code>i += 1</code> for unsigned integer, as pre-increment is cheaper (about 5 gas per iteration). This statement is true even with the optimizer enabled.</p>\n<p><code>i++</code> increments <code>i</code> and returns the initial value of <code>i</code>. Which means:</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"24\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">uint</span><span class=\"mtk1\"> </span><span class=\"mtk12\">i</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">1</span><span class=\"mtk1\">;  </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">i</span><span class=\"mtk1\">++; </span><span class=\"mtk3\">// == 1 but i == 2  </span></span></span></code></pre>\n<p>But <code>++i</code> returns the actual incremented value:</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"25\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">uint</span><span class=\"mtk1\"> </span><span class=\"mtk12\">i</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">1</span><span class=\"mtk1\">;  </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">++</span><span class=\"mtk12\">i</span><span class=\"mtk1\">; </span><span class=\"mtk3\">// == 2 and i == 2 too, so no need for a temporary variable  </span></span></span></code></pre>\n<p>In the first case, the compiler has to create a temporary variable (when used) for returning <code>1</code> instead of <code>2</code></p>\n<p>Instances include:</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"26\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">dex</span><span class=\"mtk1\">/</span><span class=\"mtk12\">DexAddressProvider</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">16</span><span class=\"mtk1\">:    </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">i</span><span class=\"mtk1\">; </span><span class=\"mtk12\">i</span><span class=\"mtk1\"> &lt; </span><span class=\"mtk12\">dexes</span><span class=\"mtk1\">.</span><span class=\"mtk12\">length</span><span class=\"mtk1\">; </span><span class=\"mtk12\">i</span><span class=\"mtk1\">++) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">108</span><span class=\"mtk1\">:    </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">uint8</span><span class=\"mtk1\"> </span><span class=\"mtk12\">i</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">1</span><span class=\"mtk1\">; </span><span class=\"mtk12\">i</span><span class=\"mtk1\"> &lt; </span><span class=\"mtk12\">_collateralCount</span><span class=\"mtk1\"> + </span><span class=\"mtk7\">1</span><span class=\"mtk1\">; </span><span class=\"mtk12\">i</span><span class=\"mtk1\">++) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">libraries</span><span class=\"mtk1\">/</span><span class=\"mtk12\">ABDKMath64x64</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">396</span><span class=\"mtk1\">:            </span><span class=\"mtk12\">resultShift</span><span class=\"mtk1\"> += </span><span class=\"mtk7\">1</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">libraries</span><span class=\"mtk1\">/</span><span class=\"mtk12\">ABDKMath64x64</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">403</span><span class=\"mtk1\">:          </span><span class=\"mtk12\">absXShift</span><span class=\"mtk1\"> += </span><span class=\"mtk7\">1</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">libraries</span><span class=\"mtk1\">/</span><span class=\"mtk12\">ABDKMath64x64</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">463</span><span class=\"mtk1\">:    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">xc</span><span class=\"mtk1\"> &gt;= </span><span class=\"mtk7\">0x2</span><span class=\"mtk1\">) </span><span class=\"mtk12\">msb</span><span class=\"mtk1\"> += </span><span class=\"mtk7\">1</span><span class=\"mtk1\">; </span><span class=\"mtk3\">// No need to shift xc anymore</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">libraries</span><span class=\"mtk1\">/</span><span class=\"mtk12\">ABDKMath64x64</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">624</span><span class=\"mtk1\">:      </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">xc</span><span class=\"mtk1\"> &gt;= </span><span class=\"mtk7\">0x2</span><span class=\"mtk1\">) </span><span class=\"mtk12\">msb</span><span class=\"mtk1\"> += </span><span class=\"mtk7\">1</span><span class=\"mtk1\">; </span><span class=\"mtk3\">// No need to shift xc anymore</span></span></span></code></pre>\n<p>I suggest using <code>++i</code> instead of <code>i++</code> to increment the value of an uint variable.</p>\n<h2 id=\"g-13-usage-of-a-non-native-256-bits-uint-as-a-counter-in-for-loops-increases-gas-cost\" style=\"position:relative;\"><a href=\"#g-13-usage-of-a-non-native-256-bits-uint-as-a-counter-in-for-loops-increases-gas-cost\" aria-label=\"g 13 usage of a non native 256 bits uint as a counter in for loops increases gas cost permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[G-13] Usage of a non-native 256 bits uint as a counter in for-loops increases gas cost</h2>\n<p>Due to how the EVM natively works on 256 bit numbers, using a 8 bit number in for-loops introduces additional costs as the EVM has to properly enforce the limits of this smaller type.</p>\n<p>See the warning at this link: <a href=\"https://docs.soliditylang.org/en/v0.8.0/internals/layout_in_storage.html#layout-of-state-variables-in-storage\">https://docs.soliditylang.org/en/v0.8.0/internals/layout_in_storage.html#layout-of-state-variables-in-storage</a> :</p>\n<blockquote>\n<p>When using elements that are smaller than 32 bytes, your contractâ€™s gas usage may be higher. This is because the EVM operates on 32 bytes at a time. Therefore, if the element is smaller than that, the EVM must use more operations in order to reduce the size of the element from 32 bytes to the desired size.\nIt is only beneficial to use reduced-size arguments if you are dealing with storage values because the compiler will pack multiple elements into one storage slot, and thus, combine multiple reads or writes into a single operation. When dealing with function arguments or memory values, there is no inherent benefit because the compiler does not pack these values.</p>\n</blockquote>\n<p>Affected code:</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"27\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">108</span><span class=\"mtk1\">:    </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">uint8</span><span class=\"mtk1\"> </span><span class=\"mtk12\">i</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">1</span><span class=\"mtk1\">; </span><span class=\"mtk12\">i</span><span class=\"mtk1\"> &lt; </span><span class=\"mtk12\">_collateralCount</span><span class=\"mtk1\"> + </span><span class=\"mtk7\">1</span><span class=\"mtk1\">; </span><span class=\"mtk12\">i</span><span class=\"mtk1\">++) {</span></span></span></code></pre>\n<p>Consider manually checking for the upper bound before the for-loop and using the <code>uint256</code> type as a counter in the mentioned for-loops.</p>\n<h2 id=\"g-14-public-functions-to-external\" style=\"position:relative;\"><a href=\"#g-14-public-functions-to-external\" aria-label=\"g 14 public functions to external permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[G-14] Public functions to external</h2>\n<p>The following functions could be set external to save gas and improve code quality.\nExternal call cost is less expensive than of public functions.</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"28\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">clone</span><span class=\"mtk1\">(</span><span class=\"mtk12\">bytes</span><span class=\"mtk1\">) </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">SuperVaultFactory</span><span class=\"mtk1\">.</span><span class=\"mtk11\">clone</span><span class=\"mtk1\">(</span><span class=\"mtk12\">bytes</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">SuperVaultFactory</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">23</span><span class=\"mtk1\">-</span><span class=\"mtk7\">28</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">parallel</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">DexAddressProvider</span><span class=\"mtk1\">.</span><span class=\"mtk11\">parallel</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">dex</span><span class=\"mtk1\">/</span><span class=\"mtk12\">DexAddressProvider</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">43</span><span class=\"mtk1\">-</span><span class=\"mtk7\">45</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">dexMapping</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">) </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">DexAddressProvider</span><span class=\"mtk1\">.</span><span class=\"mtk11\">dexMapping</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">dex</span><span class=\"mtk1\">/</span><span class=\"mtk12\">DexAddressProvider</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">52</span><span class=\"mtk1\">-</span><span class=\"mtk7\">54</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">deposit</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">,</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">) </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk11\">deposit</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">,</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">149</span><span class=\"mtk1\">-</span><span class=\"mtk7\">154</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">borrow</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">,</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">) </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk11\">borrow</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">,</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">164</span><span class=\"mtk1\">-</span><span class=\"mtk7\">173</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">a</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk11\">a</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">175</span><span class=\"mtk1\">-</span><span class=\"mtk7\">177</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">debtNotifier</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk11\">debtNotifier</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">179</span><span class=\"mtk1\">-</span><span class=\"mtk7\">181</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">weth</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk11\">weth</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">183</span><span class=\"mtk1\">-</span><span class=\"mtk7\">185</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">mimo</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk11\">mimo</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">187</span><span class=\"mtk1\">-</span><span class=\"mtk7\">189</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">inceptionCore</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk11\">inceptionCore</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">191</span><span class=\"mtk1\">-</span><span class=\"mtk7\">193</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">collateralCount</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk11\">collateralCount</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">195</span><span class=\"mtk1\">-</span><span class=\"mtk7\">197</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">collaterals</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint8</span><span class=\"mtk1\">) </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk11\">collaterals</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint8</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">199</span><span class=\"mtk1\">-</span><span class=\"mtk7\">201</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">collateralId</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk11\">collateralId</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">AdminInceptionVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">203</span><span class=\"mtk1\">-</span><span class=\"mtk7\">205</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">a</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">InceptionVaultFactory</span><span class=\"mtk1\">.</span><span class=\"mtk11\">a</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultFactory</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">138</span><span class=\"mtk1\">-</span><span class=\"mtk7\">140</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">debtNotifier</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">InceptionVaultFactory</span><span class=\"mtk1\">.</span><span class=\"mtk11\">debtNotifier</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultFactory</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">142</span><span class=\"mtk1\">-</span><span class=\"mtk7\">144</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">weth</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">InceptionVaultFactory</span><span class=\"mtk1\">.</span><span class=\"mtk11\">weth</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultFactory</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">146</span><span class=\"mtk1\">-</span><span class=\"mtk7\">148</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">mimo</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">InceptionVaultFactory</span><span class=\"mtk1\">.</span><span class=\"mtk11\">mimo</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultFactory</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">150</span><span class=\"mtk1\">-</span><span class=\"mtk7\">152</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">adminInceptionVaultBase</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">InceptionVaultFactory</span><span class=\"mtk1\">.</span><span class=\"mtk11\">adminInceptionVaultBase</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultFactory</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">154</span><span class=\"mtk1\">-</span><span class=\"mtk7\">156</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">inceptionVaultsCoreBase</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">InceptionVaultFactory</span><span class=\"mtk1\">.</span><span class=\"mtk11\">inceptionVaultsCoreBase</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultFactory</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">158</span><span class=\"mtk1\">-</span><span class=\"mtk7\">160</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">inceptionVaultsDataProviderBase</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">InceptionVaultFactory</span><span class=\"mtk1\">.</span><span class=\"mtk11\">inceptionVaultsDataProviderBase</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultFactory</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">162</span><span class=\"mtk1\">-</span><span class=\"mtk7\">164</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">inceptionVaultCount</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">InceptionVaultFactory</span><span class=\"mtk1\">.</span><span class=\"mtk11\">inceptionVaultCount</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultFactory</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">166</span><span class=\"mtk1\">-</span><span class=\"mtk7\">168</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">priceFeedCount</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">InceptionVaultFactory</span><span class=\"mtk1\">.</span><span class=\"mtk11\">priceFeedCount</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultFactory</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">170</span><span class=\"mtk1\">-</span><span class=\"mtk7\">172</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">inceptionVaults</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">) </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">InceptionVaultFactory</span><span class=\"mtk1\">.</span><span class=\"mtk11\">inceptionVaults</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultFactory</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">174</span><span class=\"mtk1\">-</span><span class=\"mtk7\">176</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">priceFeeds</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint8</span><span class=\"mtk1\">) </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">InceptionVaultFactory</span><span class=\"mtk1\">.</span><span class=\"mtk11\">priceFeeds</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint8</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultFactory</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">178</span><span class=\"mtk1\">-</span><span class=\"mtk7\">180</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">priceFeedIds</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">InceptionVaultFactory</span><span class=\"mtk1\">.</span><span class=\"mtk11\">priceFeedIds</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultFactory</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">182</span><span class=\"mtk1\">-</span><span class=\"mtk7\">184</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">cumulativeRate</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">InceptionVaultsCore</span><span class=\"mtk1\">.</span><span class=\"mtk11\">cumulativeRate</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultsCore</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">243</span><span class=\"mtk1\">-</span><span class=\"mtk7\">245</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">lastRefresh</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">InceptionVaultsCore</span><span class=\"mtk1\">.</span><span class=\"mtk11\">lastRefresh</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultsCore</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">247</span><span class=\"mtk1\">-</span><span class=\"mtk7\">249</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">vaultConfig</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">InceptionVaultsCore</span><span class=\"mtk1\">.</span><span class=\"mtk11\">vaultConfig</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultsCore</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">251</span><span class=\"mtk1\">-</span><span class=\"mtk7\">253</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">a</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">InceptionVaultsCore</span><span class=\"mtk1\">.</span><span class=\"mtk11\">a</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultsCore</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">255</span><span class=\"mtk1\">-</span><span class=\"mtk7\">257</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">inceptionCollateral</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">InceptionVaultsCore</span><span class=\"mtk1\">.</span><span class=\"mtk11\">inceptionCollateral</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultsCore</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">259</span><span class=\"mtk1\">-</span><span class=\"mtk7\">261</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">adminInceptionVault</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">InceptionVaultsCore</span><span class=\"mtk1\">.</span><span class=\"mtk11\">adminInceptionVault</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultsCore</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">263</span><span class=\"mtk1\">-</span><span class=\"mtk7\">265</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">inceptionVaultsData</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">InceptionVaultsCore</span><span class=\"mtk1\">.</span><span class=\"mtk11\">inceptionVaultsData</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultsCore</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">267</span><span class=\"mtk1\">-</span><span class=\"mtk7\">269</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">inceptionPriceFeed</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">InceptionVaultsCore</span><span class=\"mtk1\">.</span><span class=\"mtk11\">inceptionPriceFeed</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultsCore</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">271</span><span class=\"mtk1\">-</span><span class=\"mtk7\">273</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">a</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">InceptionVaultsDataProvider</span><span class=\"mtk1\">.</span><span class=\"mtk11\">a</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultsDataProvider</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">161</span><span class=\"mtk1\">-</span><span class=\"mtk7\">163</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">inceptionVaultsCore</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">InceptionVaultsDataProvider</span><span class=\"mtk1\">.</span><span class=\"mtk11\">inceptionVaultsCore</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultsDataProvider</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">165</span><span class=\"mtk1\">-</span><span class=\"mtk7\">167</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">inceptionVaultCount</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">InceptionVaultsDataProvider</span><span class=\"mtk1\">.</span><span class=\"mtk11\">inceptionVaultCount</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultsDataProvider</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">169</span><span class=\"mtk1\">-</span><span class=\"mtk7\">171</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">baseDebt</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">InceptionVaultsDataProvider</span><span class=\"mtk1\">.</span><span class=\"mtk11\">baseDebt</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultsDataProvider</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">173</span><span class=\"mtk1\">-</span><span class=\"mtk7\">175</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">a</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">ChainlinkInceptionPriceFeed</span><span class=\"mtk1\">.</span><span class=\"mtk11\">a</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">priceFeed</span><span class=\"mtk1\">/</span><span class=\"mtk12\">ChainlinkInceptionPriceFeed</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">87</span><span class=\"mtk1\">-</span><span class=\"mtk7\">89</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">inceptionCollateral</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">ChainlinkInceptionPriceFeed</span><span class=\"mtk1\">.</span><span class=\"mtk11\">inceptionCollateral</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">priceFeed</span><span class=\"mtk1\">/</span><span class=\"mtk12\">ChainlinkInceptionPriceFeed</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">91</span><span class=\"mtk1\">-</span><span class=\"mtk7\">93</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">assetOracle</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">ChainlinkInceptionPriceFeed</span><span class=\"mtk1\">.</span><span class=\"mtk11\">assetOracle</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">priceFeed</span><span class=\"mtk1\">/</span><span class=\"mtk12\">ChainlinkInceptionPriceFeed</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">95</span><span class=\"mtk1\">-</span><span class=\"mtk7\">97</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">eurOracle</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">ChainlinkInceptionPriceFeed</span><span class=\"mtk1\">.</span><span class=\"mtk11\">eurOracle</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">priceFeed</span><span class=\"mtk1\">/</span><span class=\"mtk12\">ChainlinkInceptionPriceFeed</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">99</span><span class=\"mtk1\">-</span><span class=\"mtk7\">101</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">deposit</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">) </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">DemandMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">deposit</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">DemandMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">66</span><span class=\"mtk1\">-</span><span class=\"mtk7\">76</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">withdraw</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">) </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">DemandMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">withdraw</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">DemandMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">82</span><span class=\"mtk1\">-</span><span class=\"mtk7\">92</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">token</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">DemandMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">token</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">DemandMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">94</span><span class=\"mtk1\">-</span><span class=\"mtk7\">96</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">feeCollector</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">DemandMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">feeCollector</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">DemandMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">98</span><span class=\"mtk1\">-</span><span class=\"mtk7\">100</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">feeConfig</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">DemandMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">feeConfig</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">DemandMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">102</span><span class=\"mtk1\">-</span><span class=\"mtk7\">104</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">releaseRewards</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">releaseRewards</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">80</span><span class=\"mtk1\">-</span><span class=\"mtk7\">86</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">releaseRewards</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">136</span><span class=\"mtk1\">-</span><span class=\"mtk7\">142</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">updateBoost</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">updateBoost</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">91</span><span class=\"mtk1\">-</span><span class=\"mtk7\">94</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">stake</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">stake</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">101</span><span class=\"mtk1\">-</span><span class=\"mtk7\">103</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">stake</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">172</span><span class=\"mtk1\">-</span><span class=\"mtk7\">174</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">stakeWithBoost</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">stakeWithBoost</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">110</span><span class=\"mtk1\">-</span><span class=\"mtk7\">112</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">stakeWithBoost</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">181</span><span class=\"mtk1\">-</span><span class=\"mtk7\">183</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">pendingMIMO</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">pendingMIMO</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">119</span><span class=\"mtk1\">-</span><span class=\"mtk7\">122</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">pendingMIMO</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">190</span><span class=\"mtk1\">-</span><span class=\"mtk7\">193</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">pendingPAR</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">pendingPAR</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">129</span><span class=\"mtk1\">-</span><span class=\"mtk7\">132</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">pendingPAR</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">200</span><span class=\"mtk1\">-</span><span class=\"mtk7\">207</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">par</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">par</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">134</span><span class=\"mtk1\">-</span><span class=\"mtk7\">136</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">par</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">209</span><span class=\"mtk1\">-</span><span class=\"mtk7\">211</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">a</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">a</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">138</span><span class=\"mtk1\">-</span><span class=\"mtk7\">140</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">a</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">213</span><span class=\"mtk1\">-</span><span class=\"mtk7\">215</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">boostConfig</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">boostConfig</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">142</span><span class=\"mtk1\">-</span><span class=\"mtk7\">144</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">boostConfig</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">217</span><span class=\"mtk1\">-</span><span class=\"mtk7\">219</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">totalStake</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">totalStake</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">146</span><span class=\"mtk1\">-</span><span class=\"mtk7\">148</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">totalStake</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">221</span><span class=\"mtk1\">-</span><span class=\"mtk7\">223</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">totalStakeWithBoost</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">totalStakeWithBoost</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">150</span><span class=\"mtk1\">-</span><span class=\"mtk7\">152</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">totalStakeWithBoost</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">225</span><span class=\"mtk1\">-</span><span class=\"mtk7\">227</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">userInfo</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">userInfo</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">GenericMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">164</span><span class=\"mtk1\">-</span><span class=\"mtk7\">166</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">userInfo</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">243</span><span class=\"mtk1\">-</span><span class=\"mtk7\">245</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">deposit</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">) </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">deposit</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">91</span><span class=\"mtk1\">-</span><span class=\"mtk7\">94</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">withdraw</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">) </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">withdraw</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">100</span><span class=\"mtk1\">-</span><span class=\"mtk7\">103</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">liquidate</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">,</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">,</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">,</span><span class=\"mtk12\">bytes</span><span class=\"mtk1\">) </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">liquidate</span><span class=\"mtk1\">(</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">,</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">,</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">,</span><span class=\"mtk12\">bytes</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">112</span><span class=\"mtk1\">-</span><span class=\"mtk7\">130</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">restakePAR</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">restakePAR</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">148</span><span class=\"mtk1\">-</span><span class=\"mtk7\">157</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">updateBoost</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">updateBoost</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">162</span><span class=\"mtk1\">-</span><span class=\"mtk7\">165</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">liquidateCallerReward</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">liquidateCallerReward</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">PARMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">229</span><span class=\"mtk1\">-</span><span class=\"mtk7\">231</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">baseDebtChanged</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">,</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">) </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">SupplyMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">baseDebtChanged</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">,</span><span class=\"mtk12\">uint256</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">SupplyMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">45</span><span class=\"mtk1\">-</span><span class=\"mtk7\">47</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">collateral</span><span class=\"mtk1\">() </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">SupplyMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">collateral</span><span class=\"mtk1\">() (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">SupplyMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">49</span><span class=\"mtk1\">-</span><span class=\"mtk7\">51</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">syncStake</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) </span><span class=\"mtk12\">should</span><span class=\"mtk1\"> </span><span class=\"mtk12\">be</span><span class=\"mtk1\"> </span><span class=\"mtk12\">declared</span><span class=\"mtk1\"> external:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> - </span><span class=\"mtk12\">VotingMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk11\">syncStake</span><span class=\"mtk1\">(</span><span class=\"mtk12\">address</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">liquidityMining</span><span class=\"mtk1\">/</span><span class=\"mtk12\">v2</span><span class=\"mtk1\">/</span><span class=\"mtk12\">VotingMinerV2</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">#</span><span class=\"mtk7\">56</span><span class=\"mtk1\">-</span><span class=\"mtk7\">60</span><span class=\"mtk1\">)</span></span></span></code></pre>\n<h2 id=\"g-15-no-need-to-explicitly-initialize-variables-with-default-values\" style=\"position:relative;\"><a href=\"#g-15-no-need-to-explicitly-initialize-variables-with-default-values\" aria-label=\"g 15 no need to explicitly initialize variables with default values permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[G-15] No need to explicitly initialize variables with default values</h2>\n<p>If a variable is not set/initialized, it is assumed to have the default value (<code>0</code> for <code>uint</code>, <code>false</code> for <code>bool</code>, <code>address(0)</code> for address…). Explicitly initializing it with its default value is an anti-pattern and wastes gas.</p>\n<p>As an example: <code>for (uint256 i = 0; i &#x3C; numIterations; ++i) {</code> should be replaced with <code>for (uint256 i; i &#x3C; numIterations; ++i) {</code></p>\n<p>Instances include:</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"29\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">inception</span><span class=\"mtk1\">/</span><span class=\"mtk12\">InceptionVaultsCore</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">218</span><span class=\"mtk1\">:    </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">insuranceAmount</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">0</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">libraries</span><span class=\"mtk1\">/</span><span class=\"mtk12\">ABDKMath64x64</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">153</span><span class=\"mtk1\">:      </span><span class=\"mtk12\">bool</span><span class=\"mtk1\"> </span><span class=\"mtk12\">negativeResult</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">false</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">libraries</span><span class=\"mtk1\">/</span><span class=\"mtk12\">ABDKMath64x64</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">222</span><span class=\"mtk1\">:    </span><span class=\"mtk12\">bool</span><span class=\"mtk1\"> </span><span class=\"mtk12\">negativeResult</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">false</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">libraries</span><span class=\"mtk1\">/</span><span class=\"mtk12\">ABDKMath64x64</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">387</span><span class=\"mtk1\">:      </span><span class=\"mtk12\">uint256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">resultShift</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">0</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">core</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">libraries</span><span class=\"mtk1\">/</span><span class=\"mtk12\">ABDKMath64x64</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">437</span><span class=\"mtk1\">:    </span><span class=\"mtk12\">int256</span><span class=\"mtk1\"> </span><span class=\"mtk12\">msb</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">0</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<p>I suggest removing explicit initializations for default values.</p>\n<h2 id=\"g-16-use-custom-errors-instead-of-revert-strings-to-save-gas\" style=\"position:relative;\"><a href=\"#g-16-use-custom-errors-instead-of-revert-strings-to-save-gas\" aria-label=\"g 16 use custom errors instead of revert strings to save gas permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[G-16] Use Custom Errors instead of Revert Strings to save Gas</h2>\n<p>Custom errors from Solidity 0.8.4 are cheaper than revert strings (cheaper deployment cost and runtime cost when the revert condition is met)</p>\n<p>Source: <a href=\"https://blog.soliditylang.org/2021/04/21/custom-errors/\">https://blog.soliditylang.org/2021/04/21/custom-errors/</a>:</p>\n<blockquote>\n<p>Starting from <a href=\"https://github.com/ethereum/solidity/releases/tag/v0.8.4\">Solidity v0.8.4</a>, there is a convenient and gas-efficient way to explain to users why an operation failed through the use of custom errors. Until now, you could already use strings to give more information about failures (e.g., <code>revert(\"Insufficient funds.\");</code>), but they are rather expensive, especially when it comes to deploy cost, and it is difficult to use dynamic information in them.</p>\n</blockquote>\n<p>Custom errors are defined using the <code>error</code> statement, which can be used inside and outside of contracts (including interfaces and libraries).</p>\n<p>Instances include:</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"30\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">supervaults</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">SuperVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">39</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk11\">hasRole</span><span class=\"mtk1\">(</span><span class=\"mtk12\">DEFAULT_ADMIN_ROLE</span><span class=\"mtk1\">, </span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">), </span><span class=\"mtk8\">&quot;SV001&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">supervaults</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">SuperVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">56</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">_a</span><span class=\"mtk1\">) != </span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk7\">0</span><span class=\"mtk1\">));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">supervaults</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">SuperVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">57</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">_ga</span><span class=\"mtk1\">) != </span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk7\">0</span><span class=\"mtk1\">));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">supervaults</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">SuperVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">58</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">_lendingPool</span><span class=\"mtk1\">) != </span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk7\">0</span><span class=\"mtk1\">));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">supervaults</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">SuperVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">59</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">dexAP</span><span class=\"mtk1\">) != </span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk7\">0</span><span class=\"mtk1\">));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">supervaults</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">SuperVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">83</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\"> == </span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">lendingPool</span><span class=\"mtk1\">), </span><span class=\"mtk8\">&quot;SV002&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">supervaults</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">SuperVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">109</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">token</span><span class=\"mtk1\">.</span><span class=\"mtk11\">balanceOf</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">)) &gt;= </span><span class=\"mtk12\">flashloanRepayAmount</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;SV101&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">supervaults</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">SuperVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">156</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">fromCollateral</span><span class=\"mtk1\">.</span><span class=\"mtk11\">balanceOf</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">)) &gt;= </span><span class=\"mtk12\">flashloanRepayAmount</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;SV101&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">supervaults</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">SuperVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">207</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">vaultCollateral</span><span class=\"mtk1\">.</span><span class=\"mtk11\">balanceOf</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">)) &gt;= </span><span class=\"mtk12\">flashloanRepayAmount</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;SV101&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">supervaults</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">SuperVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">233</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk11\">IERC20</span><span class=\"mtk1\">(</span><span class=\"mtk12\">a</span><span class=\"mtk1\">.</span><span class=\"mtk11\">stablex</span><span class=\"mtk1\">()).</span><span class=\"mtk11\">transfer</span><span class=\"mtk1\">(</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">, </span><span class=\"mtk11\">IERC20</span><span class=\"mtk1\">(</span><span class=\"mtk12\">a</span><span class=\"mtk1\">.</span><span class=\"mtk11\">stablex</span><span class=\"mtk1\">()).</span><span class=\"mtk11\">balanceOf</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">))));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">supervaults</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">SuperVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">247</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">asset</span><span class=\"mtk1\">.</span><span class=\"mtk11\">transfer</span><span class=\"mtk1\">(</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">, </span><span class=\"mtk12\">amount</span><span class=\"mtk1\">));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">supervaults</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">SuperVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">255</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk11\">IERC20</span><span class=\"mtk1\">(</span><span class=\"mtk12\">a</span><span class=\"mtk1\">.</span><span class=\"mtk11\">stablex</span><span class=\"mtk1\">()).</span><span class=\"mtk11\">transfer</span><span class=\"mtk1\">(</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">, </span><span class=\"mtk11\">IERC20</span><span class=\"mtk1\">(</span><span class=\"mtk12\">a</span><span class=\"mtk1\">.</span><span class=\"mtk11\">stablex</span><span class=\"mtk1\">()).</span><span class=\"mtk11\">balanceOf</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">))));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">supervaults</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">SuperVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">264</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">token</span><span class=\"mtk1\">.</span><span class=\"mtk11\">transfer</span><span class=\"mtk1\">(</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">, </span><span class=\"mtk12\">token</span><span class=\"mtk1\">.</span><span class=\"mtk11\">balanceOf</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">))));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">supervaults</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">SuperVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">292</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk11\">IERC20</span><span class=\"mtk1\">(</span><span class=\"mtk12\">a</span><span class=\"mtk1\">.</span><span class=\"mtk11\">stablex</span><span class=\"mtk1\">()).</span><span class=\"mtk11\">transfer</span><span class=\"mtk1\">(</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">, </span><span class=\"mtk11\">IERC20</span><span class=\"mtk1\">(</span><span class=\"mtk12\">a</span><span class=\"mtk1\">.</span><span class=\"mtk11\">stablex</span><span class=\"mtk1\">()).</span><span class=\"mtk11\">balanceOf</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">)))); </span><span class=\"mtk3\">//par</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">supervaults</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">SuperVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">313</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk11\">IERC20</span><span class=\"mtk1\">(</span><span class=\"mtk12\">a</span><span class=\"mtk1\">.</span><span class=\"mtk11\">stablex</span><span class=\"mtk1\">()).</span><span class=\"mtk11\">transfer</span><span class=\"mtk1\">(</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">, </span><span class=\"mtk11\">IERC20</span><span class=\"mtk1\">(</span><span class=\"mtk12\">a</span><span class=\"mtk1\">.</span><span class=\"mtk11\">stablex</span><span class=\"mtk1\">()).</span><span class=\"mtk11\">balanceOf</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">)))); </span><span class=\"mtk3\">//par</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">supervaults</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">SuperVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">344</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">proxy</span><span class=\"mtk1\"> != </span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk7\">0</span><span class=\"mtk1\">) &amp;&amp; </span><span class=\"mtk12\">router</span><span class=\"mtk1\"> != </span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk7\">0</span><span class=\"mtk1\">), </span><span class=\"mtk8\">&quot;SV201&quot;</span><span class=\"mtk1\">); </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">supervaults</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">SuperVault</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">370</span><span class=\"mtk1\">:      </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk12\">ga</span><span class=\"mtk1\">.</span><span class=\"mtk11\">mimo</span><span class=\"mtk1\">().</span><span class=\"mtk11\">transfer</span><span class=\"mtk1\">(</span><span class=\"mtk12\">msg</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sender</span><span class=\"mtk1\">, </span><span class=\"mtk12\">ga</span><span class=\"mtk1\">.</span><span class=\"mtk11\">mimo</span><span class=\"mtk1\">().</span><span class=\"mtk11\">balanceOf</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">))));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">supervaults</span><span class=\"mtk1\">/</span><span class=\"mtk12\">contracts</span><span class=\"mtk1\">/</span><span class=\"mtk12\">SuperVaultFactory</span><span class=\"mtk1\">.</span><span class=\"mtk12\">sol</span><span class=\"mtk1\">:</span><span class=\"mtk7\">18</span><span class=\"mtk1\">:    </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk12\">_base</span><span class=\"mtk1\">) != </span><span class=\"mtk11\">address</span><span class=\"mtk1\">(</span><span class=\"mtk7\">0</span><span class=\"mtk1\">));</span></span></span></code></pre>\n<p>I suggest replacing revert strings with custom errors.</p>\n<p><strong><a href=\"https://github.com/code-423n4/2022-04-mimo-findings/issues/139#issuecomment-1120354400\">m19 (Mimo DeFi) commented</a>:</strong></p>\n<blockquote>\n<p>This was a very thorough gas optimization report and is very helpful for us.</p>\n</blockquote>\n<hr>\n<h1 id=\"disclosures\" style=\"position:relative;\"><a href=\"#disclosures\" aria-label=\"disclosures permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disclosures</h1>\n<p>C4 is an open organization governed by participants in the community.</p>\n<p>C4 Contests incentivize the discovery of exploits, vulnerabilities, and bugs in smart contracts. Security researchers are rewarded at an increasing rate for finding higher-risk issues. Contest submissions are judged by a knowledgeable security researcher and solidity developer and disclosed to sponsoring developers. C4 does not conduct formal verification regarding the provided code but instead provides final verification.</p>\n<p>C4 does not provide any guarantee or warranty regarding the security of this project. All smart contract software should be used at the sole risk and responsibility of users.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .dark-default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .dark-default-dark .mtk1 { color: #D4D4D4; }\n  .dark-default-dark .mtk3 { color: #6A9955; }\n  .dark-default-dark .mtk4 { color: #569CD6; }\n  .dark-default-dark .mtk11 { color: #DCDCAA; }\n  .dark-default-dark .mtk12 { color: #9CDCFE; }\n  .dark-default-dark .mtk7 { color: #B5CEA8; }\n  .dark-default-dark .mtk10 { color: #4EC9B0; }\n  .dark-default-dark .mtk15 { color: #C586C0; }\n  .dark-default-dark .mtk8 { color: #CE9178; }\n  .dark-default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>",
  "toc": "<ul>\n<li>\n<p><a href=\"#overview\">Overview</a></p>\n<ul>\n<li><a href=\"#about-c4\">About C4</a></li>\n<li><a href=\"#wardens\">Wardens</a></li>\n</ul>\n</li>\n<li><a href=\"#summary\">Summary</a></li>\n<li><a href=\"#scope\">Scope</a></li>\n<li><a href=\"#severity-criteria\">Severity Criteria</a></li>\n<li>\n<p><a href=\"#high-risk-findings-2\">High Risk Findings (2)</a></p>\n<ul>\n<li><a href=\"#h-01-user-can-call-liquidate-and-steal-all-collateral-due-to-arbitrary-router-call\">[H-01] User can call liquidate() and steal all collateral due to arbitrary router call</a></li>\n<li><a href=\"#h-02-fund-loss-or-theft-by-attacker-with-creating-a-flash-loan-and-setting-supervault-as-receiver-so-executeoperation-will-be-get-called-by-lendingpool-but-with-attackers-specified-params\">[H-02] Fund loss or theft by attacker with creating a flash loan and setting SuperVault as receiver so executeOperation() will be get called by lendingPool but with attackers specified params</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#medium-risk-findings-5\">Medium Risk Findings (5)</a></p>\n<ul>\n<li><a href=\"#m-01-decimal-token-underflow-could-produce-loss-of-funds\">[M-01] Decimal token underflow could produce loss of funds</a></li>\n<li><a href=\"#m-02-users-can-use-updateboost-function-to-claim-unfairly-large-rewards-from-liquidity-mining-contracts-for-themselves-at-cost-of-other-users\">[M-02] Users can use updateBoost function to claim unfairly large rewards from liquidity mining contracts for themselves at cost of other users.</a></li>\n<li><a href=\"#m-03-supervaults-leverageswap-and-emptyvaultoperation-can-become-stuck\">[M-03] SuperVault’s leverageSwap and emptyVaultOperation can become stuck</a></li>\n<li><a href=\"#m-04-non-standard-erc20-tokens-are-not-supported\">[M-04] Non-standard ERC20 Tokens are Not Supported</a></li>\n<li><a href=\"#m-05-abdkmath64-performs-multiplication-on-results-of-division\">[M-05] ABDKMath64 performs multiplication on results of division</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#low-risk-and-non-critical-issues\">Low Risk and Non-Critical Issues</a></p>\n<ul>\n<li><a href=\"#table-of-contents\">Table of Contents</a></li>\n<li><a href=\"#l-01-approve-should-be-replaced-with-safeapprove-or-safeincreaseallowance--safedecreaseallowance\">L-01 <code>approve</code> should be replaced with <code>safeApprove</code> or <code>safeIncreaseAllowance() / safeDecreaseAllowance()</code></a></li>\n<li><a href=\"#l-02-add-constructor-initializers\">L-02 Add constructor initializers</a></li>\n<li><a href=\"#l-03-missing-address0-checks\">L-03 Missing address(0) checks</a></li>\n<li><a href=\"#l-04-add-a-timelock-to-critical-functions\">L-04 Add a timelock to critical functions</a></li>\n<li><a href=\"#l-05-fee-in-demandminerv2setfeeconfig-should-be-upper-bounded\">L-05 Fee in <code>DemandMinerV2.setFeeConfig()</code> should be upper-bounded</a></li>\n<li><a href=\"#n-01-unused-named-returns\">N-01 Unused named returns</a></li>\n<li><a href=\"#n-02-useless-import-safemath\">N-02 Useless import: SafeMath</a></li>\n<li><a href=\"#n-03-the-visibility-for-constructor-is-ignored\">N-03 The visibility for constructor is ignored</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#gas-optimizations\">Gas Optimizations</a></p>\n<ul>\n<li><a href=\"#table-of-contents-1\">Table of Contents</a></li>\n<li><a href=\"#g-01-help-the-optimizer-by-saving-a-storage-variables-reference-instead-of-repeatedly-fetching-it\">G-01 Help the optimizer by saving a storage variable’s reference instead of repeatedly fetching it</a></li>\n<li><a href=\"#g-02-caching-external-values-in-memory\">G-02 Caching external values in memory</a></li>\n<li><a href=\"#g-03-using-an-existing-memory-variable-instead-of-reading-storage\">G-03 Using an existing memory variable instead of reading storage</a></li>\n<li><a href=\"#g-04-balancerv2lporaclesol-tighly-pack-storage-variables\">G-04 <code>BalancerV2LPOracle.sol</code>: Tighly pack storage variables</a></li>\n<li><a href=\"#g-05-variables-that-should-be-constant\">G-05 Variables that should be constant</a></li>\n<li><a href=\"#g-06--0-is-less-efficient-than--0-for-unsigned-integers-with-proof\">G-06 <code>> 0</code> is less efficient than <code>!= 0</code> for unsigned integers (with proof)</a></li>\n<li><a href=\"#g-07--is-cheaper-than-\">G-07 <code>&#x3C;=</code> is cheaper than <code>&#x3C;</code></a></li>\n<li><a href=\"#g-08-splitting-require-statements-that-use--saves-gas\">G-08 Splitting <code>require()</code> statements that use <code>&#x26;&#x26;</code> saves gas</a></li>\n<li><a href=\"#g-09-require-should-be-used-for-checking-error-conditions-on-inputs-and-return-values-while-assert-should-be-used-for-invariant-checking\">G-09 <code>require()</code> should be used for checking error conditions on inputs and return values while <code>assert()</code> should be used for invariant checking</a></li>\n<li><a href=\"#g-10-amounts-should-be-checked-for-0-before-calling-a-transfer\">G-10 Amounts should be checked for 0 before calling a transfer</a></li>\n<li><a href=\"#g-11-an-arrays-length-should-be-cached-to-save-gas-in-for-loops\">G-11 An array’s length should be cached to save gas in for-loops</a></li>\n<li><a href=\"#g-12-i-costs-less-gas-compared-to-i-or-i--1\">G-12 <code>++i</code> costs less gas compared to <code>i++</code> or <code>i += 1</code></a></li>\n<li><a href=\"#g-13-usage-of-a-non-native-256-bits-uint-as-a-counter-in-for-loops-increases-gas-cost\">G-13 Usage of a non-native 256 bits uint as a counter in for-loops increases gas cost</a></li>\n<li><a href=\"#g-14-public-functions-to-external\">G-14 Public functions to external</a></li>\n<li><a href=\"#g-15-no-need-to-explicitly-initialize-variables-with-default-values\">G-15 No need to explicitly initialize variables with default values</a></li>\n<li><a href=\"#g-16-use-custom-errors-instead-of-revert-strings-to-save-gas\">G-16 Use Custom Errors instead of Revert Strings to save Gas</a></li>\n</ul>\n</li>\n<li><a href=\"#disclosures\">Disclosures</a></li>\n</ul>",
  "md": "\n# Overview\n\n## About C4\n\nCode4rena (C4) is an open organization consisting of security researchers, auditors, developers, and individuals with domain expertise in smart contracts.\n\nA C4 audit contest is an event in which community participants, referred to as Wardens, review, audit, or analyze smart contract logic in exchange for a bounty provided by sponsoring projects.\n\nDuring the audit contest outlined in this document, C4 conducted an analysis of the Mimo DeFi smart contract system written in Solidity. The audit contest took place between April 28 - \nMay 2 2022.\n\n## Wardens\n\n46 Wardens contributed reports to the Mimo DeFi contest:\n\n  1. 0xDjango\n  1. unforgiven\n  1. [Picodes](https://twitter.com/thePicodes)\n  1. AlleyCat\n  1. [smiling_heretic](https://github.com/SmilingHeretic)\n  1. robee\n  1. [defsec](https://twitter.com/defsec_)\n  1. [pauliax](https://twitter.com/SolidityDev)\n  1. [Dravee](https://twitter.com/JustDravee)\n  1. 0x1f8b\n  1. [broccolirob](https://twitter.com/0xbroccolirob)\n  1. [MaratCerby](https://twitter.com/MaratCerby)\n  1. [ych18](https://www.linkedin.com/in/yahia-chaabane/)\n  1. [joestakey](https://twitter.com/JoeStakey)\n  1. [berndartmueller](https://twitter.com/berndartmueller)\n  1. hyh\n  1. delfin454000\n  1. cccz\n  1. sorrynotsorry\n  1. kebabsec (okkothejawa and [FlameHorizon](https://twitter.com/FlameHorizon1))\n  1. [z3s](https://github.com/z3s/)\n  1. [0xNazgul](https://twitter.com/0xNazgul)\n  1. 0x4non\n  1. rotcivegaf\n  1. [Funen](https://instagram.com/vanensurya)\n  1. GimelSec ([rayn](https://twitter.com/rayn731) and sces60107)\n  1. samruna\n  1. 0x52\n  1. dipp\n  1. peritoflores\n  1. sikorico\n  1. [GalloDaSballo](https://twitter.com/gallodasballo)\n  1. Hawkeye (0xwags and 0xmint)\n  1. ilan\n  1. [luduvigo](https://twitter.com/luduvigo)\n  1. [shenwilly](https://twitter.com/shenwilly_)\n  1. simon135\n  1. 0xkatana\n  1. slywaters\n  1. [Tomio](https://twitter.com/meidhiwirara)\n  1. [0v3rf10w](https://twitter.com/_0v3rf10w)\n  1. oyc_109\n  1. [Tadashi](https://github.com/htadashi)\n\nThis contest was judged by [gzeon](https://twitter.com/gzeon).\n\nFinal report assembled by [liveactionllama](https://twitter.com/liveactionllama).\n\n# Summary\n\nThe C4 analysis yielded an aggregated total of 7 unique vulnerabilities. Of these vulnerabilities, 2 received a risk rating in the category of HIGH severity and 5 received a risk rating in the category of MEDIUM severity.\n\nAdditionally, C4 analysis included 33 reports detailing issues with a risk rating of LOW severity or non-critical. There were also 26 reports recommending gas optimizations.\n\nAll of the issues presented here are linked back to their original finding.\n\n# Scope\n\nThe code under review can be found within the [C4 Mimo DeFi contest repository](https://github.com/code-423n4/2022-04-mimo), and is composed of 26 smart contracts written in the Solidity programming language and includes 2,432 lines of Solidity code.\n\n# Severity Criteria\n\nC4 assesses the severity of disclosed vulnerabilities according to a methodology based on [OWASP standards](https://owasp.org/www-community/OWASP_Risk_Rating_Methodology).\n\nVulnerabilities are divided into three primary risk categories: high, medium, and low/non-critical.\n\nHigh-level considerations for vulnerabilities span the following key areas when conducting assessments:\n\n- Malicious Input Handling\n- Escalation of privileges\n- Arithmetic\n- Gas use\n\nFurther information regarding the severity criteria referenced throughout the submission review process, please refer to the documentation provided on [the C4 website](https://code4rena.com).\n\n# High Risk Findings (2)\n## [[H-01] User can call liquidate() and steal all collateral due to arbitrary router call](https://github.com/code-423n4/2022-04-mimo-findings/issues/83)\n_Submitted by 0xDjango_\n\n<https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/core/contracts/liquidityMining/v2/PARMinerV2.sol#L126>\n\n<https://github.com/Uniswap/v2-periphery/blob/2efa12e0f2d808d9b49737927f0e416fafa5af68/contracts/UniswapV2Router02.sol#L299>\n\n<https://github.com/Uniswap/solidity-lib/blob/c01640b0f0f1d8a85cba8de378cc48469fcfd9a6/contracts/libraries/TransferHelper.sol#L47-L50>\n\nA malicious user is able to steal all collateral of an unhealthy position in `PARMinerV2.sol`. The code for the `liquidate()` function is written so that the following steps are followed:\n\n*   User calls `PARMinerV2.liquidate()`\n*   PARMinerV2 performs the liquidation with `_a.parallel().core().liquidatePartial()`\n*   PARMinerV2 receives the liquidated collateral\n*   An arbitrary router function is called to swap the collateral to PAR\n*   Finally, `PARMinerV2.liquidate()` checks that PARMinerV2's PAR balance is higher than the balance at the beginning of the function call.\n\nThe exploit occurs with the arbitrary router call. The malicious user is able to supply the `dexTxnData` parameter which dictates the function call to the router. If the user supplied a function such as UniswapV2Router's `swapExactTokenForETH()`, then control flow will be given to the user, allowing them to perform the exploit.\n\nNote: The Mimo developers have stated that the routers used by the protocol will be DEX Aggregators such as 1inch and Paraswap, but this submission will be referring to UniswapV2Router for simplicity. It can be assumed that the dex aggregators currently allow swapping tokens for ETH.\n\nContinuing the exploit, once the attacker has gained control due to the ETH transfer, they are able to swap the ETH for PAR. Finally, they deposit the PAR with `PARMinerV2.deposit()`. This will cause the final check of `liquidate()` to pass because PARMinerV2's PAR balance will be larger than the start of the liquidation call.\n\nThe attacker is able to steal all collateral from every unhealthy position that they liquidate. In the most extreme case, the attacker is able to open their own risky positions with the hope that the position becomes unhealthy. They will borrow the PAR and then liquidate themselves to take back the collateral. Thus effectively stealing PAR.\n\n### Proof of Concept\n\nSteps for exploit:\n\n*   Attacker monitors unhealthy positions. Finds a position to liquidate.\n*   Attacker calls `PARMinerV2.liquidate()`\n*   Position liquidated. Collateral transferred back to `PARMinerV2`\n*   In the `liquidate()` function, attacker supplies bytes for `UniswapV2Router.swapExactTokensForETH(uint amountIn, uint amountOutMin, address[] calldata path, address to, uint deadline)`. For `to`, they supply the attacker contract.\n*   `swapExactTokensForETH()` firstly swaps the collateral for ETH and then transfers the ETH to the user with `TransferHelper.safeTransferETH(to, amounts[amounts.length - 1]);`\n*   `TransferHelper.safeTransferETH()` contains a call to the receiver via `(bool success, ) = to.call{value: value}(new bytes(0));`\n*   Therefore, the attacker contract will indeed gain control of execution.\n\nThe attacker contract will then perform the following steps:\n\n*   Swap the received ETH to PAR.\n*   Deposit the PAR in `PARMinerV2`\n*   Withdraw the deposited PAR.\n\n### Recommended Mitigation Steps\n\nThe arbitrary call to the router contracts is risky because of the various functions that they can contain. Perhaps a solution is to only allow certain calls such as swapping tokens to tokens, not ETH. This would require frequently updated knowledge of the router's functions, though would be beneficial for security.\n\nAlso, adding a check that the `_totalStake` variable has not increased during the liquidation call will mitigate the risk of the attacker depositing the PAR to increase the contract's balance. The attacker would have no option but to transfer the PAR to PARMinerV2 as is intended.\n\n**[m19 (Mimo Defi) disagreed with severity and commented](https://github.com/code-423n4/2022-04-mimo-findings/issues/83#issuecomment-1118331621):**\n > We believe in theory this attack is actually possible, but highly unlikely to happen. It also begs the question of whether it's really worth it for an attacker to do this because they could just call VaultsCore.liquidate() themselves (for example with a flashloan) and stake all the PAR they profit that way directly.\n\n**[m19 (Mimo DeFi) confirmed and commented](https://github.com/code-423n4/2022-04-mimo-findings/issues/83#issuecomment-1120159996):**\n > We misunderstood this exploit wrong and we confirm it. Basically, if the attacker was liquidating a 10,000 PAR position, he could potentially end up with a 10,000 PAR stake + liquidation profits. Our previous understanding was that he could only end up with the profits.\n> \n> At the very least we'll implement a check that `totalStake` hasn't changed, we will carefully consider if more changes are needed.\n\n\n\n***\n\n## [[H-02] Fund loss or theft by attacker with creating a flash loan and setting SuperVault as receiver so executeOperation() will be get called by lendingPool but with attackers specified params](https://github.com/code-423n4/2022-04-mimo-findings/issues/123)\n_Submitted by unforgiven, also found by Picodes_\n\nAccording to Aave documentation, when requesting flash-loan, it's possible to specify a `receiver`, so function `executeOperation()` of that `receiver` will be called by `lendingPool`.\n<https://docs.aave.com/developers/v/2.0/guides/flash-loans>\nIn the `SuperVault` there is no check to prevent this attack so attacker can use this and perform  `griefing attack` and make miner contract lose all its funds. or he can create specifically crafted `params` so when `executeOperation()` is called by `lendingPool`, attacker could steal vault's user funds.\n\n### Proof of Concept\n\nTo exploit this attacker will do this steps:\n\n1.  will call `Aave lendingPool` to get a flash-loan and specify `SuperVault` as `receiver` of flash-loan. and also create a specific `params` that invoke `Operation.REBALANCE` action to change user vault's collateral.\n2.  `lendingPool` will call `executeOperation()` of `SuperVault` with attacker specified data.\n3.  `executeOperation()` will check `msg.sender` and will process the function call which will cause some dummy exchanges that will cost user exchange fee and flash-loan fee.\n4.  attacker will repeat this attack until user losses all his funds.\n\n<!---->\n\n      function executeOperation(\n        address[] calldata assets,\n        uint256[] calldata amounts,\n        uint256[] calldata premiums,\n        address,\n        bytes calldata params\n      ) external returns (bool) {\n        require(msg.sender == address(lendingPool), \"SV002\");\n        (Operation operation, bytes memory operationParams) = abi.decode(params, (Operation, bytes));\n        IERC20 asset = IERC20(assets[0]);\n        uint256 flashloanRepayAmount = amounts[0] + premiums[0];\n        if (operation == Operation.LEVERAGE) {\n          leverageOperation(asset, flashloanRepayAmount, operationParams);\n        }\n        if (operation == Operation.REBALANCE) {\n          rebalanceOperation(asset, amounts[0], flashloanRepayAmount, operationParams);\n        }\n        if (operation == Operation.EMPTY) {\n          emptyVaultOperation(asset, amounts[0], flashloanRepayAmount, operationParams);\n        }\n\n        asset.approve(address(lendingPool), flashloanRepayAmount);\n        return true;\n      }\n\nTo steal user fund in `SupperVault` attacker needs more steps. in all these actions (`Operation.REBALANCE`, `Operation.LEVERAGE`, `Operation.EMPTY`) contract will call `aggregatorSwap()` with data that are controlled by attacker.\n\n      function aggregatorSwap(\n        uint256 dexIndex,\n        IERC20 token,\n        uint256 amount,\n        bytes memory dexTxData\n      ) internal {\n        (address proxy, address router) = _dexAP.dexMapping(dexIndex);\n        require(proxy != address(0) && router != address(0), \"SV201\"); \n        token.approve(proxy, amount);\n        router.call(dexTxData);\n      }\n\nAttacker can put special data in `dexTxData` that make contract to do an exchange with bad price. To do this, attacker will create a smart contract that will do this steps:\n\n1.  manipulate price in exchange with flash loan.\n2.  make a call to `executeOperation()` by `Aave flash-loan` with `receiver` and specific `params` so that `SuperVault` will make calls to manipulated exchange for exchanging.\n3.  do the reverse of #1 and pay the flash-loan and steal the user fund.\n\nThe details are:\nAttacker can manipulate swapping pool price with flash-loan, then Attacker will create specific `params` and perform steps 1 to 4. so contract will try to exchange tokens and because of attacker price manipulation and specific `dexTxData`, contract will have bad deals.\nAfter that, attacker can reverse the process of swap manipulation and get his  flash-loan tokens and some of `SuperVault` funds and. then pay the flash-loan.\n\n### Tools Used\n\nVIM\n\n### Recommended Mitigation Steps\n\nThere should be some state variable which stores the fact that `SuperVault` imitated flash-loan.\nWhen contract tries to start flash-loan, it sets the `isFlash` to `True` and `executeOperation()` only accepts calls if `isFlash` is `True`. and after the flash loan code will set `isFlash` to `False.`\n\n**[m19 (Mimo DeFi) confirmed and commented](https://github.com/code-423n4/2022-04-mimo-findings/issues/123#issuecomment-1117124780):**\n > We definitely confirm this issue and intend to fix it.\n\n\n\n***\n\n \n# Medium Risk Findings (5)\n## [[M-01] Decimal token underflow could produce loss of funds](https://github.com/code-423n4/2022-04-mimo-findings/issues/55)\n_Submitted by 0x1f8b, also found by broccolirob and pauliax_\n\n<https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/core/contracts/oracles/GUniLPOracle.sol#L47>\n\n<https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/core/contracts/oracles/GUniLPOracle.sol#L51>\n\nIt is possible to produce underflows with specific tokens which can cause errors when calculating prices.\n\n### Proof of Concept\n\nThe pragma is `pragma solidity 0.6.12;` therefore, integer overflows must be protected with safe math. But in the case of [GUniLPOracle](https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/core/contracts/oracles/GUniLPOracle.sol#L51), there is a decimal subtraction that could underflow if any token in the pool has more than 18 decimals. This could cause an error when calculating price values.\n\n### Recommended Mitigation Steps\n\nEnsure that tokens have less than 18 decimals.\n\n**[m19 (Mimo DeFi) confirmed and commented](https://github.com/code-423n4/2022-04-mimo-findings/issues/55#issuecomment-1118295987):**\n > We confirm this issue.\n\n\n\n***\n\n## [[M-02] Users can use updateBoost function to claim unfairly large rewards from liquidity mining contracts for themselves at cost of other users.](https://github.com/code-423n4/2022-04-mimo-findings/issues/136)\n_Submitted by smiling_heretic, also found by unforgiven_\n\n<https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/core/contracts/liquidityMining/v2/PARMinerV2.sol#L159-L165>\n\n<https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/core/contracts/liquidityMining/v2/GenericMinerV2.sol#L88-L94>\n\nUsers aware of this vulnerability could effectively steal a portion of liquidity mining rewards from honest users.\n\nAffected contracts are: `SupplyMinerV2`, `  DemandMinerV2 `, `  PARMinerV2 `\n\n`VotingMinerV2` is less affected because locking veMIMO in `votingEscrow`  triggers a call to `releaseMIMO` of this miner contract (which in turn updates user's boost multiplier).\n\n### Proof of Concept\n\nLet's focus here on `SupplyMinerV2`. The exploits for other liquidity mining contracts are analogous.\n\n#### Scenario 1:\n\nBoth Alice and Bob deposit 1 WETH to `coreVaults`  and borrow 100 PAR from `coreVaults`. They both have no locked veMIMO.\n\nNow they wait for a month without interacting with the protocol. In the meantime, `SupplyMinerV2` accumulated 100 MIMO for rewards.\n\nAlice locks huge amount of veMIMO in `votingEscrow`, so now her `boostMultiplier`  is 4.\n\nLet's assume that Alice and Bob are the only users of the protocol. Because they borrowed the same amounts of PAR, they should have the same stakes for past month, so a fair reward for each of them (for this past month) should be 50 MIMO. If they simply repay their debts now, 50 MIMO is indeed what they get.\n\nHowever if Alice calls `supplyMiner.updateBoost(alice)` before repaying her debt, she can claim 80 MIMO and leave only 20 MIMO for Bob. She can basically apply the multiplier 4 to her past stake.\n\n#### Scenario 2:\n\nBoth Alice and Bob deposit 1 WETH to `coreVaults`  and borrow 100 PAR from `coreVaults`. Bob locks huge amount of veMIMO in `votingEscrow` for 4 years, so now his `boostMultiplier` is 4.\n\nAlice and Bob wait for 4 years without interacting with the protocol.\n\n`SupplyMinerV2` accumulated 1000 MIMO rewards.\n\nBecause of his locked veMIMO, Bob should be able to claim larger reward than Alice. Maybe not 4 times larger but definitely larger.\n\nHowever, if Alice includes  a transaction with call `supplyMiner.updateBoost(bob)` before Bob's `vaultsCore.repay()` , then she can claim 500 MIMO. She can effectively set Bob's `boostMultiplier` for past 4 years to 1.\n\n### Tools Used\n\nTested in Foundry\n\n### Recommended Mitigation Steps\n\nI have 2 ideas:\n\n1.  Remove `updateBoost` function. There shouldn't be a way to update boost multiplier without claiming rewards and updating `_userInfo.accAmountPerShare` .  So `releaseRewards`  should be sufficient.\n2.  A better, but also much more difficult solution, would be to redesign boost updates in such a way that distribution of rewards no longer depends on when and how often boost multiplier is updated. If the formula for boost multiplier stays the same, this approach might require calculating integrals of the multiplier as a function of time.\n\n**[m19 (Mimo DeFi) confirmed and commented](https://github.com/code-423n4/2022-04-mimo-findings/issues/136#issuecomment-1117148014):**\n > We agree this is an issue and intend to fix it.\n\n\n\n***\n\n## [[M-03] SuperVault's leverageSwap and emptyVaultOperation can become stuck](https://github.com/code-423n4/2022-04-mimo-findings/issues/145)\n_Submitted by hyh, also found by cccz, berndartmueller, delfin454000, joestakey, robee, defsec, and 0xDjango_\n\n<https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/supervaults/contracts/SuperVault.sol#L320-L326>\n\n<https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/supervaults/contracts/SuperVault.sol#L198-L199>\n\nleverageSwap and emptyVaultOperation can be run repeatedly for the same tokens. If these tokens happen to be an ERC20 that do not allow for approval of positive amount when allowance already positive, both functions can become stuck.\n\n<https://github.com/d-xo/weird-erc20#approval-race-protections>\n\nIn both cases, logic doesn't seem to guarantee full usage of the allowance given. If it's not used fully, the token will revert each next approve attempt, which will render the functions unavailable for the token.\n\nWhile emptyVaultOperation can be cured by emptying the balance and rerun, in the leverageSwap case there is no such fix possible.\n\nSetting severity to medium as this clearly impacts leverageSwap and emptyVaultOperation availability to the users.\n\n### Proof of Concept\n\nleverageSwap calls target token for maximum approval of core each time:\n\n<https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/supervaults/contracts/SuperVault.sol#L320-L326>\n\n```solidity\n  ///@param token The leveraged asset to swap PAR for\n  function leverageSwap(bytes memory params, IERC20 token) internal {\n    (uint256 parToSell, bytes memory dexTxData, uint dexIndex) = abi.decode(\n      params,\n      (uint256, bytes, uint )\n    );\n    token.approve(address(a.core()), 2**256 - 1);\n```\n\nSome tokens do not have maximum amount as an exception, simply reverting any attempt to approve positive from positive, for example current USDT contract, L205:\n\n<https://etherscan.io/address/0xdac17f958d2ee523a2206206994597c13d831ec7#code>\n\nI.e. if leverageSwap be run again with USDT it will revert all the times after the first.\n\nemptyVaultOperation approves core for the whole balance of stablex:\n\n<https://github.com/code-423n4/2022-04-mimo/blob/b18670f44d595483df2c0f76d1c57a7bfbfbc083/supervaults/contracts/SuperVault.sol#L198-L199>\n\n```solidity\n    IERC20 par = IERC20(a.stablex());\n    par.approve(address(a.core()), par.balanceOf(address(this)));\n```\n\n### Recommended Mitigation Steps\n\nConsider adding zero amount approval before actual amount approval, i.e. force zero allowance before current approval.\n\n**[m19 (Mimo DeFi) acknowledged](https://github.com/code-423n4/2022-04-mimo-findings/issues/145)**\n\n**[gzeoneth (judge) commented](https://github.com/code-423n4/2022-04-mimo-findings/issues/145#issuecomment-1146831466):**\n > Having `approve(0)` first will still revert with USDT because the interface expect it to return a bool but USDT return void. Fund also won't be stuck because it will revert. Judging as Med Risk as function availability could be impacted. Unlike the core protocol, `SuperVault` can take any token as input and USDT is listed on various lending protocol like AAVE.\n\n\n\n***\n\n## [[M-04] Non-standard ERC20 Tokens are Not Supported](https://github.com/code-423n4/2022-04-mimo-findings/issues/127)\n_Submitted by ych18, also found by MaratCerby, robee, and defsec_\n\nWhen trying to call `SuperVault.executeOperation`  the transaction reverts. This is because the call to `asset.approve()` in line{97} doesn't match the expected function signature of `approve()` on the target contract like in the case of USDT.\n\nThis issue exists in any call to approve function when the asset could be any ERC20.\n\nRecommendation : consider using safeApprove of OZ\n\n**[m19 (Mimo DeFi) acknowledged](https://github.com/code-423n4/2022-04-mimo-findings/issues/127)**\n\n**[gzeoneth (judge) decreased severity to Medium and commented](https://github.com/code-423n4/2022-04-mimo-findings/issues/127#issuecomment-1146832811):**\n > Judging as Med Risk as function availability could be impacted. Unlike the core protocol, `SuperVault` can take any token as input and USDT is listed on various lending protocol like AAVE.\n\n\n\n***\n\n## [[M-05] ABDKMath64 performs multiplication on results of division](https://github.com/code-423n4/2022-04-mimo-findings/issues/151)\n_Submitted by AlleyCat_\n\n<https://github.com/code-423n4/2022-04-mimo/blob/main/core/contracts/libraries/ABDKMath64x64.sol#L626>\n\n<https://github.com/code-423n4/2022-04-mimo/blob/main/core/contracts/libraries/ABDKMath64x64.sol#L629>\n\n<https://github.com/code-423n4/2022-04-mimo/blob/main/core/contracts/libraries/ABDKMath64x64.sol#L630>\n\nSolidity could truncate the results, performing multiplication before division will prevent rounding/truncation in solidity math.\n\n### Recommended Mitigation Steps\n\nConsider ordering multiplication first.\n\n**[m19 (Mimo DeFi) acknowledged](https://github.com/code-423n4/2022-04-mimo-findings/issues/151)**\n\n\n\n***\n\n# Low Risk and Non-Critical Issues\n\nFor this contest, 33 reports were submitted by wardens detailing low risk and non-critical issues. The [report highlighted below](https://github.com/code-423n4/2022-04-mimo-findings/issues/153) by **Dravee** received the top score from the judge.\n\n*The following wardens also submitted reports: [robee](https://github.com/code-423n4/2022-04-mimo-findings/issues/104), [defsec](https://github.com/code-423n4/2022-04-mimo-findings/issues/124), [pauliax](https://github.com/code-423n4/2022-04-mimo-findings/issues/137), [0xDjango](https://github.com/code-423n4/2022-04-mimo-findings/issues/87), [berndartmueller](https://github.com/code-423n4/2022-04-mimo-findings/issues/117), [hyh](https://github.com/code-423n4/2022-04-mimo-findings/issues/165), [joestakey](https://github.com/code-423n4/2022-04-mimo-findings/issues/114), [0x52](https://github.com/code-423n4/2022-04-mimo-findings/issues/66), [dipp](https://github.com/code-423n4/2022-04-mimo-findings/issues/113), [kebabsec](https://github.com/code-423n4/2022-04-mimo-findings/issues/74), [peritoflores](https://github.com/code-423n4/2022-04-mimo-findings/issues/149), [Picodes](https://github.com/code-423n4/2022-04-mimo-findings/issues/109), [sikorico](https://github.com/code-423n4/2022-04-mimo-findings/issues/106), [sorrynotsorry](https://github.com/code-423n4/2022-04-mimo-findings/issues/102), [z3s](https://github.com/code-423n4/2022-04-mimo-findings/issues/96), [0x1f8b](https://github.com/code-423n4/2022-04-mimo-findings/issues/58), [0x4non](https://github.com/code-423n4/2022-04-mimo-findings/issues/3), [AlleyCat](https://github.com/code-423n4/2022-04-mimo-findings/issues/154), [cccz](https://github.com/code-423n4/2022-04-mimo-findings/issues/61), [delfin454000](https://github.com/code-423n4/2022-04-mimo-findings/issues/141), [Funen](https://github.com/code-423n4/2022-04-mimo-findings/issues/152), [GalloDaSballo](https://github.com/code-423n4/2022-04-mimo-findings/issues/12), [GimelSec](https://github.com/code-423n4/2022-04-mimo-findings/issues/92), [Hawkeye](https://github.com/code-423n4/2022-04-mimo-findings/issues/162), [ilan](https://github.com/code-423n4/2022-04-mimo-findings/issues/110), [luduvigo](https://github.com/code-423n4/2022-04-mimo-findings/issues/10), [MaratCerby](https://github.com/code-423n4/2022-04-mimo-findings/issues/51), [rotcivegaf](https://github.com/code-423n4/2022-04-mimo-findings/issues/23), [samruna](https://github.com/code-423n4/2022-04-mimo-findings/issues/13), [shenwilly](https://github.com/code-423n4/2022-04-mimo-findings/issues/79), [simon135](https://github.com/code-423n4/2022-04-mimo-findings/issues/72), and [unforgiven](https://github.com/code-423n4/2022-04-mimo-findings/issues/98).*\n\n## Table of Contents\n\nSee [original submission](https://github.com/code-423n4/2022-04-mimo-findings/issues/153) for details.\n\n## [L-01] `approve` should be replaced with `safeApprove` or `safeIncreaseAllowance() / safeDecreaseAllowance()`\n\n`approve` is subject to a known front-running attack. Consider using `safeApprove` instead:\n\n```solidity\ncore/contracts/liquidityMining/v2/PARMinerV2.sol:\n   58:     _par.approve(address(_a.parallel().core()), uint256(-1));\n  125:     collateralToken.approve(proxy, collateralToken.balanceOf(address(this)));\n\ncore/echidna/TInceptionVaultHealthy.sol:\n  33:     _weth.approve(address(a), _adminDepositAmount);\n  39:     _link.approve(address(v), _userDepositAmount);\n  47:     _par.approve(address(_inceptionVaultsCore), _MAX_INT);\n\ncore/echidna/TInceptionVaultUnhealthy.sol:\n  37:     _weth.approve(address(a), _adminDepositAmount);\n  43:     _link.approve(address(v), _userDepositAmount);\n  52:     _par.approve(address(_inceptionVaultsCore), _MAX_INT);\n\ncore/echidna/TInceptionVaultUnhealthyAssertion.sol:\n  36:     _weth.approve(address(a), _adminDepositAmount);\n  42:     _link.approve(address(v), _userDepositAmount);\n  51:     _par.approve(address(_inceptionVaultsCore), _MAX_INT);\n\ncore/echidna/TInceptionVaultUnhealthyProperty.sol:\n  35:     _weth.approve(address(a), _adminDepositAmount);\n  41:     _link.approve(address(v), _userDepositAmount);\n  50:     _par.approve(address(_inceptionVaultsCore), _MAX_INT);\n\nsupervaults/contracts/SuperVault.sol:\n   97:     asset.approve(address(lendingPool), flashloanRepayAmount);\n  149:     IERC20(toCollateral).approve(address(a.core()), depositAmount);\n  199:     par.approve(address(a.core()), par.balanceOf(address(this)));\n  273:     token.approve(address(a.core()), amount);\n  289:     token.approve(address(a.core()), depositAmount);\n  326:     token.approve(address(a.core()), 2**256 - 1);\n  345:     token.approve(proxy, amount);\n```\n\nKeep in mind though that it would be actually better to replace safeApprove() with safeIncreaseAllowance() or safeDecreaseAllowance().\n\nSee this discussion: [SafeERC20.safeApprove() Has unnecessary and unsecure added behavior](https://github.com/OpenZeppelin/openzeppelin-contracts/issues/2219)\n\n## [L-02] Add constructor initializers\n\nAs per [OpenZeppelinâ€™s (OZ) recommendation](https://forum.openzeppelin.com/t/uupsupgradeable-vulnerability-post-mortem/15680/6), â€œThe guidelines are now to make it impossible for *anyone* to run `initialize` on an implementation contract, by adding an empty constructor with the `initializer` modifier. So the implementation contract gets initialized automatically upon deployment.â€\n\nNote that this behaviour is also incorporated the [OZ Wizard](https://wizard.openzeppelin.com/) since the UUPS vulnerability discovery: â€œAdditionally, we modified the code generated by the [Wizard 19](https://wizard.openzeppelin.com/) to include a constructor that automatically initializes the implementation when deployed.â€\n\nFurthermore, this thwarts any attempts to frontrun the initialization tx of these contracts:\n\n```solidity\ncore/contracts/inception/AdminInceptionVault.sol:\n  35:   function initialize(\n\ncore/contracts/inception/InceptionVaultsCore.sol:\n  40:   function initialize(\n\ncore/contracts/inception/InceptionVaultsDataProvider.sol:\n  30:   function initialize(IInceptionVaultsCore inceptionVaultsCore, IAddressProvider addressProvider)\n\ncore/contracts/inception/priceFeed/ChainlinkInceptionPriceFeed.sol:\n  29:   function initialize(\n\nsupervaults/contracts/SuperVault.sol:\n  49:   function initialize(\n```\n\n## [L-03] Missing address(0) checks\n\nAccording to Slither:\n\n```solidity\nAdminInceptionVault.initialize(address,IAddressProvider,IDebtNotifier,IWETH,IERC20,IInceptionVaultsCore)._owner (contracts/inception/AdminInceptionVault.sol#36) lacks a zero-check on :\n  - owner = _owner (contracts/inception/AdminInceptionVault.sol#48)\nInceptionVaultsCore.initialize(address,IInceptionVaultsCore.VaultConfig,IERC20,IAddressProvider,IAdminInceptionVault,IInceptionVaultsDataProvider,IInceptionVaultPriceFeed)._owner (contracts/inception/InceptionVaultsCore.sol#41) lacks a zero-check on :\n  - owner = _owner (contracts/inception/InceptionVaultsCore.sol#56)\nDemandMinerV2.setFeeCollector(address).feeCollector (contracts/liquidityMining/v2/DemandMinerV2.sol#46) lacks a zero-check on :\n  - _feeCollector = feeCollector (contracts/liquidityMining/v2/DemandMinerV2.sol#47)\nPARMinerV2.liquidate(uint256,uint256,uint256,bytes).router (contracts/liquidityMining/v2/PARMinerV2.sol#124) lacks a zero-check on :\n  - router.call(dexTxData) (contracts/liquidityMining/v2/PARMinerV2.sol#126)\n```\n\n## [L-04] Add a timelock to critical functions\n\nIt is a good practice to give time for users to react and adjust to critical changes. A timelock provides more guarantees and reduces the level of trust required, thus decreasing risk for users. It also indicates that the project is legitimate (less risk of a malicious Manager making a frontrunning/sandwich attack on the fees).\n\nConsider adding a timelock to:\n\n```solidity\nFile: DemandMinerV2.sol\n56:   function setFeeConfig(FeeConfig memory newFeeConfig) external override onlyManager {\n57:     _feeConfig = newFeeConfig;\n58:     emit FeeConfigSet(newFeeConfig);\n59:   }\n```\n\n## [L-05] Fee in `DemandMinerV2.setFeeConfig()` should be upper-bounded\n\n```solidity\nFile: DemandMinerV2.sol\n56:   function setFeeConfig(FeeConfig memory newFeeConfig) external override onlyManager {\n57:     _feeConfig = newFeeConfig;\n58:     emit FeeConfigSet(newFeeConfig);\n59:   }\n```\n\n## [N-01] Unused named returns\n\nUsing both named returns and a return statement isn't necessary. Removing one of those can improve code clarity:\n\n```solidity\ncore/contracts/inception/priceFeed/ChainlinkInceptionPriceFeed.sol:\n  73:   function getAssetPrice() public view override returns (uint256 price) {\n```\n\n## [N-02] Useless import: SafeMath\n\n```solidity\nFile: SuperVault.sol\n6: import \"@openzeppelin/contracts/utils/math/SafeMath.sol\"; //@audit NC: useless import\n```\n\n## [N-03] The visibility for constructor is ignored\n\n```solidity\nFile: SuperVaultFactory.sol\n17:   constructor(address _base) public {\n```\n\n**[m19 (Mimo DeFi) commented](https://github.com/code-423n4/2022-04-mimo-findings/issues/153#issuecomment-1120354471):**\n > Very clear and well structured QA report\n\n**[gzeoneth (judge) commented](https://github.com/code-423n4/2022-04-mimo-findings/issues/153#issuecomment-1146848674):**\n > For L-01 I don't think there are front-running risk but the suggestion to use `safeIncreaseAllowance` is fine\n> Otherwise looks good and I think the severity of each issue is well labeled.\n\n\n\n***\n\n# Gas Optimizations\n\nFor this contest, 26 reports were submitted by wardens detailing gas optimizations. The [report highlighted below](https://github.com/code-423n4/2022-04-mimo-findings/issues/139) by **Dravee** received the top score from the judge.\n\n*The following wardens also submitted reports: [joestakey](https://github.com/code-423n4/2022-04-mimo-findings/issues/111), [robee](https://github.com/code-423n4/2022-04-mimo-findings/issues/105), [0xNazgul](https://github.com/code-423n4/2022-04-mimo-findings/issues/82), [defsec](https://github.com/code-423n4/2022-04-mimo-findings/issues/129), [0xkatana](https://github.com/code-423n4/2022-04-mimo-findings/issues/71), [slywaters](https://github.com/code-423n4/2022-04-mimo-findings/issues/68), [Tomio](https://github.com/code-423n4/2022-04-mimo-findings/issues/97), [0v3rf10w](https://github.com/code-423n4/2022-04-mimo-findings/issues/78), [0x4non](https://github.com/code-423n4/2022-04-mimo-findings/issues/2), [0xDjango](https://github.com/code-423n4/2022-04-mimo-findings/issues/88), [delfin454000](https://github.com/code-423n4/2022-04-mimo-findings/issues/140), [MaratCerby](https://github.com/code-423n4/2022-04-mimo-findings/issues/60), [oyc_109](https://github.com/code-423n4/2022-04-mimo-findings/issues/20), [pauliax](https://github.com/code-423n4/2022-04-mimo-findings/issues/138), [rotcivegaf](https://github.com/code-423n4/2022-04-mimo-findings/issues/14), [sorrynotsorry](https://github.com/code-423n4/2022-04-mimo-findings/issues/101), [0x1f8b](https://github.com/code-423n4/2022-04-mimo-findings/issues/59), [Funen](https://github.com/code-423n4/2022-04-mimo-findings/issues/150), [GimelSec](https://github.com/code-423n4/2022-04-mimo-findings/issues/89), [kebabsec](https://github.com/code-423n4/2022-04-mimo-findings/issues/75), [Picodes](https://github.com/code-423n4/2022-04-mimo-findings/issues/108), [samruna](https://github.com/code-423n4/2022-04-mimo-findings/issues/11), [Tadashi](https://github.com/code-423n4/2022-04-mimo-findings/issues/157), [ych18](https://github.com/code-423n4/2022-04-mimo-findings/issues/128), and [z3s](https://github.com/code-423n4/2022-04-mimo-findings/issues/95).*\n\n## Table of Contents\n\nSee [original submission](https://github.com/code-423n4/2022-04-mimo-findings/issues/139).\n\n## [G-01] Help the optimizer by saving a storage variable's reference instead of repeatedly fetching it\n\nTo help the optimizer, declare a `storage` type variable and use it instead of repeatedly fetching the reference in a map or an array.\n\nThe effect can be quite significant.\n\nAs an example, instead of repeatedly calling `someMap[someIndex]`, save its reference like this: `SomeStruct storage someStruct = someMap[someIndex]` and use it.\n\nInstances include (check the `@audit` tags):\n\n```solidity\ncore/contracts/dex/DexAddressProvider.sol:\n  53:     return (_dexMapping[index].proxy, _dexMapping[index].router);  //@audit gas: should declare a storage variable \"Dex storage _dex = _dexMapping[index]\"\n```\n\n## [G-02] Caching external values in memory\n\nSee the `@audit` tags for further details:\n\n```solidity\ncore/contracts/dex/DexAddressProvider.sol:\n  22:     require(_a.controller().hasRole(_a.controller().MANAGER_ROLE(), msg.sender), \"LM010\"); //@audit gas: should cache _a.controller()\n\nsupervaults/contracts/SuperVault.sol:\n  369:     if (ga.mimo().balanceOf(address(this)) > 0) {  //@audit gas: should cache ga.mimo()\n```\n\n## [G-03] Using an existing memory variable instead of reading storage\n\nSee the `@audit` tags for further details:\n\n```solidity\ncore/contracts/oracles/BalancerV2LPOracle.sol:\n  41:     (address _pool, IBalancerVault.PoolSpecialization tokensNum) = vault.getPool(poolId); //@audit gas: should use memory variable _poolId: \"vault.getPool(_poolId)\"\n```\n\n## [G-04] `BalancerV2LPOracle.sol`: Tighly pack storage variables\n\nI suggest going from (see `@audit` tags):\n\n```solidity\nFile: BalancerV2LPOracle.sol\n14: contract BalancerV2LPOracle is AggregatorV3Interface, BNum {\n15:   using SafeMath for uint256;\n16: \n17:   string public override description; //@audit gas: 32 bytes\n18:   uint256 public override version = 3; //@audit gas: 32 bytes\n19:   uint8 public override decimals; //@audit gas: 1 byte, can be tightly packed by being moved further down or by moving an address closer\n20: \n21:   bytes32 public poolId; //@audit gas: 32 bytes\n22:   IBalancerVault public vault; //@audit gas: 20 bytes\n23:   IBalancerPool public pool; //@audit gas: 20 bytes\n24:   AggregatorV3Interface public oracleA; //@audit gas: 20 bytes\n25:   AggregatorV3Interface public oracleB; //@audit gas: 20 bytes\n```\n\nto\n\n```solidity\ncontract BalancerV2LPOracle is AggregatorV3Interface, BNum {\n  using SafeMath for uint256;\n\n  string public override description; //@audit gas: 32 bytes (slot 1)\n  uint256 public override version = 3; //@audit gas: 32 bytes (slot 2)\n  uint8 public override decimals; //@audit gas: 1 byte (slot 3)\n\n  IBalancerVault public vault; //@audit gas: 20 bytes (slot 3)\n  IBalancerPool public pool; //@audit gas: 20 bytes  (slot 4)\n  bytes32 public poolId; //@audit gas: 32 bytes <= this is the one we moved\n  AggregatorV3Interface public oracleA; //@audit gas: 20 bytes\n  AggregatorV3Interface public oracleB; //@audit gas: 20 bytes\n```\n\nWhich would save 1 storage slot.\n\n## [G-05] Variables that should be constant\n\nAccording to slither:\n\n```jsx\nBalancerV2LPOracle.version (contracts/oracles/BalancerV2LPOracle.sol#18) should be constant\nGUniLPOracle.version (contracts/oracles/GUniLPOracle.sol#16) should be constant\n```\n\n## [G-06] `> 0` is less efficient than `!= 0` for unsigned integers (with proof)\n\n`!= 0` costs less gas compared to `> 0` for unsigned integers in `require` statements with the optimizer enabled (6 gas)\n\nProof: While it may seem that `> 0` is cheaper than `!=`, this is only true without the optimizer enabled and outside a require statement. If you enable the optimizer at 10k AND you're in a `require` statement, this will save gas. You can see this tweet for more proofs: <https://twitter.com/gzeon/status/1485428085885640706>\n\nI suggest changing `> 0` with `!= 0` here:\n\n```solidity\ncore/contracts/inception/InceptionVaultsCore.sol:122:    require(_amount > 0, \"IV100\");\ncore/contracts/liquidityMining/v2/GenericMinerV2.sol:58:    require(boostConfig.a >= 1 && boostConfig.d > 0 && boostConfig.maxBoost >= 1, \"LM004\");\ncore/contracts/liquidityMining/v2/GenericMinerV2.sol:70:    require(newBoostConfig.a >= 1 && newBoostConfig.d > 0 && newBoostConfig.maxBoost >= 1, \"LM004\");\ncore/contracts/liquidityMining/v2/GenericMinerV2.sol:175:    require(value > 0, \"LM101\");\ncore/contracts/liquidityMining/v2/GenericMinerV2.sol:195:    require(value > 0, \"LM101\");\ncore/contracts/liquidityMining/v2/PARMinerV2.sol:52:    require(boostConfig.a >= 1 && boostConfig.d > 0 && boostConfig.maxBoost >= 1, \"LM004\");\ncore/contracts/liquidityMining/v2/PARMinerV2.sol:71:    require(newBoostConfig.a >= 1 && newBoostConfig.d > 0 && newBoostConfig.maxBoost >= 1, \"LM004\");\ncore/contracts/liquidityMining/v2/PARMinerV2.sol:254:    require(_value > 0, \"LM101\");\ncore/contracts/liquidityMining/v2/PARMinerV2.sol:284:    require(_value > 0, \"LM101\");\ncore/contracts/oracles/GUniLPOracle.sol:112:    require(rA > 0 || rB > 0, \"C100\");\n```\n\nAlso, please enable the Optimizer.\n\n## [G-07] `<=` is cheaper than `<`\n\nStrict inequalities (`<`) are more expensive than non-strict ones (`<=`). This is due to some supplementary checks (ISZERO, 3 gas)\n\nI suggest using  `<=`  instead of `<` here:\n\n```solidity\ncore/contracts/libraries/ABDKMath64x64.sol:697:      return uint128(r < r1 ? r : r1);\n```\n\n## [G-08] Splitting `require()` statements that use `&&` saves gas\n\nInstead of using the `&&` operator in a single require statement to check multiple conditions, I suggest using multiple require statements with 1 condition per require statement (saving 3 gas per `&`):\n\n```solidity\ncore/contracts/libraries/ABDKMath64x64.sol:\n   35:     require(x >= -0x8000000000000000 && x <= 0x7FFFFFFFFFFFFFFF);\n   83:     require(result >= MIN_64x64 && result <= MAX_64x64);\n  107:     require(result >= MIN_64x64 && result <= MAX_64x64);\n  120:     require(result >= MIN_64x64 && result <= MAX_64x64);\n  133:     require(result >= MIN_64x64 && result <= MAX_64x64);\n  207:     require(result >= MIN_64x64 && result <= MAX_64x64);\n  288:     require(result >= MIN_64x64 && result <= MAX_64x64);\n  413:     require(result >= MIN_64x64 && result <= MAX_64x64);\n\ncore/contracts/liquidityMining/v2/GenericMinerV2.sol:\n   58:     require(boostConfig.a >= 1 && boostConfig.d > 0 && boostConfig.maxBoost >= 1, \"LM004\");\n   70:     require(newBoostConfig.a >= 1 && newBoostConfig.d > 0 && newBoostConfig.maxBoost >= 1, \"LM004\");\n  331:     require(multiplier >= 1e18 && multiplier <= _boostConfig.maxBoost, \"LM103\");\n\ncore/contracts/liquidityMining/v2/PARMinerV2.sol:\n   52:     require(boostConfig.a >= 1 && boostConfig.d > 0 && boostConfig.maxBoost >= 1, \"LM004\");\n   71:     require(newBoostConfig.a >= 1 && newBoostConfig.d > 0 && newBoostConfig.maxBoost >= 1, \"LM004\");\n  426:     require(multiplier >= 1e18 && multiplier <= _boostConfig.maxBoost, \"LM103\");\n\nsupervaults/contracts/SuperVault.sol:\n  344:     require(proxy != address(0) && router != address(0), \"SV201\"); \n```\n\n## [G-09] `require()` should be used for checking error conditions on inputs and return values while `assert()` should be used for invariant checking\n\nProperly functioning code should **never** reach a failing assert statement, unless there is a bug in your contract you should fix. Here, I believe the assert should be a require or a revert:\n\n```solidity\ncore/contracts/libraries/ABDKMath64x64.sol:641:      assert(xh == hi >> 128);\n```\n\nAs the Solidity version is `0.6.12 < 0.8.0`, the remaining gas would not be refunded in case of failure.\n\n## [G-10] Amounts should be checked for 0 before calling a transfer\n\nChecking non-zero transfer values can avoid an expensive external call and save gas.\n\nWhile this is done at some places, it's not consistently done in the solution.\n\nI suggest adding a non-zero-value check here:\n\n```solidity\ncore/contracts/inception/AdminInceptionVault.sol:81:    asset.safeTransferFrom(msg.sender, address(this), _depositAmount);\ncore/contracts/inception/AdminInceptionVault.sol:101:    asset.safeTransfer(msg.sender, _amount);\ncore/contracts/inception/AdminInceptionVault.sol:124:    stablex.safeTransfer(_to, _amount);\ncore/contracts/inception/AdminInceptionVault.sol:131:    _mimo.safeTransfer(_to, _amount);\ncore/contracts/inception/AdminInceptionVault.sol:139:    par.safeTransfer(_to, _amount);\ncore/contracts/inception/AdminInceptionVault.sol:145:    this function uses `transferFrom()` and requires pre-approval via `approve()` on the ERC20.\ncore/contracts/inception/AdminInceptionVault.sol:151:    asset.safeTransferFrom(msg.sender, address(this), _amount);\ncore/contracts/inception/InceptionVaultsCore.sol:67:    _inceptionCollateral.safeTransferFrom(msg.sender, address(this), _amount);\ncore/contracts/inception/InceptionVaultsCore.sol:93:    _inceptionCollateral.safeTransfer(msg.sender, _amount);\ncore/contracts/inception/InceptionVaultsCore.sol:186:    stablex.safeTransferFrom(msg.sender, address(_adminInceptionVault), _amount);\ncore/contracts/inception/InceptionVaultsCore.sol:234:    stablex.safeTransferFrom(msg.sender, address(this), _amount);\ncore/contracts/inception/InceptionVaultsCore.sol:235:    stablex.safeTransfer(address(_adminInceptionVault), _amount);\ncore/contracts/inception/InceptionVaultsCore.sol:239:    _inceptionCollateral.safeTransfer(msg.sender, collateralToReceive);\ncore/contracts/liquidityMining/v2/DemandMinerV2.sol:67:    _token.safeTransferFrom(msg.sender, address(this), amount);\ncore/contracts/liquidityMining/v2/DemandMinerV2.sol:72:      _token.safeTransfer(_feeCollector, fee);\ncore/contracts/liquidityMining/v2/DemandMinerV2.sol:87:      _token.safeTransfer(_feeCollector, fee);\ncore/contracts/liquidityMining/v2/DemandMinerV2.sol:90:    _token.safeTransfer(msg.sender, withdrawAmount);\ncore/contracts/liquidityMining/v2/PARMinerV2.sol:92:    _par.safeTransferFrom(msg.sender, address(this), amount);\ncore/contracts/liquidityMining/v2/PARMinerV2.sol:101:    _par.safeTransfer(msg.sender, amount);\ncore/contracts/liquidityMining/v2/PARMinerV2.sol:127:    _par.safeTransfer(msg.sender, _liquidateCallerReward);\nsupervaults/contracts/SuperVault.sol:129:    IERC20(asset).transferFrom(msg.sender, address(this), depositAmount);\nsupervaults/contracts/SuperVault.sol:247:    require(asset.transfer(msg.sender, amount));\nsupervaults/contracts/SuperVault.sol:274:    token.transferFrom(msg.sender, address(this), amount);\nsupervaults/contracts/SuperVault.sol:290:    token.transferFrom(msg.sender, address(this), depositAmount);\n```\n\n## [G-11] An array's length should be cached to save gas in for-loops\n\nReading array length at each iteration of the loop takes 6 gas (3 for mload and 3 to place memory_offset) in the stack.\n\nCaching the array length in the stack saves around 3 gas per iteration.\n\nHere, I suggest storing the array's length in a variable before the for-loop, and use it instead:\n\n```solidity\ncore/contracts/dex/DexAddressProvider.sol:16:    for (uint256 i; i < dexes.length; i++) {\n```\n\n## [G-12] `++i` costs less gas compared to `i++` or `i += 1`\n\n`++i` costs less gas compared to `i++` or `i += 1` for unsigned integer, as pre-increment is cheaper (about 5 gas per iteration). This statement is true even with the optimizer enabled.\n\n`i++` increments `i` and returns the initial value of `i`. Which means:\n\n```solidity\nuint i = 1;  \ni++; // == 1 but i == 2  \n```\n\nBut `++i` returns the actual incremented value:\n\n```solidity\nuint i = 1;  \n++i; // == 2 and i == 2 too, so no need for a temporary variable  \n```\n\nIn the first case, the compiler has to create a temporary variable (when used) for returning `1` instead of `2`\n\nInstances include:\n\n```solidity\ncore/contracts/dex/DexAddressProvider.sol:16:    for (uint256 i; i < dexes.length; i++) {\ncore/contracts/inception/AdminInceptionVault.sol:108:    for (uint8 i = 1; i < _collateralCount + 1; i++) {\ncore/contracts/libraries/ABDKMath64x64.sol:396:            resultShift += 1;\ncore/contracts/libraries/ABDKMath64x64.sol:403:          absXShift += 1;\ncore/contracts/libraries/ABDKMath64x64.sol:463:    if (xc >= 0x2) msb += 1; // No need to shift xc anymore\ncore/contracts/libraries/ABDKMath64x64.sol:624:      if (xc >= 0x2) msb += 1; // No need to shift xc anymore\n```\n\nI suggest using `++i` instead of `i++` to increment the value of an uint variable.\n\n## [G-13] Usage of a non-native 256 bits uint as a counter in for-loops increases gas cost\n\nDue to how the EVM natively works on 256 bit numbers, using a 8 bit number in for-loops introduces additional costs as the EVM has to properly enforce the limits of this smaller type.\n\nSee the warning at this link: <https://docs.soliditylang.org/en/v0.8.0/internals/layout_in_storage.html#layout-of-state-variables-in-storage> :\n\n> When using elements that are smaller than 32 bytes, your contractâ€™s gas usage may be higher. This is because the EVM operates on 32 bytes at a time. Therefore, if the element is smaller than that, the EVM must use more operations in order to reduce the size of the element from 32 bytes to the desired size.\n> It is only beneficial to use reduced-size arguments if you are dealing with storage values because the compiler will pack multiple elements into one storage slot, and thus, combine multiple reads or writes into a single operation. When dealing with function arguments or memory values, there is no inherent benefit because the compiler does not pack these values.\n\nAffected code:\n\n```solidity\ncore/contracts/inception/AdminInceptionVault.sol:108:    for (uint8 i = 1; i < _collateralCount + 1; i++) {\n```\n\nConsider manually checking for the upper bound before the for-loop and using the `uint256` type as a counter in the mentioned for-loops.\n\n## [G-14] Public functions to external\n\nThe following functions could be set external to save gas and improve code quality.\nExternal call cost is less expensive than of public functions.\n\n```solidity\nclone(bytes) should be declared external:\n - SuperVaultFactory.clone(bytes) (contracts/SuperVaultFactory.sol#23-28)\nparallel() should be declared external:\n - DexAddressProvider.parallel() (contracts/dex/DexAddressProvider.sol#43-45)\ndexMapping(uint256) should be declared external:\n - DexAddressProvider.dexMapping(uint256) (contracts/dex/DexAddressProvider.sol#52-54)\ndeposit(address,uint256) should be declared external:\n - AdminInceptionVault.deposit(address,uint256) (contracts/inception/AdminInceptionVault.sol#149-154)\nborrow(uint256,uint256) should be declared external:\n - AdminInceptionVault.borrow(uint256,uint256) (contracts/inception/AdminInceptionVault.sol#164-173)\na() should be declared external:\n - AdminInceptionVault.a() (contracts/inception/AdminInceptionVault.sol#175-177)\ndebtNotifier() should be declared external:\n - AdminInceptionVault.debtNotifier() (contracts/inception/AdminInceptionVault.sol#179-181)\nweth() should be declared external:\n - AdminInceptionVault.weth() (contracts/inception/AdminInceptionVault.sol#183-185)\nmimo() should be declared external:\n - AdminInceptionVault.mimo() (contracts/inception/AdminInceptionVault.sol#187-189)\ninceptionCore() should be declared external:\n - AdminInceptionVault.inceptionCore() (contracts/inception/AdminInceptionVault.sol#191-193)\ncollateralCount() should be declared external:\n - AdminInceptionVault.collateralCount() (contracts/inception/AdminInceptionVault.sol#195-197)\ncollaterals(uint8) should be declared external:\n - AdminInceptionVault.collaterals(uint8) (contracts/inception/AdminInceptionVault.sol#199-201)\ncollateralId(address) should be declared external:\n - AdminInceptionVault.collateralId(address) (contracts/inception/AdminInceptionVault.sol#203-205)\na() should be declared external:\n - InceptionVaultFactory.a() (contracts/inception/InceptionVaultFactory.sol#138-140)\ndebtNotifier() should be declared external:\n - InceptionVaultFactory.debtNotifier() (contracts/inception/InceptionVaultFactory.sol#142-144)\nweth() should be declared external:\n - InceptionVaultFactory.weth() (contracts/inception/InceptionVaultFactory.sol#146-148)\nmimo() should be declared external:\n - InceptionVaultFactory.mimo() (contracts/inception/InceptionVaultFactory.sol#150-152)\nadminInceptionVaultBase() should be declared external:\n - InceptionVaultFactory.adminInceptionVaultBase() (contracts/inception/InceptionVaultFactory.sol#154-156)\ninceptionVaultsCoreBase() should be declared external:\n - InceptionVaultFactory.inceptionVaultsCoreBase() (contracts/inception/InceptionVaultFactory.sol#158-160)\ninceptionVaultsDataProviderBase() should be declared external:\n - InceptionVaultFactory.inceptionVaultsDataProviderBase() (contracts/inception/InceptionVaultFactory.sol#162-164)\ninceptionVaultCount() should be declared external:\n - InceptionVaultFactory.inceptionVaultCount() (contracts/inception/InceptionVaultFactory.sol#166-168)\npriceFeedCount() should be declared external:\n - InceptionVaultFactory.priceFeedCount() (contracts/inception/InceptionVaultFactory.sol#170-172)\ninceptionVaults(uint256) should be declared external:\n - InceptionVaultFactory.inceptionVaults(uint256) (contracts/inception/InceptionVaultFactory.sol#174-176)\npriceFeeds(uint8) should be declared external:\n - InceptionVaultFactory.priceFeeds(uint8) (contracts/inception/InceptionVaultFactory.sol#178-180)\npriceFeedIds(address) should be declared external:\n - InceptionVaultFactory.priceFeedIds(address) (contracts/inception/InceptionVaultFactory.sol#182-184)\ncumulativeRate() should be declared external:\n - InceptionVaultsCore.cumulativeRate() (contracts/inception/InceptionVaultsCore.sol#243-245)\nlastRefresh() should be declared external:\n - InceptionVaultsCore.lastRefresh() (contracts/inception/InceptionVaultsCore.sol#247-249)\nvaultConfig() should be declared external:\n - InceptionVaultsCore.vaultConfig() (contracts/inception/InceptionVaultsCore.sol#251-253)\na() should be declared external:\n - InceptionVaultsCore.a() (contracts/inception/InceptionVaultsCore.sol#255-257)\ninceptionCollateral() should be declared external:\n - InceptionVaultsCore.inceptionCollateral() (contracts/inception/InceptionVaultsCore.sol#259-261)\nadminInceptionVault() should be declared external:\n - InceptionVaultsCore.adminInceptionVault() (contracts/inception/InceptionVaultsCore.sol#263-265)\ninceptionVaultsData() should be declared external:\n - InceptionVaultsCore.inceptionVaultsData() (contracts/inception/InceptionVaultsCore.sol#267-269)\ninceptionPriceFeed() should be declared external:\n - InceptionVaultsCore.inceptionPriceFeed() (contracts/inception/InceptionVaultsCore.sol#271-273)\na() should be declared external:\n - InceptionVaultsDataProvider.a() (contracts/inception/InceptionVaultsDataProvider.sol#161-163)\ninceptionVaultsCore() should be declared external:\n - InceptionVaultsDataProvider.inceptionVaultsCore() (contracts/inception/InceptionVaultsDataProvider.sol#165-167)\ninceptionVaultCount() should be declared external:\n - InceptionVaultsDataProvider.inceptionVaultCount() (contracts/inception/InceptionVaultsDataProvider.sol#169-171)\nbaseDebt() should be declared external:\n - InceptionVaultsDataProvider.baseDebt() (contracts/inception/InceptionVaultsDataProvider.sol#173-175)\na() should be declared external:\n - ChainlinkInceptionPriceFeed.a() (contracts/inception/priceFeed/ChainlinkInceptionPriceFeed.sol#87-89)\ninceptionCollateral() should be declared external:\n - ChainlinkInceptionPriceFeed.inceptionCollateral() (contracts/inception/priceFeed/ChainlinkInceptionPriceFeed.sol#91-93)\nassetOracle() should be declared external:\n - ChainlinkInceptionPriceFeed.assetOracle() (contracts/inception/priceFeed/ChainlinkInceptionPriceFeed.sol#95-97)\neurOracle() should be declared external:\n - ChainlinkInceptionPriceFeed.eurOracle() (contracts/inception/priceFeed/ChainlinkInceptionPriceFeed.sol#99-101)\ndeposit(uint256) should be declared external:\n - DemandMinerV2.deposit(uint256) (contracts/liquidityMining/v2/DemandMinerV2.sol#66-76)\nwithdraw(uint256) should be declared external:\n - DemandMinerV2.withdraw(uint256) (contracts/liquidityMining/v2/DemandMinerV2.sol#82-92)\ntoken() should be declared external:\n - DemandMinerV2.token() (contracts/liquidityMining/v2/DemandMinerV2.sol#94-96)\nfeeCollector() should be declared external:\n - DemandMinerV2.feeCollector() (contracts/liquidityMining/v2/DemandMinerV2.sol#98-100)\nfeeConfig() should be declared external:\n - DemandMinerV2.feeConfig() (contracts/liquidityMining/v2/DemandMinerV2.sol#102-104)\nreleaseRewards(address) should be declared external:\n - GenericMinerV2.releaseRewards(address) (contracts/liquidityMining/v2/GenericMinerV2.sol#80-86)\n - PARMinerV2.releaseRewards(address) (contracts/liquidityMining/v2/PARMinerV2.sol#136-142)\nupdateBoost(address) should be declared external:\n - GenericMinerV2.updateBoost(address) (contracts/liquidityMining/v2/GenericMinerV2.sol#91-94)\nstake(address) should be declared external:\n - GenericMinerV2.stake(address) (contracts/liquidityMining/v2/GenericMinerV2.sol#101-103)\n - PARMinerV2.stake(address) (contracts/liquidityMining/v2/PARMinerV2.sol#172-174)\nstakeWithBoost(address) should be declared external:\n - GenericMinerV2.stakeWithBoost(address) (contracts/liquidityMining/v2/GenericMinerV2.sol#110-112)\n - PARMinerV2.stakeWithBoost(address) (contracts/liquidityMining/v2/PARMinerV2.sol#181-183)\npendingMIMO(address) should be declared external:\n - GenericMinerV2.pendingMIMO(address) (contracts/liquidityMining/v2/GenericMinerV2.sol#119-122)\n - PARMinerV2.pendingMIMO(address) (contracts/liquidityMining/v2/PARMinerV2.sol#190-193)\npendingPAR(address) should be declared external:\n - GenericMinerV2.pendingPAR(address) (contracts/liquidityMining/v2/GenericMinerV2.sol#129-132)\n - PARMinerV2.pendingPAR(address) (contracts/liquidityMining/v2/PARMinerV2.sol#200-207)\npar() should be declared external:\n - GenericMinerV2.par() (contracts/liquidityMining/v2/GenericMinerV2.sol#134-136)\n - PARMinerV2.par() (contracts/liquidityMining/v2/PARMinerV2.sol#209-211)\na() should be declared external:\n - GenericMinerV2.a() (contracts/liquidityMining/v2/GenericMinerV2.sol#138-140)\n - PARMinerV2.a() (contracts/liquidityMining/v2/PARMinerV2.sol#213-215)\nboostConfig() should be declared external:\n - GenericMinerV2.boostConfig() (contracts/liquidityMining/v2/GenericMinerV2.sol#142-144)\n - PARMinerV2.boostConfig() (contracts/liquidityMining/v2/PARMinerV2.sol#217-219)\ntotalStake() should be declared external:\n - GenericMinerV2.totalStake() (contracts/liquidityMining/v2/GenericMinerV2.sol#146-148)\n - PARMinerV2.totalStake() (contracts/liquidityMining/v2/PARMinerV2.sol#221-223)\ntotalStakeWithBoost() should be declared external:\n - GenericMinerV2.totalStakeWithBoost() (contracts/liquidityMining/v2/GenericMinerV2.sol#150-152)\n - PARMinerV2.totalStakeWithBoost() (contracts/liquidityMining/v2/PARMinerV2.sol#225-227)\nuserInfo(address) should be declared external:\n - GenericMinerV2.userInfo(address) (contracts/liquidityMining/v2/GenericMinerV2.sol#164-166)\n - PARMinerV2.userInfo(address) (contracts/liquidityMining/v2/PARMinerV2.sol#243-245)\ndeposit(uint256) should be declared external:\n - PARMinerV2.deposit(uint256) (contracts/liquidityMining/v2/PARMinerV2.sol#91-94)\nwithdraw(uint256) should be declared external:\n - PARMinerV2.withdraw(uint256) (contracts/liquidityMining/v2/PARMinerV2.sol#100-103)\nliquidate(uint256,uint256,uint256,bytes) should be declared external:\n - PARMinerV2.liquidate(uint256,uint256,uint256,bytes) (contracts/liquidityMining/v2/PARMinerV2.sol#112-130)\nrestakePAR(address) should be declared external:\n - PARMinerV2.restakePAR(address) (contracts/liquidityMining/v2/PARMinerV2.sol#148-157)\nupdateBoost(address) should be declared external:\n - PARMinerV2.updateBoost(address) (contracts/liquidityMining/v2/PARMinerV2.sol#162-165)\nliquidateCallerReward() should be declared external:\n - PARMinerV2.liquidateCallerReward() (contracts/liquidityMining/v2/PARMinerV2.sol#229-231)\nbaseDebtChanged(address,uint256) should be declared external:\n - SupplyMinerV2.baseDebtChanged(address,uint256) (contracts/liquidityMining/v2/SupplyMinerV2.sol#45-47)\ncollateral() should be declared external:\n - SupplyMinerV2.collateral() (contracts/liquidityMining/v2/SupplyMinerV2.sol#49-51)\nsyncStake(address) should be declared external:\n - VotingMinerV2.syncStake(address) (contracts/liquidityMining/v2/VotingMinerV2.sol#56-60)\n```\n\n## [G-15] No need to explicitly initialize variables with default values\n\nIf a variable is not set/initialized, it is assumed to have the default value (`0` for `uint`, `false` for `bool`, `address(0)` for address...). Explicitly initializing it with its default value is an anti-pattern and wastes gas.\n\nAs an example: `for (uint256 i = 0; i < numIterations; ++i) {` should be replaced with `for (uint256 i; i < numIterations; ++i) {`\n\nInstances include:\n\n```solidity\ncore/contracts/inception/InceptionVaultsCore.sol:218:    uint256 insuranceAmount = 0;\ncore/contracts/libraries/ABDKMath64x64.sol:153:      bool negativeResult = false;\ncore/contracts/libraries/ABDKMath64x64.sol:222:    bool negativeResult = false;\ncore/contracts/libraries/ABDKMath64x64.sol:387:      uint256 resultShift = 0;\ncore/contracts/libraries/ABDKMath64x64.sol:437:    int256 msb = 0;\n```\n\nI suggest removing explicit initializations for default values.\n\n## [G-16] Use Custom Errors instead of Revert Strings to save Gas\n\nCustom errors from Solidity 0.8.4 are cheaper than revert strings (cheaper deployment cost and runtime cost when the revert condition is met)\n\nSource: <https://blog.soliditylang.org/2021/04/21/custom-errors/>:\n\n> Starting from [Solidity v0.8.4](https://github.com/ethereum/solidity/releases/tag/v0.8.4), there is a convenient and gas-efficient way to explain to users why an operation failed through the use of custom errors. Until now, you could already use strings to give more information about failures (e.g., `revert(\"Insufficient funds.\");`), but they are rather expensive, especially when it comes to deploy cost, and it is difficult to use dynamic information in them.\n\nCustom errors are defined using the `error` statement, which can be used inside and outside of contracts (including interfaces and libraries).\n\nInstances include:\n\n```solidity\nsupervaults/contracts/SuperVault.sol:39:    require(hasRole(DEFAULT_ADMIN_ROLE, msg.sender), \"SV001\");\nsupervaults/contracts/SuperVault.sol:56:    require(address(_a) != address(0));\nsupervaults/contracts/SuperVault.sol:57:    require(address(_ga) != address(0));\nsupervaults/contracts/SuperVault.sol:58:    require(address(_lendingPool) != address(0));\nsupervaults/contracts/SuperVault.sol:59:    require(address(dexAP) != address(0));\nsupervaults/contracts/SuperVault.sol:83:    require(msg.sender == address(lendingPool), \"SV002\");\nsupervaults/contracts/SuperVault.sol:109:    require(token.balanceOf(address(this)) >= flashloanRepayAmount, \"SV101\");\nsupervaults/contracts/SuperVault.sol:156:    require(fromCollateral.balanceOf(address(this)) >= flashloanRepayAmount, \"SV101\");\nsupervaults/contracts/SuperVault.sol:207:    require(vaultCollateral.balanceOf(address(this)) >= flashloanRepayAmount, \"SV101\");\nsupervaults/contracts/SuperVault.sol:233:    require(IERC20(a.stablex()).transfer(msg.sender, IERC20(a.stablex()).balanceOf(address(this))));\nsupervaults/contracts/SuperVault.sol:247:    require(asset.transfer(msg.sender, amount));\nsupervaults/contracts/SuperVault.sol:255:    require(IERC20(a.stablex()).transfer(msg.sender, IERC20(a.stablex()).balanceOf(address(this))));\nsupervaults/contracts/SuperVault.sol:264:    require(token.transfer(msg.sender, token.balanceOf(address(this))));\nsupervaults/contracts/SuperVault.sol:292:    require(IERC20(a.stablex()).transfer(msg.sender, IERC20(a.stablex()).balanceOf(address(this)))); //par\nsupervaults/contracts/SuperVault.sol:313:    require(IERC20(a.stablex()).transfer(msg.sender, IERC20(a.stablex()).balanceOf(address(this)))); //par\nsupervaults/contracts/SuperVault.sol:344:    require(proxy != address(0) && router != address(0), \"SV201\"); \nsupervaults/contracts/SuperVault.sol:370:      require(ga.mimo().transfer(msg.sender, ga.mimo().balanceOf(address(this))));\nsupervaults/contracts/SuperVaultFactory.sol:18:    require(address(_base) != address(0));\n```\n\nI suggest replacing revert strings with custom errors.\n\n**[m19 (Mimo DeFi) commented](https://github.com/code-423n4/2022-04-mimo-findings/issues/139#issuecomment-1120354400):**\n > This was a very thorough gas optimization report and is very helpful for us.\n\n\n\n\n***\n\n# Disclosures\n\nC4 is an open organization governed by participants in the community.\n\nC4 Contests incentivize the discovery of exploits, vulnerabilities, and bugs in smart contracts. Security researchers are rewarded at an increasing rate for finding higher-risk issues. Contest submissions are judged by a knowledgeable security researcher and solidity developer and disclosed to sponsoring developers. C4 does not conduct formal verification regarding the provided code but instead provides final verification.\n\nC4 does not provide any guarantee or warranty regarding the security of this project. All smart contract software should be used at the sole risk and responsibility of users.\n"
}